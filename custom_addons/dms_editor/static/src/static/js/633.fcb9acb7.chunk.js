"use strict";(self.webpackChunkfilesdna=self.webpackChunkfilesdna||[]).push([[633],{60633:(e,s,n)=>{n.r(s),n.d(s,{default:()=>P});var t,i=n(58769),l=n(41893),r=n(37734),a=n(6819),o=n(35676),c=n(68265),d=n(53079),u=n(41988),g=n(11569),p=n(72612),m=n(87094),x=n(41397),A=n(9950),j=n(57528),h=n(33753);const f=(0,n(73053).A)(h.Ay.div(t||(t=(0,j.A)(["\n  & .pdfPages {\n    margin-top: 15px;\n\n    & > p {\n      margin-top: 2px;\n    }\n    & > p strong {\n      margin-left: 3px;\n      font-size: 18px;\n    }\n  }\n"]))));var y=n(44414);const P=function(e){const{visible:s=!1,onClose:n=(()=>{}),rowData:t={}}=e,[j]=c.A.useForm(),[h,P]=(0,A.useState)(!1),[v,_]=(0,A.useState)({totalPages:0,cLoading:!1}),{totalPages:L}=v;return(0,o.A)({form:j,visible:s,initVal:{}}),(0,A.useEffect)((()=>{s?async function(){_((e=>({...e,cLoading:!0})));try{const e=await(0,a.Ay)("file/get-page-count",{document_id:t.id},"post");e.success?_((s=>({...s,totalPages:e.count||0,cLoading:!1}))):_((e=>({...e,cLoading:!1})))}catch(e){_((e=>({...e,cLoading:!1})))}}():_((e=>({...e,totalPages:0})))}),[s]),(0,y.jsx)(i.A,{open:s,onClose:h?null:n,title:(0,y.jsx)(r.A,{id:"documents.splitDoc",values:{doc:(0,y.jsx)("strong",{children:t.name})}}),okText:(0,y.jsx)(r.A,{id:"common.split"}),onOk:h?null:function(){j.validateFields().then((e=>{(0,x.isInteger)(e.split_range)?e.split_range<1||e.split_range>=L?(0,l.A)("error","err.pdfPgError"):async function(e){P(!0);try{const s=await(0,a.Ay)("file/split-document",e,"POST");s.success?(P(!1),(0,l.A)("success","document.splitSucMsg"),n()):(P(!1),(0,l.A)("error",s.message))}catch(s){P(!1),(0,l.A)("error")}}({document_id:t.id||0,...e}):(0,l.A)("error","err.validPageNum")}))},onCancel:h?null:n,confirmLoading:h,footer:L<=1?null:void 0,okButtonProps:{id:"split-document"},destroyOnClose:!0,children:(0,y.jsx)(f,{children:(0,y.jsx)(p.A,{spinning:h||v.cLoading,children:(0,y.jsx)(c.A,{form:j,layout:"vertical",children:(0,y.jsx)(m.A,{gutter:6,children:L<=1&&!v.cLoading?(0,y.jsx)(d.Ay,{className:"errorResult",status:"warning",title:(0,y.jsx)(r.A,{id:"document.splitErr"}),subTitle:(0,y.jsx)(r.A,{id:"document.splitErrDesc"})}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.A,{span:24,children:(0,y.jsx)("p",{children:(0,y.jsx)(r.A,{id:"document.totalPages",values:{pages:(0,y.jsx)("span",{style:{fontSize:16},className:"fw550",children:L})}})})}),(0,y.jsxs)(u.A,{className:"mt15",span:24,children:[(0,y.jsx)(c.A.Item,{label:(0,y.jsx)(r.A,{id:"common.pgNum"}),name:"split_range",rules:[{required:!0,message:(0,y.jsx)(r.A,{id:"req.pgNum"})}],children:(0,y.jsx)(g.A,{min:0,step:1,style:{minWidth:"100%"}})}),(0,y.jsx)(c.A.Item,{noStyle:!0,shouldUpdate:(e,s)=>s.split_range!==e.split_range,children:e=>{let{getFieldValue:s}=e;const n=s("split_range")||0;return n&&n<L&&(0,x.isInteger)(n)?(0,y.jsxs)("div",{className:"pdfPages",children:[(0,y.jsxs)("p",{children:["PDF 1: ",(0,y.jsxs)("strong",{children:["1 - ",n]})]}),(0,y.jsxs)("p",{children:["PDF 2:"," ",(0,y.jsxs)("strong",{children:[n+1," - ",L]})]})]}):null}})]})]})})})})})})}}}]);