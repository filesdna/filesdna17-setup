"use strict";(self.webpackChunkfilesdna=self.webpackChunkfilesdna||[]).push([[1813],{56884:(e,o,t)=>{t.d(o,{A:()=>a});const a=t(68265).A},61813:(e,o,t)=>{t.r(o),t.d(o,{default:()=>_});var a=t(10597),n=t(58769),d=t(41893),i=t(56884),r=t(37734),l=t(6819),s=t(35676),c=t(72612),m=t(87094),u=t(41988),p=t(55902),y=t(9950),f=t(98341),A=t(18469),h=t(57871),v=t(44414);const _=function(e){const{dData:o={},handleSubmit:t=(()=>{}),visible:_=!1,onClose:x=(()=>{}),cFolderId:F=0,initVal:j={}}=e,[g,D]=(0,y.useState)(!1),[k]=i.A.useForm(),b=j&&j.id;(0,s.A)({form:k,visible:_,initVal:{name:j.name}});const w=(0,f.useSelector)((e=>e.Auth.userData));function C(){k.validateFields().then((e=>{var a,n;const i={...e},r="team"===w.role,s=["Template","Attachment","Form"].includes(null===o||void 0===o||null===(a=o.apiData)||void 0===a?void 0:a.doc_type),c=(null===w||void 0===w?void 0:w.home_directory)&&1===w.home_directory.split(",").length;i.folder_id=r&&!s?c?F||w.home_directory:F||"0":null!==F&&void 0!==F?F:"0",b&&(i.id=j.id),i.doc_type=(null===o||void 0===o||null===(n=o.apiData)||void 0===n?void 0:n.doc_type)||"Document",i.name=null!==i&&void 0!==i&&i.name?i.name.trim():"",null!==j&&void 0!==j&&j.type&&(i.type=j.type),async function(e){D(!0),"Form"===e.doc_type&&"form"!==e.type&&(e.user_id=w.user_id,e.type="folder");try{const o=new FormData;o.append("doc_type",e.doc_type),o.append("name",e.name),o.append("type",e.type),o.append("folder_id",e.folder_id),o.append("user_id",w.user_id);let a="Form"===e.doc_type?await A.A.post(h.D.host+(b?h.D.updateForm:h.D.createForm),o):await(0,l.Ay)(b?"file/rename-folder":"file/create-folder",e,"POST");a="Form"===e.doc_type?a.data:a,a.success?(D(!1),(0,d.A)("success",a.message),t(a.data||{})):(D(!1),(0,d.A)("error",a.message))}catch(o){D(!1),(0,d.A)("error")}}(i)})).catch((e=>{console.log("Validate Failed:",e)}))}return(0,v.jsx)(a._H,{children:(0,v.jsx)(n.A,{open:_,onClose:g?null:x,title:(0,v.jsx)(r.A,{id:function(){var e;return"Form"===(null===o||void 0===o||null===(e=o.apiData)||void 0===e?void 0:e.doc_type)&&"form"===j.type?"Edit Form Name":"file"===j.type&&b?"documents.editDocName":b?"documents.editFolderName":"documents.createFolder"}()}),okText:(0,v.jsx)(r.A,{id:b?"common.save":"common.create"}),onOk:g?null:C,onCancel:g?null:x,confirmLoading:g,okButtonProps:{id:"create-folder"},children:(0,v.jsx)(c.A,{spinning:g,children:(0,v.jsx)(i.A,{form:k,layout:"vertical",children:(0,v.jsx)(m.A,{gutter:6,children:(0,v.jsx)(u.A,{span:24,children:(0,v.jsx)(i.A.Item,{label:(0,v.jsx)(r.A,{id:"signature.name"}),name:"name",rules:[{required:!0,message:(0,v.jsx)(r.A,{id:"req.name"})},{max:50,message:(0,v.jsx)(r.A,{id:"err.max.50char"})},{whitespace:!0,message:(0,v.jsx)(r.A,{id:"err.blankSpace"})}],children:(0,v.jsx)(p.A,{onPressEnter:C})})})})})})})})}}}]);