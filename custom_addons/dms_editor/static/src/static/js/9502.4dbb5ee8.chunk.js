(self.webpackChunkfilesdna=self.webpackChunkfilesdna||[]).push([[9502],{95143:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>T});var a=n(9950),o=n(55902),c=n(24893),r=n(10495),s=n(32858),l=n(718),i=n(45259),d=n(52160),u=n(92163),m=n(77028),p=n(32077),f=n(50014),y=n(43858),v=n(42025),x=n(94500),h=n(20735),b=n(98114),g=n(44070),j=n(25984),A=n(59051),C=n.n(A),w=n(41397),E=n(18469),O=n(57871),S=n(82038),k=n(46411),D=n(98341),M=n(12547),H=n(44414);const{ExcelFile:z}=S.Ay,{ExcelSheet:F}=S.Ay.ExcelFile,{ExcelColumn:N}=S.Ay.ExcelFile,{Search:Y}=o.A;function T(e){const{submissions:t}=e,[n,o]=(0,a.useState)(t),[A,S]=(0,a.useState)([]),[T,P]=(0,a.useState)(!1),B=(0,D.useDispatch)(),{changeDocumentId:I}=M.A;function L(e){const t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}const R=(()=>{let e=[{title:"Submission Date",dataIndex:"createdat",key:"createdat",fixed:"left",sorter:(e,t)=>e.createdat.localeCompare(t.createdat)}];return n.filter((e=>0===e.status)).forEach((t=>{const n=JSON.parse(t.data).map(((e,t)=>({title:"".concat(e.label?e.label:e.type,"(").concat(e.type,")-").concat(t),dataIndex:"".concat(e.type,"-").concat(t),key:"".concat(e.label?e.label:e.type,"(").concat(e.type,")-").concat(t),sorter:!["inputTable","signature","fileUpload"].includes(e.type)&&((n,a)=>{var o,c,r,s;let l=L(String(null===(o=n["".concat(e.type,"-").concat(t)])||void 0===o||null===(c=o.props)||void 0===c?void 0:c.children)),i=L(String(null===(r=a["".concat(e.type,"-").concat(t)])||void 0===r||null===(s=r.props)||void 0===s?void 0:s.children));return l="undefined"===l?"":l,i="undefined"===i?"":i,l.localeCompare(i)})})));e=e.concat(n)})),e=(0,w.uniqBy)(e,"key"),e})(),V=n.filter((e=>0===e.status)).map((e=>{const t={id:e.id};return JSON.parse(e.data).forEach(((e,n)=>t["".concat(e.type,"-").concat(n)]=(e=>{const{value:t,type:n}=e;return t?"appointment"===n?"".concat(t[0]?C()(t[0]).format(e.dateFormat||"DD/MM/YYYY"):""," \n              ").concat(t[1]?t[1]:""):"datePicker"===n?"".concat(t[0]?C()(t[0]).format(e.format||"DD/MM/YYYY"):""," \n              ").concat(t[1]?C()(t[1]).format(e.timeFormat||"HH:mm"):""):"time"===n?(0,w.isArray)(t)?"".concat(C()(t[0]).format(e.timeFormat||"HH:mm")," - ").concat(C()(t[1]).format(e.timeFormat||"HH:mm")):C()(t).format(e.timeFormat||"HH:mm"):"fullname"===n||"phone"===n?t.join(" "):"address"===n?t.join(", "):"signature"===n?(0,H.jsx)("img",{src:t[0],width:t[1],alt:"filesdna-sign"}):"imageSelect"===n?(0,H.jsx)("img",{src:t,alt:"filesdna-img",width:100}):"multipleChoice"===n?t.join(","):"fileUpload"===n?(0,H.jsx)(H.Fragment,{children:t.map((e=>(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(y.A,{})," ",(0,H.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:e.name}),(0,H.jsx)("br",{})]})))}):"inputTable"===n?(0,H.jsxs)("table",{className:"submission-table",children:[(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{className:"empty","aria-label":"title"}),t.cols.split("\n").map((e=>(0,H.jsx)("td",{className:"title",children:e})))]}),t.rows.split("\n").map((e=>(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{className:"title",children:e}),t.cols.split("\n").map((n=>(0,H.jsx)("td",{children:1===t.inputType?(0,H.jsx)(c.Ay,{checked:void 0!==t.value&&void 0!==t.value[e]&&t.value[e]===n}):2===t.inputType?(0,H.jsx)(r.A,{checked:void 0!==t.value&&void 0!==t.value[e]&&t.value[e].includes(n)}):void 0!==t.value&&void 0!==t.value[e]?t.value[e][n]:""})))]})))]}):(0,j.Ay)(String(t).replace("undefined",0)):""})(e))),t.createdat=C()(e.createdat).format("YYYY/MM/DD HH:mm:ss"),t})),Q={onSelect:(e,t,n)=>{S(n.map((e=>e.id)))},onSelectAll:(e,t)=>{S(t.map((e=>e.id)))}},U=()=>n.filter((e=>A.includes(e.id))).map((e=>{const t={createdat:C()(e.createdat).format("YYYY/MM/DD HH:mm:ss")};return JSON.parse(e.data).forEach(((e,n)=>{t["".concat(e.label?e.label:e.type,"(").concat(e.type,")-").concat(n)]=(e=>{const{value:t,type:n}=e;if(!t)return"";if("appointment"===n)return"".concat(t[0]?C()(t[0]).format(e.dateFormat||"DD/MM/YYYY"):""," \n              ").concat(t[1]?t[1]:"");if("datePicker"===n)return"".concat(t[0]?C()(t[0]).format(e.format||"DD/MM/YYYY"):""," \n              ").concat(t[1]?C()(t[1]).format(e.timeFormat||"HH:mm"):"");if("time"===n)return(0,w.isArray)(t)?"".concat(C()(t[0]).format(e.timeFormat||"HH:mm")," - ").concat(C()(t[1]).format(e.timeFormat||"HH:mm")):C()(t).format(e.timeFormat||"HH:mm");if("fullname"===n||"phone"===n)return t.join(" ");if("address"===n)return t.join(", ");if("signature"===n)return t[0];if("multipleChoice"===n)return t.join(",");if("fileUpload"===n)return t.map((e=>e.url)).join(", ");if("inputTable"===n){let e=" * | ".concat(t.cols.replaceAll("\n","|"),"\r\n");return e+=t.rows.split("\n").map((e=>"".concat(e,"|").concat(t.cols.split("\n").map((n=>1===t.inputType?t.value[e]===n:2===t.inputType?t.value[e].includes(n):t.value[e][n])).join("|")))).join("\r\n"),e}return L(t).replace("undefined",0).replace(/\s\s+/g," ")})(e)})),t}));return(0,H.jsxs)(l.A,{className:"smartform-container",children:[(0,H.jsx)("div",{style:{padding:"20px"},children:(0,H.jsxs)(i.A,{children:[(0,H.jsx)(d.Ay,{onClick:()=>{document.getElementById("root").setAttribute("data-path","/dashboard/forms"),B(I("/dashboard/forms"))},children:"Back"}),(0,H.jsx)(Y,{placeholder:"Search table",onSearch:e=>{o(""===e?t:n.filter((t=>JSON.stringify(t).includes(e))))},style:{width:150}}),A.length>0&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(u.A,{overlay:T?(0,H.jsx)(H.Fragment,{}):(0,H.jsxs)(m.A,{children:[(0,H.jsxs)(m.A.Item,{onClick:()=>(async e=>{P(!0);try{const t=new FormData;t.append("ids",e);const n=await E.A.post("".concat(O.D.host).concat(O.D.exportPdf),t,{responseType:"blob"}),a=new Date,o=window.URL.createObjectURL(new Blob([n.data],{type:"application/zip"})),c=document.createElement("a");c.href=o,c.setAttribute("download","export-pdf-".concat(a.getTime(),".zip")),document.body.appendChild(c),c.click()}catch(t){console.log("error",t)}setTimeout((()=>{P(!1)}),100)})(A),children:[(0,H.jsx)(v.A,{})," Download As PDF"]},"0"),(0,H.jsx)(m.A.Item,{onClick:()=>(async e=>{P(!0),console.log(e),setTimeout((()=>{P(!1)}),500)})(A),children:(0,H.jsx)(z,{element:(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(x.A,{})," Download As Excel"]}),filename:"export-excel",children:(0,H.jsx)(F,{data:U(),name:"Submissions",children:(()=>{let e=[{title:"Submission Date",key:"createdat"}];return n.filter((e=>A.includes(e.id))).forEach((t=>{const n=JSON.parse(t.data).map(((e,t)=>({title:"".concat(e.label?e.label:e.type,"(").concat(e.type,")-").concat(t),key:"".concat(e.label?e.label:e.type,"(").concat(e.type,")-").concat(t)})));e=e.concat(n)})),e=(0,w.uniqBy)(e,"key"),e})().map((e=>(0,H.jsx)(N,{label:e.title,value:e.key})))})})},"1"),(0,H.jsx)(m.A.Item,{onClick:()=>(async e=>{P(!0),console.log(e),setTimeout((()=>{P(!1)}),500)})(A),children:(0,H.jsxs)(k.CSVLink,{data:U(),filename:"export-csv.csv",className:"btn btn-primary",target:"_blank",children:[(0,H.jsx)(h.A,{})," Download As CSV"]})},"2")]}),placement:"bottom",arrow:!0,children:(0,H.jsx)(p.A,{count:A.length,children:(0,H.jsx)(d.Ay,{icon:(0,H.jsx)(b.A,{}),disabled:T,loading:T,children:"Download"})})}),(0,H.jsx)(d.Ay,{icon:(0,H.jsx)(g.A,{}),onClick:()=>(async(e,t)=>{try{const a={headers:{Accept:"application/json","Content-Type":"application/json"}},c=new FormData;c.append("ids",e),c.append("status",t);const r=await E.A.post("".concat(O.D.host).concat(O.D.updateSubmission),c,a);if(r.data.success){s.Ay.success(r.data.message);const a=(0,w.cloneDeep)(n);a.forEach((n=>{e.includes(n.id)&&(n.status=t)})),o(a),S(A.filter((t=>!e.includes(t))))}else s.Ay.error(r.data.message)}catch(a){console.log("error",a)}})(A,2),danger:!0})]})]})}),(0,H.jsx)(f.A,{rowKey:e=>e.id,columns:R,rowSelection:{...Q},dataSource:V,bordered:!0,scroll:{x:"auto"}})]})}},4729:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(58168),o=n(9950);const c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};var r=n(25085),s=function(e,t){return o.createElement(r.A,(0,a.A)({},e,{ref:t,icon:c}))};const l=o.forwardRef(s)},12678:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(58168),o=n(9950);const c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};var r=n(25085),s=function(e,t){return o.createElement(r.A,(0,a.A)({},e,{ref:t,icon:c}))};const l=o.forwardRef(s)},1158:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(58168),o=n(9950);const c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};var r=n(25085),s=function(e,t){return o.createElement(r.A,(0,a.A)({},e,{ref:t,icon:c}))};const l=o.forwardRef(s)},55902:(e,t,n)=>{"use strict";n.d(t,{A:()=>D});var a=n(9950),o=n(48738),c=n.n(o),r=n(5741),s=n(77643),l=n(10912);const i=e=>{const{getPrefixCls:t,direction:n}=(0,a.useContext)(r.QO),{prefixCls:o,className:i}=e,d=t("input-group",o),u=t("input"),[m,p]=(0,l.Ay)(u),f=c()(d,{["".concat(d,"-lg")]:"large"===e.size,["".concat(d,"-sm")]:"small"===e.size,["".concat(d,"-compact")]:e.compact,["".concat(d,"-rtl")]:"rtl"===n},p,i),y=(0,a.useContext)(s.$W),v=(0,a.useMemo)((()=>Object.assign(Object.assign({},y),{isFormItemInput:!1})),[y]);return m(a.createElement("span",{className:f,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},a.createElement(s.$W.Provider,{value:v},e.children)))};var d=n(66583),u=n(4729),m=n(12678),p=n(15207),f=n(41929),y=n(85952),v=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};const x=e=>e?a.createElement(m.A,null):a.createElement(u.A,null),h={click:"onClick",hover:"onMouseOver"};const b=a.forwardRef(((e,t)=>{const{visibilityToggle:n=!0}=e,o="object"===typeof n&&void 0!==n.visible,[s,l]=(0,a.useState)((()=>!!o&&n.visible)),i=(0,a.useRef)(null);a.useEffect((()=>{o&&l(n.visible)}),[o,n]);const u=(0,y.A)(i),m=()=>{const{disabled:t}=e;t||(s&&u(),l((e=>{var t;const a=!e;return"object"===typeof n&&(null===(t=n.onVisibleChange)||void 0===t||t.call(n,a)),a})))},{className:b,prefixCls:g,inputPrefixCls:j,size:A}=e,C=v(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:w}=a.useContext(r.QO),E=w("input",j),O=w("input-password",g),S=n&&(t=>{const{action:n="click",iconRender:o=x}=e,c=h[n]||"",r=o(s),l={[c]:m,className:"".concat(t,"-icon"),key:"passwordIcon",onMouseDown:e=>{e.preventDefault()},onMouseUp:e=>{e.preventDefault()}};return a.cloneElement(a.isValidElement(r)?r:a.createElement("span",null,r),l)})(O),k=c()(O,b,{["".concat(O,"-").concat(A)]:!!A}),D=Object.assign(Object.assign({},(0,p.A)(C,["suffix","iconRender","visibilityToggle"])),{type:s?"text":"password",className:k,prefixCls:E,suffix:S});return A&&(D.size=A),a.createElement(d.A,Object.assign({ref:(0,f.K4)(t,i)},D))}));var g=n(60767),j=n(39156),A=n(52160),C=n(9415),w=n(93457),E=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};const O=a.forwardRef(((e,t)=>{const{prefixCls:n,inputPrefixCls:o,className:s,size:l,suffix:i,enterButton:u=!1,addonAfter:m,loading:p,disabled:y,onSearch:v,onChange:x,onCompositionStart:h,onCompositionEnd:b}=e,O=E(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:S,direction:k}=a.useContext(r.QO),D=a.useRef(!1),M=S("input-search",n),H=S("input",o),{compactSize:z}=(0,w.RQ)(M,k),F=(0,C.A)((e=>{var t;return null!==(t=null!==l&&void 0!==l?l:z)&&void 0!==t?t:e})),N=a.useRef(null),Y=e=>{var t;document.activeElement===(null===(t=N.current)||void 0===t?void 0:t.input)&&e.preventDefault()},T=e=>{var t,n;v&&v(null===(n=null===(t=N.current)||void 0===t?void 0:t.input)||void 0===n?void 0:n.value,e,{source:"input"})},P="boolean"===typeof u?a.createElement(g.A,null):null,B="".concat(M,"-button");let I;const L=u||{},R=L.type&&!0===L.type.__ANT_BUTTON;I=R||"button"===L.type?(0,j.Ob)(L,Object.assign({onMouseDown:Y,onClick:e=>{var t,n;null===(n=null===(t=null===L||void 0===L?void 0:L.props)||void 0===t?void 0:t.onClick)||void 0===n||n.call(t,e),T(e)},key:"enterButton"},R?{className:B,size:F}:{})):a.createElement(A.Ay,{className:B,type:u?"primary":void 0,size:F,disabled:y,key:"enterButton",onMouseDown:Y,onClick:T,loading:p,icon:P},u),m&&(I=[I,(0,j.Ob)(m,{key:"addonAfter"})]);const V=c()(M,{["".concat(M,"-rtl")]:"rtl"===k,["".concat(M,"-").concat(F)]:!!F,["".concat(M,"-with-button")]:!!u},s);return a.createElement(d.A,Object.assign({ref:(0,f.K4)(N,t),onPressEnter:e=>{D.current||p||T(e)}},O,{size:F,onCompositionStart:e=>{D.current=!0,null===h||void 0===h||h(e)},onCompositionEnd:e=>{D.current=!1,null===b||void 0===b||b(e)},prefixCls:H,addonAfter:I,suffix:i,onChange:e=>{e&&e.target&&"click"===e.type&&v&&v(e.target.value,e,{source:"clear"}),x&&x(e)},className:V,disabled:y}))}));var S=n(37122);const k=d.A;k.Group=i,k.Search=O,k.TextArea=S.A,k.Password=b;const D=k},10273:()=>{},18307:()=>{}}]);