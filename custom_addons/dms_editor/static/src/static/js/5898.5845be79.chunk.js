"use strict";(self.webpackChunkfilesdna=self.webpackChunkfilesdna||[]).push([[5898],{5898:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var a=n(41893),s=n(37734),c=n(6819),l=n(93347),r=n(41135),i=n(1203),h=n(35398),u=n(10495),o=n(41397),d=n(9950),m=n(28429),f=n(44414);const p=function(e){const{visible:t,onClose:n,handleSubmit:p,selectedAttachments:A}=e,[_,y]=(0,d.useState)(!1),[g,k]=(0,d.useState)([]),[x,j]=(0,d.useState)([]),v=(0,m.g)();(0,d.useEffect)((()=>{"form"!==v.type&&async function(){if(0===g.length){y(!0);try{const e=await(0,c.Ay)("file/get-documents",{doc_type:"Attachment",type:"file"},"POST");e.success?k(e.data.map((e=>({name:e.name,hash_url:e.hash_url,type:l.cc[e.file_type],is_completed:"pdf"!==l.cc[e.file_type]})))):(0,a.A)("error",e.message),y(!1)}catch(e){y(!1),(0,a.A)("error")}}}(),j(A.filter((e=>"Original"!==e.name)))}),[t]);const C=e=>{const t=e.target.value,n=(0,o.cloneDeep)(x);e.target.checked?n.push((0,o.find)(g,(e=>e.hash_url===t))):(0,o.remove)(n,{hash_url:t}),j(n)};return(0,f.jsx)(r.A,{title:"Select Attachments",open:t,okText:(0,f.jsx)(s.A,{id:"common.add"}),onCancel:_?null:n,onOk:_?null:function(){p(x)},confirmLoading:_,children:(0,o.isEmpty)(g)?(0,f.jsx)(i.A,{description:(0,f.jsx)("span",{children:"There are no attachments available"})}):(0,f.jsx)(h.A,{children:g.map((e=>{return(0,f.jsx)(h.A.Item,{children:(0,f.jsx)(u.A,{value:e.hash_url,onChange:C,defaultChecked:(t=e.hash_url,A.map((e=>e.hash_url)).includes(t)),children:e.name})},e.id);var t}))})})}}}]);