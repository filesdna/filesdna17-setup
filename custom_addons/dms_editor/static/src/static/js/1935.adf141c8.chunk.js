"use strict";(self.webpackChunkfilesdna=self.webpackChunkfilesdna||[]).push([[1935],{17619:(e,n,t)=>{t.d(n,{A:()=>i});var a,s=t(57528),o=t(33753);const i=(0,t(73053).A)(o.Ay.div(a||(a=(0,s.A)(["\n  @keyframes voice_pulse {\n    0% {\n      box-shadow: 0px 0px 5px 0px rgba(214, 214, 214, 0.7);\n    }\n    65% {\n      box-shadow: 0px 0px 5px 13px rgba(214, 214, 214, 0.9);\n    }\n    90% {\n      box-shadow: 0px 0px 5px 13px rgba(214, 214, 214, 0);\n    }\n  }\n\n  & .ant-btn-circle.rec {\n    animation-name: voice_pulse;\n    animation-duration: 1.5s;\n    animation-iteration-count: infinite;\n    animation-timing-function: linear;\n\n    background-color: #ff4646;\n    color: #fff;\n    border-color: transparent !important;\n  }\n"]))))},37413:(e,n,t)=>{t.d(n,{A:()=>f});var a=t(9950),s=t(52160),o=t(1635),i=t(55266),r=t(61273),c=t.n(r),l=t(8187),d=t(41893),u=t(17619),p=t(44414);const m=new(c())({bitRate:128});const f=function(e){const{onComplete:n=(()=>{}),btnSize:t,loading:r,disabled:c,style:f}=e,[h,g]=(0,a.useState)({isRecording:!1,isBlocked:!1});async function x(){const e=await(0,l.IW)();g((n=>({...n,isBlocked:!e})))}return(0,a.useEffect)((()=>{x()}),[]),(0,p.jsx)(u.A,{children:(0,p.jsx)(s.Ay,{loading:r,icon:h.isRecording?(0,p.jsx)(o.A,{}):(0,p.jsx)(i.A,{}),shape:"circle",className:h.isRecording?"rec":"",onClick:function(){h.isBlocked?(x(),(0,d.A)("info","record.permission")):h.isRecording?m.stop().getMp3().then((e=>{let[t,a]=e;const s=new File(t,"voice.mp3",{type:a.type,lastModified:Date.now()});g((e=>({...e,isRecording:!1}))),n(s)})).catch((e=>console.log(e))):m.start().then((()=>{(0,d.A)("info","record.startRecording"),g((e=>({...e,isRecording:!0})))})).catch((e=>console.error(e)))},disabled:h.isBlocked||c,size:t,style:f})})}},61154:(e,n,t)=>{t.d(n,{A:()=>B});var a=t(60974),s=t(26142),o=t(66276),i=t(97977),r=t(20142),c=t(58203),l=t(79378),d=t(50198),u=t(86596),p=t(15306),m=t(66609),f=t(47738),h=t(15424),g=t(15790),x=t(1158),A=t(95355),j=t(34945),y=t(22569),v=t(98114),b=t(92049),w=t(49735),k=t(67756),_=t(96109),C=t(44070),S=t(3307),z=t(51400),N=t(23998),E=t(81419),R=t(23703),M=t(44414);const B=function(e){let{name:n=""}=e;return"users"===n?(0,M.jsx)(a.A,{}):"link"===n?(0,M.jsx)(s.A,{}):"settings"===n?(0,M.jsx)(o.A,{}):"globe"===n?(0,M.jsx)(i.A,{}):"translation"===n?(0,M.jsx)(r.A,{}):"dashboard"===n?(0,M.jsx)(c.A,{}):"profile"===n?(0,M.jsx)(l.A,{}):"container"===n?(0,M.jsx)(d.A,{}):"language"===n?(0,M.jsx)(u.A,{}):"dept"===n?(0,M.jsx)(p.A,{}):"verification"===n?(0,M.jsx)(m.A,{}):"file"===n?(0,M.jsx)(f.A,{}):"file-filled"===n?(0,M.jsx)(h.A,{}):"file-sharing"===n?(0,M.jsx)(g.A,{}):"folder"===n?(0,M.jsx)(x.A,{}):"folder-filled"===n?(0,M.jsx)(A.A,{}):"back-filled"===n?(0,M.jsx)(j.A,{}):"tags"===n?(0,M.jsx)(y.A,{}):"download"===n?(0,M.jsx)(v.A,{}):"file-sign"===n?(0,M.jsx)(b.A,{}):"grouped"===n?(0,M.jsx)(w.A,{}):"workflow"===n?(0,M.jsx)(k.A,{}):"reports"===n?(0,M.jsx)(_.A,{}):"trash"===n?(0,M.jsx)(C.A,{}):"orders"===n?(0,M.jsx)(S.A,{}):"mail"===n?(0,M.jsx)(z.A,{}):"project"===n?(0,M.jsx)(N.A,{}):"calendar"===n?(0,M.jsx)(E.A,{}):"chat"===n?(0,M.jsx)(R.A,{}):null}},48399:(e,n,t)=>{t.d(n,{A:()=>l});var a=t(9950),s=t(98581),o=t(45131),i=t(44414);const r=["Arial=arial,helvetica,sans-serif","Book Antiqua=book antiqua,palatino","Comic Sans MS=comic sans ms,sans-serif","Courier New=courier new,courier","Georgia=georgia,palatino","Helvetica=helvetica","Times New Roman=times new roman,times","Open Sans='Open Sans', sans-serif","Oswald='Oswald', sans-serif","Amiri_ar='Amiri', serif _ ar","Reem Kufi_ar='Reem Kufi', sans-serif _ ar","Aref Ruqaa_ar='Aref Ruqaa', serif _ ar","Scheherazade_ar='Scheherazade', serif _ ar","Tajawal_ar='Tajawal', sans-serif _ ar","Vibes_ar='Vibes', cursive","Lucida Console='Lucida Console', Monaco, monospace","Comic Sans MS='Comic Sans MS', 'Comic Sans', cursive, sans-serif"];class c extends a.Component{constructor(e){var n;super(e),this.setupEditor=e=>{this.editorRef.current=e,e.ui.registry.addAutocompleter("custom-mention",{ch:"@",minChars:0,columns:1,fetch:e=>new Promise((n=>{n(this.state.mentionSuggestions.filter((n=>n.name.includes(e))).map((e=>({value:e.name,text:e.name}))))})),onAction:(n,t,a)=>{e.selection.setRng(t),e.insertContent('<span style="background-color: rgba(0, 151, 167, 0.2); padding: 5px" class="mention">@'.concat(a,'</span style="background-color: none; padding: 0">')),n.hide()}}),e.on("keydown",(n=>{"@"===n.key&&e.execCommand("mceAutocompleter")}))},this.onEditorChange=e=>{this.triggerChange(e)},this.triggerChange=e=>{const{onChange:n}=this.props;n&&n(e)},this.editorRef=a.createRef(),this.state={mentionSuggestions:(null===e||void 0===e||null===(n=e.userData)||void 0===n?void 0:n.map((e=>({name:"".concat(e.user.first_name," ").concat(e.user.last_name),picture:e.user.picture}))))||[]}}render(){const{value:e,disabled:n,height:t,onBlur:a,onFocus:c,auto_focus:l,onKeyDown:d,extraProps:u}=this.props;return(0,i.jsx)(o.K,{apiKey:s.A.tinyEditorKey,onEditorChange:this.onEditorChange,value:e,init:{height:t||340,plugins:["advlist autolink lists link image charmap print preview anchor searchreplace visualblocks code fullscreen table autoresize"],content_style:'@import url("https://fonts.googleapis.com/css2?family=Open+Sans&family=Oswald&display=swap&family=Reem+Kufi&display=swap&family=Aref+Ruqaa&family=Scheherazade&family=Tajawal:wght@500&family=Vibes&display=swap&family=Amiri");',font_formats:r.join(";"),toolbar:"undo redo | fontselect | fontsizeselect | formatselect | bold italic | customMention | link | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table tabledelete | tableprops tablerowprops tablecellprops | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",resize:!1,auto_focus:l,setup:this.setupEditor,...u},onInit:(e,n)=>this.setupEditor(n),onBlur:a,onFocus:c,disabled:n,onKeyDown:d})}}c.defaultProps={onChange:null,value:"",disabled:!1,height:340,onBlur:null,onFocus:null,auto_focus:!1,extraProps:{}};const l=c},56884:(e,n,t)=>{t.d(n,{A:()=>a});const a=t(68265).A},61935:(e,n,t)=>{t.r(n),t.d(n,{default:()=>U});var a=t(10597),s=t(58769),o=t(41893),i=t(56884),r=t(37734),c=t(6819),l=t(99386),d=t(35621),u=t(65059),p=t(22748),m=t(10495),f=t(52160),h=t(72612),g=t(1203),x=t(45784),A=t(4159),j=t.n(A),y=t(90923),v=t.n(y),b=t(36049),w=t.n(b),k=t(43978),_=t.n(k),C=t(7776),S=t.n(C),z=t(43540),N=t.n(z),E=t(64085),R=t.n(E),M=(t(59051),t(9950)),B=(t(37413),t(35821)),D=t(12678),K=t(98581),P=t(41397),V=(t(48399),t(69466)),H=t(98341),O=t(28429),F=t(74283),T=t(61154),I=t(42074),L=t(760),q=t(44414);const G=(0,M.lazy)((()=>Promise.all([t.e(101),t.e(14),t.e(4373)]).then(t.bind(t,34373))));j().extend(v()),j().extend(w()),j().extend(S()),j().extend(_()),j().extend(N()),j().extend(R());const{Option:W}=l.A;const U=function(e){const{handleSubmit:n=(()=>{}),visible:t=!1,onClose:l=(()=>{}),rowData:A={},document_json:j=[],form:y,activeKey:v,projectList:b}=e,[w]=i.A.useForm(),{userData:k}=(0,H.useSelector)((e=>e.Auth)),[_,C]=((0,O.Zp)(),(0,M.useState)({})),S=(0,O.zy)().search,z=F.A.parse(S,{arrayFormat:"comma",encode:!1}),[N,E]=(0,M.useState)(!1),[R,W]=(0,M.useState)(),[U,Z]=(0,M.useState)({...z,page:1,per_page:5,folder_id:"0"}),[J,Q]=(0,M.useState)({files:[],loading:!1,showDocModal:!1}),X=U.folder_id||"0";async function Y(e){Q((e=>({...e,loading:!0,showDocModal:!0})));try{const n=await(0,c.Ay)("file/get-documents",{...e,folder_id:e.folder_id?e.folder_id:null!==X&&void 0!==X?X:"0",doc_type:"Document"},"POST");if(n.success&&(0,P.isArray)(n.data)){const e=[...n.data];if(X&&0!==Number(X)){const t={key:"0",id:n.parent_id,name:"-",file_type:"",type:"back"};e.unshift(t)}Q((t=>({...t,files:e,parentId:n.parent_id||0,parentFolder:n.parentFolder||[],loading:!1})));const t=_?{..._}:{};t.total=n.total_count||1,t.pageSize=n.per_page||5,t.current=n.page||1,Z((e=>({...e,page:n.page||1,per_page:n.per_page||5}))),C(t)}else Q((e=>({...e,files:[],loading:!1})))}catch(n){Q((e=>({...e,files:[],loading:!1})))}}function $(){Z((()=>({folder_id:X}))),Y()}function ee(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a={...U,page:1,per_page:5};n&&(a[n]=e||void 0),Z(a),t&&Y({...a})}function ne(e){var n;"folder"===e.type||"back"===e.type?function(e){const n=e&&0!==e?"string"!==typeof e&&e.toString():void 0;Z((e=>({...e,folder_id:n,page:1,per_page:_.per_page||5})))}(e.id):(y.setFieldsValue({doc_name:e.name,doc_number:e.ref_number?e.ref_number:e.barcode,tags:null===e||void 0===e||null===(n=e.tags)||void 0===n?void 0:n.map((e=>e.name)),document_id:e.id,hash_url:e.hash_url}),Q((e=>({...e,showDocModal:!1}))))}function te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){const n=(0,P.isArray)(U.tags)?[...U.tags]:[];n.indexOf(e)<0&&e&&(n.push(e),Z((e=>{const t={...e,tags:n};return Y(t),t})))}}function ae(e){return(0,q.jsx)("div",{style:{maxWidth:300},children:e.map((e=>(0,q.jsx)(d.A,{className:"pointer",onClick:n=>{n.stopPropagation(),te(e.name)},style:{marginBottom:5},children:e.name},e.id)))})}function se(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const n=(0,P.isArray)(e)?e:[],t=n.length,a=n.length>4?(0,P.take)(n,4):n;return(0,P.isEmpty)(a)?null:(0,q.jsx)("div",{className:"tagsMain",onKeyPress:e=>{e.stopPropagation()},role:"button",tabIndex:-1,onClick:e=>{e.stopPropagation()},children:a.map(((e,a)=>{const s=e&&e.name?e.name:"";return t>4&&3===a?(0,q.jsx)(u.A,{title:(0,q.jsx)(r.A,{id:"common.tags"}),content:ae(n),trigger:"click",arrowPointAtCenter:!0,placement:"bottom",children:(0,q.jsx)(d.A,{className:"pointer",onClick:e=>{e.stopPropagation()},children:"..."})},e.id):(0,q.jsx)(p.A,{title:s,placement:"bottom",children:(0,q.jsx)(d.A,{className:"pointer",onClick:e=>{e.stopPropagation(),te(s)},children:s})},e.id)}))})}M.useEffect((()=>{Y({page:1,per_page:5,folder_id:"0"})}),[]),M.useEffect((()=>{t&&Y({...U})}),[X]),M.useEffect((()=>{if(!R||0===(null===R||void 0===R?void 0:R.length))if((0,P.isArray)(j)){const e=j.map((e=>Object.prototype.hasOwnProperty.call(e,"attachDocs")&&e.attachDocs.length>0?j[0].attachDocs:[]));W(e[0])}else W(null)}),[j]);const oe=[{title:(0,q.jsx)(r.A,{id:"tools.select"}),key:"select",render:(e,n)=>"back"===n.type||"folder"===n.type?null:(0,q.jsx)(m.A,{checked:null===R||void 0===R?void 0:R.includes(n.id),onChange:e=>((e,n)=>{if(!Array.isArray(R))return void W([e]);const t=n?[...R,e]:R.filter((n=>n!==e));W(t)})(n.id,e.target.checked)})},{key:"name_sort",title:(0,q.jsx)(r.A,{id:"antTable.title"}),dataIndex:"name",rowKey:"name",className:"fullname-cell filedata-cell",render:(e,n)=>"back"===n.type?(0,q.jsx)("div",{onClick:()=>ne(n),onKeyPress:()=>{},tabIndex:-1,role:"button",className:"fileContentMain",children:(0,q.jsxs)("span",{className:"mobile-lbl-val backBtn",children:[(0,q.jsx)(B.A,{})," ",(0,q.jsx)("span",{className:"ml5",children:(0,q.jsx)(r.A,{id:"common.back"})})]})}):(0,q.jsxs)("div",{onClick:()=>{"link"!==n.type&&ne(n)},onKeyPress:()=>{},tabIndex:-1,role:"button",className:"fileContentMain",children:[(0,q.jsx)("div",{className:"fileIcon",children:(0,q.jsx)(T.A,{name:n.type||"file"})}),(0,q.jsxs)("div",{children:[(0,q.jsx)("span",{className:"label",children:(0,q.jsx)(r.A,{id:"antTable.title.name"})}),(0,q.jsx)("span",{className:"mobile-lbl-val",children:(0,q.jsxs)("div",{className:"nameEmailMain",children:[(0,q.jsx)("span",{className:"iNum primaryColor",children:"link"===n.type?(0,q.jsx)(I.N_,{to:n.url,rel:"noreferrer",target:"_blank",children:n.name}):n.name||"-"}),se(n.tags||[])]})})]})]})},{title:(0,q.jsx)(r.A,{id:"common.action"}),dataIndex:"edit",rowKey:"edit",width:140,fixed:"right",className:"action-cell",render:(e,n)=>"back"===n.type||"folder"===n.type?null:(0,q.jsx)("div",{className:"isoInvoiceBtnView",children:(0,q.jsx)(p.A,{title:(0,q.jsx)(r.A,{id:"document.openEdit"}),children:(0,q.jsx)(f.Ay,{shape:"circle",icon:(0,q.jsx)(D.A,{}),className:"invoiceViewBtn signBtn",onClick:()=>{const e="link"===n.type?n.url:"".concat(K.A.domainUrl,"/document/").concat(n.hash_url);window.open(e,"_blank")}})})})}];return(0,q.jsx)(a._H,{children:(0,q.jsx)(s.A,{open:t,onClose:N?null:l,title:(0,q.jsx)(r.A,{id:"document.linkDoc"}),okText:(0,q.jsx)(r.A,{id:"common.save"}),onOk:N?null:async function(){let e;if(E(!0),(0,P.isArray)(j)&&!(0,P.isEmpty)(j)){e=j.map((e=>(Object.prototype.hasOwnProperty.call(e,"attachDocs"),{...e,attachDocs:R})));(await(0,c.Ay)("file/update-document-json",{document_id:A.id,document_json:e},"post")).success?(E(!1),n(),(0,o.A)("success","Added attached documents")):(E(!1),(0,o.A)("error","Error in Adding attached documents"))}else{e=[{attachDocs:R}];(await(0,c.Ay)("file/update-document-json",{document_id:A.id,document_json:e},"post")).success?(E(!1),n(),(0,o.A)("success","Added attached documents")):(E(!1),(0,o.A)("error","Error in Adding attached documents"))}},onCancel:N?null:()=>{l(),W([])},confirmLoading:N,okButtonProps:{id:"create-link"},width:900,children:(0,q.jsxs)(M.Suspense,{fallback:(0,q.jsx)("div",{className:"loaderMain",children:(0,q.jsx)(h.A,{})}),children:[(0,q.jsx)(L.default,{dData:{},resetFlt:$,filters:U,onChange:ee,displayFlt:!0}),(0,P.isEmpty)(J.files)&&!J.loading?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(f.Ay,{icon:(0,q.jsx)(B.A,{}),onClick:()=>ne({type:"back",id:0}),children:"Go Back"}),(0,q.jsx)(g.A,{})]}):(0,q.jsxs)(a.Ox,{children:[(0,q.jsx)("div",{className:"isoInvoiceTable document-list-table",children:!J.loading&&(0,P.isEmpty)(J.files.filter((e=>"back"!==e.type)))?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(f.Ay,{icon:(0,q.jsx)(B.A,{}),onClick:()=>ne({type:"back",id:0}),children:"Go Back"}),(0,q.jsx)(g.A,{})]}):(0,q.jsx)(V.Ay,{style:{minHeight:700},children:(0,q.jsx)(G,{loading:J.loading,rowKey:e=>e.id,dataSource:J.files,columns:oe,className:"invoiceListTable fileManagerTable",pagination:!1,onRow:(e,n)=>({index:n}),showSorterTooltip:!1,style:{cursor:"pointer"}})})}),!J.loading&&!(0,P.isEmpty)(J.files.filter((e=>"back"!==e.type)))&&(0,q.jsx)(x.A,{total:_.total||1,current:_.current||1,pageSize:_.pageSize||5,showSizeChanger:!0,onChange:(e,n)=>function(e,n,t){const a={...U,page:1};t&&t.columnKey&&((0,P.map)(a,((e,n)=>{n!==t.columnKey&&n.includes("_sort")&&(a[n]=void 0)})),a[t.columnKey]=t.order),(0,P.isObject)(e)&&!(0,P.isEmpty)(e)&&(a.page=e.current,a.per_page=e.pageSize,C((n=>({...n,...e})))),Z(a),Y({...a})}({current:e,pageSize:n})})]})]})})})}},15306:(e,n,t)=>{t.d(n,{A:()=>c});var a=t(58168),s=t(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"};var i=t(25085),r=function(e,n){return s.createElement(i.A,(0,a.A)({},e,{ref:n,icon:o}))};const c=s.forwardRef(r)},35821:(e,n,t)=>{t.d(n,{A:()=>c});var a=t(58168),s=t(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var i=t(25085),r=function(e,n){return s.createElement(i.A,(0,a.A)({},e,{ref:n,icon:o}))};const c=s.forwardRef(r)},55266:(e,n,t)=>{t.d(n,{A:()=>c});var a=t(58168),s=t(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1zM512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168zm-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92V232z"}}]},name:"audio",theme:"outlined"};var i=t(25085),r=function(e,n){return s.createElement(i.A,(0,a.A)({},e,{ref:n,icon:o}))};const c=s.forwardRef(r)},1635:(e,n,t)=>{t.d(n,{A:()=>c});var a=t(58168),s=t(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 176h80v672h-80zm408 0h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z"}}]},name:"pause",theme:"outlined"};var i=t(25085),r=function(e,n){return s.createElement(i.A,(0,a.A)({},e,{ref:n,icon:o}))};const c=s.forwardRef(r)}}]);