"use strict";(self.webpackChunkfilesdna=self.webpackChunkfilesdna||[]).push([[4834,4885],{60278:(e,a,n)=>{n.d(a,{A:()=>p});var o=n(37734),t=n(13771),l=n(6819),i=n(8187),d=n(99386),s=n(41397),c=n(9950),r=n(44414);const{Option:m,OptGroup:u}=d.A;const p=function(e){const{visible:a,onChange:n=(()=>{}),value:p,vlKey:h="",sProps:x={},contacts:f,setContacts:v=(()=>{}),cLoading:g,placeholder:b=""}=e,j=(0,c.useRef)(null),[y,A]=(0,c.useState)({addContactVis:!1,contacts:[],cLoading:!1});return(0,c.useEffect)((()=>{f&&A((e=>({...e,contacts:f,cLoading:g})))}),[f,g]),(0,c.useEffect)((()=>{a&&async function(e){A((e=>({...e,cLoading:!e.contacts})));try{const a=await(0,l.Ay)("contact/get-contact",e);a.success?A((e=>({...e,contacts:a.data||[],cLoading:!1}))):A((e=>({...e,cLoading:!1})))}catch(a){A((e=>({...e,cLoading:!1})))}}()}),[a]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d.A,{showSearch:!0,style:{width:"100%"},ref:j,placeholder:(0,r.jsx)(o.A,{id:b||"common.searchNew"}),onSelect:(e,a)=>{e&&"new"===e.toString()?A((e=>({...e,addContactVis:!0}))):n(e,(null===a||void 0===a?void 0:a.obj)||{})},value:p,filterOption:function(e,a){const n=(null===a||void 0===a?void 0:a.obj)||{},o=(null===a||void 0===a?void 0:a.key)||"";if(!(0,s.isEmpty)(n)){const a=n.email?n.email.toLowerCase():"",o=n.name?n.name.toLowerCase():"",t=n.first_name?n.first_name.toLowerCase():"",l=n.last_name?n.last_name.toLowerCase():"";return a.indexOf(e.toLowerCase())>=0||o.indexOf(e.toLowerCase())>=0||t.indexOf(e.toLowerCase())>=0||l.indexOf(e.toLowerCase())>=0}return"new"===o},loading:y.cLoading,...x,children:[(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:()=>A((e=>({...e,addContactVis:!0}))),style:{fontWeight:550,border:"none",cursor:"pointer"},type:"button",children:(0,r.jsx)(o.A,{id:"common.addNew"})})}),(0,r.jsx)(u,{label:"Users",children:y.contacts.map((function(e){const a=(0,i.dS)(e.first_name,e.last_name);return(0,r.jsxs)(m,{value:e[h||"email"],obj:e,label:(0,r.jsx)("p",{style:{fontWeight:550},children:e.name?e.name:a}),children:[(0,r.jsx)("p",{style:{fontWeight:550},children:e.name?e.name:a}),(0,r.jsx)("p",{children:(e.email,e.email)})]},e.id)}))})]}),(0,r.jsx)(t.A,{visible:y.addContactVis,onClose:()=>{A((e=>({...e,addContactVis:!1})))},handleSubmit:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const o={...e,name:(0,i.dS)(e.first_name,e.last_name)},t=[...y.contacts];t.push(o),a&&n(o[h||"email"],o),f?(v(t),A((e=>({...e,addContactVis:!1})))):A((e=>({...e,contacts:t,addContactVis:!1})))},modalData:{title:"user.addUser",selText:"document.makeUser"}})]})}},12197:(e,a,n)=>{n.d(a,{A:()=>j});var o,t=n(9950),l=n(90101),i=n(1203),d=n(18469),s=n(98341),c=n(21270),r=n(37734),m=n(41397),u=n(98581),p=n(57528),h=n(33753),x=n(73053),f=n(1868);const v=(0,x.A)(h.Ay.div(o||(o=(0,p.A)(["\n  & .moveHome {\n    padding: 6px;\n    margin-bottom: 8px;\n    cursor: pointer;\n    transition: all 0.3s;\n\n    &:hover {\n      background-color: #f5f5f5;\n    }\n\n    &.selected {\n      background: ",";\n      color: #fff;\n    }\n\n    & p {\n      font-size: 15px;\n      & .anticon {\n        margin: ",";\n        font-size: 16px;\n      }\n    }\n  }\n\n  & .ant-tree {\n    & .ant-tree-list {\n      & .ant-tree-list-holder-inner {\n        overflow-x: auto;\n\n        & .ant-tree-treenode {\n          & .ant-tree-indent {\n            white-space: initial;\n          }\n        }\n      }\n\n      & .ant-tree-switcher,\n      & .ant-tree-iconEle {\n        height: 34px;\n        line-height: 34px;\n\n        & .anticon {\n          font-size: 13px;\n        }\n      }\n      & .ant-tree-iconEle {\n        & .anticon {\n          font-size: 18px;\n        }\n      }\n      & .ant-tree-node-content-wrapper {\n        min-height: 34px;\n        line-height: 34px;\n\n        & .ant-tree-title {\n          font-size: 15px;\n          font-weight: 500;\n          margin-left: 5px;\n        }\n      }\n    }\n  }\n"])),(0,f.palette)("primary",0),(e=>"rtl"===e["data-rtl"]?"0 25px 0 10px":"0 10px 0 0")));var g=n(44414);const{DirectoryTree:b}=l.A,j=e=>{const{visible:a=!1,onSelect:n=(()=>{}),height:o,selected:l=[],hint:p="",multiple:h=!1}=e,[x,f]=(0,t.useState)({loading:!1,data:[]}),j=(0,s.useSelector)((e=>e.Auth.userData)),y="undefined"!==typeof window?window.innerHeight:800,A=async e=>{if(!Array.isArray(e))return[];const a=e.map((async e=>{const a=e.is_sub?await(async e=>{const a={params:{login:j.email}};return(await d.A.post("".concat(u.A.apiDomain,"/api/attachments/file-sub-directories/").concat(e),a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.result.directories||[]})(e.directory_id):[],n=await A(a);return{title:e.directory_name,key:e.directory_id.toString(),children:n}}));return Promise.all(a)};(0,t.useEffect)((()=>{if(a){const e=async()=>{const e=await(async()=>{const e={params:{login:j.email}};return(await d.A.post("".concat(u.A.apiDomain,"/api/attachments/file-directories"),e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.result.directories||[]})(),a=await A(e);f({loading:!1,data:a})};f({loading:!0,data:[]}),e()}else n([])}),[a]);return(0,g.jsxs)(v,{children:[p&&(0,g.jsx)("p",{className:"mb20",children:(0,g.jsx)(r.A,{id:p})}),x.loading||(0,m.isEmpty)(x.data)?(0,g.jsx)(i.A,{description:(0,g.jsx)(r.A,{id:"documents.noDir"})}):(0,g.jsx)(c.A,{style:{height:o||y-Math.round(y/1.5)},children:(0,g.jsx)(b,{height:o,treeData:x.data,onSelect:e=>{const a=(0,m.isEqual)(e,l)?[]:e;n(a)},selectedKeys:l,multiple:h})})]})}},91141:(e,a,n)=>{n.d(a,{A:()=>d});var o=n(9950),t=n(67414),l=n(17420),i=n(44414);const d=function(e){const{id:a,index:n,moveList:d,children:s,style:c={},draggingStyle:r={},onClick:m={}}=e,u=(0,o.useRef)(null),[{isOver:p,dropClassName:h},x]=(0,t.H)({accept:"card",hover(e,a){var o;if(!u.current)return;const t=e.index,l=n;if(t===l)return;const i=null===(o=u.current)||void 0===o?void 0:o.getBoundingClientRect(),s=(i.bottom-i.top)/2,c=a.getClientOffset().y-i.top;t<l&&c<s||t>l&&c>s||(d(t,l),e.index=l)},collect:e=>{const{index:a}=e.getItem()||{};return a===n?{}:{isOver:e.isOver(),dropClassName:a<n?" drop-over-downward":" drop-over-upward"}}}),[{isDragging:f},v]=(0,l.i)({item:{type:"card",id:a,index:n},collect:e=>({isDragging:e.isDragging()})}),g=f?0:1;return v(x(u)),(0,i.jsx)("div",{ref:u,className:"".concat(p?h:""),style:{opacity:g,cursor:"move",...c,...f&&{...r}},onClick:m,id:a,children:s})}},94885:(e,a,n)=>{n.d(a,{A:()=>y});var o,t=n(99386),l=n(73053),i=n(57528),d=n(33753),s=n(1868),c=n(85908);const r=(m=t.A,(0,d.Ay)(m)(o||(o=(0,i.A)(["\n  &.ant-select {\n    box-sizing: border-box;\n    display: inline-block;\n    // position: relative;\n    // color: ",";\n    // font-size: 13px;\n\n    .ant-select-selection {\n      background-color: #fff;\n      border-radius: 4px;\n      border: 1px solid ",";\n      ",";\n\n      &.ant-select-selection--single {\n        height: 35px;\n        position: relative;\n        cursor: pointer;\n      }\n\n      .ant-select-selection__rendered {\n        margin-left: 10px;\n        margin-right: 10px;\n        line-height: 33px;\n\n        .ant-select-selection-selected-value {\n          float: ",";\n          padding: ",";\n        }\n      }\n\n      .ant-select-arrow {\n        right: ",";\n        left: ",";\n      }\n\n      &:hover {\n        border-color: ",";\n      }\n    }\n\n    &.ant-select-focused {\n      .ant-select-selection {\n        &:focus,\n        &:active {\n          border-color: ",";\n          outline: 0;\n          box-shadow: 0 0 0 2px ",";\n        }\n      }\n    }\n\n    &.ant-select-open {\n      .ant-select-selection {\n        border-color: ",";\n        outline: 0;\n        box-shadow: 0 0 0 2px ",";\n      }\n    }\n\n    .ant-select-selection--multiple > ul > li,\n    .ant-select-selection--multiple .ant-select-selection__rendered > ul > li {\n      margin-top: 4px;\n      height: 26px;\n      line-height: 26px;\n    }\n\n    .ant-select-selection--multiple .ant-select-selection__choice {\n      background-color: ",";\n      color: ",";\n    }\n\n    .ant-select-tree li a {\n      font-size: 13px;\n      color: ",";\n    }\n  }\n"])),(0,s.palette)("text",1),(0,s.palette)("border",0),(0,c.kY)(),(e=>"rtl"===e["data-rtl"]?"right":"left"),(e=>"rtl"===e["data-rtl"]?"0 0 0 14px":"0 14px 0 0"),(e=>"rtl"===e["data-rtl"]?"inherit":"7px"),(e=>"rtl"===e["data-rtl"]?"7px":"inherit"),(0,s.palette)("primary",0),(0,s.palette)("primary",0),(0,s.palette)("primary",3),(0,s.palette)("primary",0),(0,s.palette)("primary",3),(0,s.palette)("grayscale",4),(0,s.palette)("text",1),(0,s.palette)("text",1)));var m;const u=(0,l.A)(r),p=t.A.Option,h=u;var x,f=n(41397),v=n(98341),g=n(51679);const b=(0,l.A)(d.Ay.div(x||(x=(0,i.A)(["\n  min-width: 200px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  & .name {\n    flex: 1;\n    margin-left: 7px;\n    text-align: left;\n  }\n  & .code {\n    font-weight: bold;\n    padding-left: 8px;\n  }\n  & .dialCode {\n    padding-left: 8px;\n    vertical-align: middle;\n  }\n"]))));var j=n(44414);function y(e){const{dropDownCustom:a,valType:n,allCountries:o,values:t,userVerification:l=!1,keyType:i="",...d}=e,s=(0,v.useSelector)((e=>e.App.commonData)),c=(0,f.isObject)(s)&&(0,f.isArray)(s.countries)?s.countries:[],r=(0,f.isObject)(s)&&s.loading,m=o?g:c,u=i||n;return(0,j.jsx)(h,{dropdownMatchSelectWidth:!1,dropdownClassName:"countryDropdown",loading:r,optionLabelProp:l?"label":"children",style:{width:l?100:"100%"},...d,children:m.map((e=>(0,j.jsx)(p,{countrycode:e.code,countryname:e.name,value:e[n],obj:e,label:(0,j.jsxs)(b,{children:[(0,j.jsx)("span",{className:"flag flag-".concat(e.code.toLowerCase())}),(0,j.jsx)("span",{className:"dialCode",children:e.dial_code})]}),children:o?(0,j.jsxs)(b,{children:[(0,j.jsx)("span",{className:"flag flag-".concat(e.code.toLowerCase())}),(0,j.jsx)("span",{className:"name",children:e.name}),(0,j.jsx)("span",{className:"code",children:a?e.code:e.dial_code})]}):e.name},e[u])))})}},48755:(e,a,n)=>{n.d(a,{A:()=>f});var o,t,l,i=n(57528),d=n(33753),s=n(1868);const c=d.Ay.h3(o||(o=(0,i.A)(["\n  font-size: 17px;\n  font-weight: 500;\n  color: ",";\n  margin: 0;\n  margin-bottom: 5px;\n"])),(0,s.palette)("secondary",0)),r=d.Ay.p(t||(t=(0,i.A)(["\n  font-size: 14px;\n  font-weight: 400;\n  color: ",";\n  line-height: 24px;\n"])),(0,s.palette)("text",3)),m=d.Ay.div(l||(l=(0,i.A)(["\n  display: flex;\n\n  & .boxTitleMain {\n    flex: 1;\n  }\n"])));var u,p=n(44414);function h(e){let{title:a,subtitle:n,rightBtns:o}=e;return a?(0,p.jsxs)(m,{className:"boxHeader",children:[(0,p.jsxs)("div",{className:"boxTitleMain",children:[a?(0,p.jsxs)(c,{className:"isoBoxTitle",children:[" ",a," "]}):"",n?(0,p.jsxs)(r,{className:"isoBoxSubTitle",children:[" ",n," "]}):""]}),o]}):null}const x=d.Ay.div(u||(u=(0,i.A)(["\n  width: 100%;\n  height: 100%;\n  background-color: #ffffff;\n  margin: 0 0 30px;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n\n  @media only screen and (max-width: 767px) {\n    padding: 20px;\n    ",";\n  }\n\n  &.half {\n    width: calc(50% - 34px);\n    @media (max-width: 767px) {\n      width: 100%;\n    }\n  }\n"])),"");function f(e){let{className:a,title:n,subtitle:o,children:t,style:l,rightBtns:i}=e;return(0,p.jsxs)(x,{className:"".concat(a||""," isoBoxWrapper"),style:l,children:[(0,p.jsx)(h,{title:n,subtitle:o,rightBtns:i}),t]})}},21270:(e,a,n)=>{n.d(a,{A:()=>l});var o=n(69466),t=n(44414);function l(e){let{id:a,style:n,children:l,className:i,autoHide:d=!0,autoHeight:s,autoHeightMin:c=0,autoHeightMax:r=200,sRef:m,...u}=e;return(0,t.jsx)(o.ur,{ref:m,id:a,className:i,style:n,autoHide:d,autoHideTimeout:1e3,autoHideDuration:200,thumbMinSize:30,universal:!0,autoHeight:s,autoHeightMin:c,autoHeightMax:r,...u,children:l})}},57871:(e,a,n)=>{n.d(a,{D:()=>o});const o={host:n(98581).A.apiDomain,uploadImg:"/upload/image",removeImg:"/remove/image",getForms:"/smartform/index",createForm:"/smartform/create",deleteForm:"/smartform/delete",updateForm:"/smartform/update",getFormData:"/smartform/get-form-data",updateFormData:"/smartform/update-form-data",getSubmissions:"/submission/index",createSubmission:"/submission/create",deleteSubmission:"/submission/delete",getSubmission:"/submission/find",updateSubmission:"/submission/update",getInvites:"/invite/index",createInvite:"/invite/create",exportPdf:"/submission/export/pdf",exportExcel:"/submission/export/excel",exportCsv:"/submission/export/csv"}},99901:(e,a,n)=>{n.d(a,{A:()=>S});var o,t=n(9950),l=n(98341),i=n(52160),d=n(43455),s=n(6819),c=n(57528),r=n(99386),m=n(68265),u=n(24893),p=n(87094),h=n(41988),x=n(41135),f=n(37734),v=n(35676),g=n(41893),b=n(60278),j=n(41397),y=n(33753),A=n(44414);const{Option:C}=r.A;const _=function(e){var a,n;const{visible:o,onClose:i,handleSubmit:d}=e,c=(0,l.useSelector)((e=>e.Auth.userData)),x=(null===c||void 0===c||null===(a=c.plan)||void 0===a||null===(n=a.currentPlan)||void 0===n?void 0:n.name.includes("Business"))||"team"===(null===c||void 0===c?void 0:c.role),[y]=m.A.useForm(),[_,S]=(0,t.useState)(!1),[N,k]=(0,t.useState)({}),[T,E]=(0,t.useState)([]),[I,F]=(0,t.useState)("contact-list"),[B,D]=t.useState(null);(0,v.A)({form:y,visible:o,initVal:{is_selected:!1}}),(0,t.useEffect)((()=>{x&&M(),k({})}),[o]);const M=async()=>{const e=await(0,s.Ay)("contact/get-contact");e.success?E(e.data.map((e=>({...e,members:e.department_member.concat([{name:e.head_name,email:e.email}])})))):(0,g.A)("error",e.message)};return(0,A.jsxs)(w,{title:"Add Workflow User",open:o,okText:(0,A.jsx)(f.A,{id:"common.submit"}),onCancel:_?null:i,onOk:_?null:function(){S(!0),"contact"===I?y.validateFields().then((e=>{d([e.email]),S(!1),i()})):(d("group"===I?N.members.map((e=>e.email)):[B.email]),i(),S(!1))},okButtonProps:{id:"add-user",disabled:"group"===I&&(0,j.isEmpty)(N)||"contact-list"===I&&(0,j.isEmpty)(B)},confirmLoading:_,width:400,children:[x&&(0,A.jsx)(u.Ay.Group,{options:[{label:"Add department",value:"group"},{label:"Select from contact list",value:"contact-list"}],value:I,onChange:e=>{let{target:{value:a}}=e;return F(a)}}),"group"===I&&(0,A.jsx)(p.A,{gutter:6,children:(0,A.jsx)(h.A,{span:24,children:(0,A.jsx)(r.A,{style:{width:"100%",marginTop:"10px"},placeholder:"Select department",onSelect:(e,a)=>k((null===a||void 0===a?void 0:a.obj)||{}),value:null===N||void 0===N?void 0:N.id,onClear:()=>k({}),children:T.map((e=>(0,A.jsxs)(C,{value:e.id,obj:e,label:(0,A.jsx)("p",{style:{fontWeight:550},children:e.name}),children:[(0,A.jsx)("p",{style:{fontWeight:550},children:e.name}),(0,A.jsxs)("p",{children:["(",e.members.length," members)"]})]},e.id)))})})}),"contact-list"===I&&(0,A.jsx)(b.A,{placeholder:"common.searchUser",onChange:(e,a)=>{D(a)},visible:o,sProps:{optionLabelProp:"label",allowClear:!0,dropdownMatchSelectWidth:!1,style:{minWidth:350,marginTop:10},onClear:()=>D({})},usersOnly:!0})]})},w=(0,y.Ay)(x.A)(o||(o=(0,c.A)([""])));const S=function(e){const{email:a,setEmail:n}=e,o=(0,l.useSelector)((e=>e.App.documentId)).split("/").pop(),c=(0,l.useSelector)((e=>e.Auth.userData)),[r,m]=(0,t.useState)(!1),[u,p]=(0,t.useState)([]),h=async()=>{const e=await(0,s.Ay)("workflow/get-workflow-users",{params:{hash_key:o}},"post",{...s.$K,"Content-Type":"application/json"});p([{...c,user_id:c.email}]),e.result.success&&e.result.data&&p((a=>a.concat(e.result.data)))};return(0,t.useEffect)((()=>{u.length<1&&h()}),[]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(i.Ay,{onClick:()=>m(!0),size:"small",style:{float:"right",marginBottom:"10px"},children:"+ Add New"}),(0,A.jsx)(d.A,{style:{width:"100%"},value:a,onSelect:e=>n(e),options:null===u||void 0===u?void 0:u.map((e=>({label:void 0===e.first_name?e.user_id:"".concat(e.first_name," ").concat(e.last_name),value:e.user_id})))}),(0,A.jsx)(_,{visible:r,onClose:()=>m(!1),handleSubmit:async e=>{const a=await(0,s.Ay)("workflow/add-workflow-user",{params:{hash_key:o,ids:e.join(",")}},"post",{...s.$K,"Content-Type":"application/json"});return a.result.success&&h(),a.result}})]})}},9631:(e,a,n)=>{n.r(a),n.d(a,{default:()=>Te});var o=n(9950),t=n(28278),l=n(87094),i=n(41988),d=n(82056),s=n(55902),c=n(23072),r=n(99386),m=n(65059),u=n(32077),p=n(52160),h=n(68902),x=n(66276),f=n(53557),v=n(29595),g=n(37630),b=n(3171),j=n(85668),y=n(6819),A=(n(522),n(41397)),C=n(41893),_=(n(21436),n(12547)),w=n(98341),S=n(62298),N=n(53387),k=n(60686),T=n(36256),E=n(60278),I=n(91141),F=n(41135),B=n(84064),D=n(24893),M=n(16895),O=n(35398),L=n(29796),P=n(10495),z=n(37734),G=n(93347),R=n(11201),V=n(72500),K=n(12197),U=(n(48755),n(99901)),H=n(44414);const{Option:q}=r.A;const Y=function(e){var a,n;let{data:t,isConnectable:l}=e;const{onChange:i,id:d,deleteNode:m,forms:u,quizs:h,templates:x,selectedForms:f}=t,g=(0,w.useSelector)((e=>e.App.templateData)),[b,j]=(0,o.useState)(!1),[Y,X]=(0,o.useState)("form"),[W,J]=(0,o.useState)((0,A.cloneDeep)(t.form)),[Z,Q]=(0,o.useState)(t.email?(0,A.cloneDeep)(t.email):""),[$,ee]=(0,o.useState)((0,A.cloneDeep)(t.form_field)),[ae,ne]=(0,o.useState)((0,A.cloneDeep)(t.notify)),[oe,te]=(0,o.useState)((0,A.cloneDeep)(t.remind)),le=!0,{setTemplateData:ie}=_.A,[de,se]=((0,w.useDispatch)(),(0,o.useState)({roles:t.roles?t.roles:[],workflows:t.workflow?t.workflow:[],action:null===t||void 0===t?void 0:t.action,is_completed:null===t||void 0===t||!t.is_completed||(null===t||void 0===t?void 0:t.is_completed),fileName:null===t||void 0===t?void 0:t.file_name,enableOrder:null===t||void 0===t?void 0:t.enableOrder,folder_id:null===t||void 0===t?void 0:t.folder_id,workflow_forms:t.workflow_forms?t.workflow_forms:[],workflow_templates:t.workflow_templates?t.workflow_templates:[]}));(0,o.useEffect)((()=>{const e=u.filter(((e,a)=>{var n;return null===g||void 0===g||null===(n=g.forms)||void 0===n?void 0:n.includes(e.id)})),a=x.filter(((e,a)=>{var n;return null===g||void 0===g||null===(n=g.forms)||void 0===n?void 0:n.includes("template-".concat(e.id))}));console.log("workflowForms: ",e),console.log("workflowTemplates: ",a),se({...de,workflow_forms:e,workflow_templates:a})}),[g]),(0,o.useEffect)((()=>{var e;null!==W&&void 0!==W&&null!==(e=W.toString())&&void 0!==e&&e.includes("template-")&&(X("template"),(async()=>{const e=await(0,y.Ay)("template/roles?template_id=".concat(W.replaceAll("template-","")));!1!==e.success&&(0!==de.roles.length&&t.form===W||se((a=>({...a,roles:e.data}))))})(),(async()=>{var e;const a=x.filter((e=>e.id.toString()===W.replaceAll("template-","")));if(null!==(e=a[0])&&void 0!==e&&e.hash_url){const e=await(0,y.Ay)("files/get-append-data/".concat(a[0].sha512_hash,"-").concat(a[0].current_time_seconds));!1!==e.success&&t.form!==W&&e.filter((e=>"workflow"===e.type))&&se((a=>({...a,workflows:e.filter((e=>"workflow"===e.type))})))}})())}),[W]);const ce=(0,o.useCallback)(((e,a)=>{const n=de.roles[e],o=(0,A.cloneDeep)(de.roles);o[e].user[o[e].id].order_by=a+1,o.splice(e,1),o.splice(a,0,n);const t=(0,A.map)(o,((e,a)=>{const n={...e};return n.user[o[a].id].order_by=a+1,n}));se((e=>({...e,roles:t})))}),[de.roles]);return(0,H.jsxs)("div",{className:"custom-node",children:["0"!==d&&(0,H.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:l}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("div",{className:"node-icon form-icon",children:(0,H.jsx)(S.A,{})}),(0,H.jsxs)("div",{className:"node-content",children:[(0,H.jsx)("label",{htmlFor:"text",children:(0,H.jsx)(s.A,{value:t.label,onChange:e=>i(d,"label",e.target.value),bordered:!1})}),t.form?(0,H.jsxs)("b",{children:[(0,H.jsx)("small",{children:t.form.toString().includes("template-")?"Template: ":"Form: "}),t.form.toString().includes("template-")?null===(a=x.filter((e=>e.id.toString()===t.form.replaceAll("template-","")))[0])||void 0===a?void 0:a.name:u.filter((e=>e.id===t.form))[0].name]}):(0,H.jsx)(p.Ay,{type:"default",icon:(0,H.jsx)(N.A,{}),size:"small",onClick:()=>j(!0),block:!0,style:{height:"inherit"},children:"Complete Setting"})]})]}),(0,H.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:l}),(0,H.jsxs)("div",{className:"node-menu",children:[(0,H.jsx)(k.A,{style:{color:"blue"},onClick:()=>j(!0)}),"0"!==d&&(0,H.jsx)(T.A,{style:{color:"red"},onClick:e=>m(e,d)})]}),(0,H.jsxs)(F.A,{title:"Source Type",open:b,okText:"OK",onOk:()=>{if(i(d,"form",W),i(d,"email",Z),i(d,"form_field",$),i(d,"notify",ae),i(d,"remind",oe),"template"===Y){if(0===de.roles.length||de.roles.some((e=>!e.user))||!de.action||!de.fileName||!de.folder_id||de.workflows.filter((e=>e.formId)).length!==de.workflows.length)return void(0,C.A)("error","You need to add all relevant informations for template.");i(d,"roles",de.roles),i(d,"workflow",de.workflows),i(d,"is_completed",de.is_completed),i(d,"action",de.action),i(d,"template_id",parseInt(W.replaceAll("template-",""),10)),i(d,"file_name",de.fileName),i(d,"enableOrder",de.enableOrder),i(d,"folder_id",de.folder_id)}j(!1)},onCancel:()=>{j(!1),J((0,A.cloneDeep)(t.form)),Q(t.email?(0,A.cloneDeep)(t.email):"")},cancelText:"Cancel",children:[(0,H.jsxs)(B.A,{vertical:!0,gap:"middle",children:[(0,H.jsx)("h3",{children:"Choose source type:"}),"0"!==d&&(0,H.jsxs)(D.Ay.Group,{defaultValue:"form",onChange:e=>{X(e.target.value)},value:Y,size:"large",children:[(0,H.jsx)(D.Ay.Button,{value:"form",children:"Form"}),(0,H.jsx)(D.Ay.Button,{value:"template",children:"Template"})]}),"form"===Y?(0,H.jsx)(r.A,{showSearch:!0,placeholder:"Select a form",optionFilterProp:"children",value:null!==W&&void 0!==W&&null!==(n=W.toString())&&void 0!==n&&n.includes("template-")?"":W,onChange:e=>J(e),onSearch:e=>console.log(e),filterOption:(e,a)=>{var n;return(null!==(n=null===a||void 0===a?void 0:a.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:[{label:"Forms",options:null===u||void 0===u?void 0:u.map((e=>{var a;return{label:e.name,value:e.id,disabled:null===(a=f())||void 0===a?void 0:a.includes(e.id)}}))}],style:{width:"100%"}}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("h3",{children:"Template"}),(0,H.jsx)(r.A,{showSearch:!0,placeholder:"Select a template",optionFilterProp:"children",value:W,onChange:(e,a)=>{J(e)},onSearch:e=>console.log(e),filterOption:(e,a)=>{var n;return(null!==(n=null===a||void 0===a?void 0:a.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:[{label:"Templates",options:null===x||void 0===x?void 0:x.map((e=>({label:e.name,value:"template-".concat(e.id),template:e.hash_url})))}],style:{width:"100%"}})]})]}),"0"!==d&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(c.A,{}),"form"===Y&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)("h3",{children:["Assignee Email Address ",(0,H.jsx)("br",{}),(0,H.jsx)("small",{children:"You can enter an email or select from contacts."})]}),(0,H.jsx)(U.A,{email:Z,setEmail:Q})]}),"template"===Y&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("h3",{children:"File name"}),(0,H.jsx)(s.A,{value:de.fileName,onChange:e=>se({...de,fileName:e.target.value})}),(0,H.jsx)(c.A,{}),0!==de.roles.length&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)("h3",{className:"mb10",style:{width:"100%"},children:[(0,H.jsx)(z.A,{id:"role.assignPeople"}),(0,H.jsx)(M.A,{size:"small",style:{float:"right"},onChange:function(e){const a=[...de.roles].map(((a,n)=>{const o={...a};return o.user[a.id].order_by=e?n+1:0,o}));se((n=>({...n,roles:a,enableOrder:e})))},checked:de.enableOrder})]}),(0,H.jsx)(R.Q,{backend:V.t2,children:(0,H.jsx)(O.A,{className:"roleAssignList",dataSource:de.roles||[],renderItem:(e,a)=>{var n,o;return de.enableOrder?(0,H.jsx)(I.A,{id:e.name,index:a,style:{cursor:"move"},moveList:ce,children:(0,H.jsxs)(O.A.Item,{style:{border:"0px"},actions:[(0,H.jsx)(E.A,{placeholder:"common.searchUser",setContacts:e=>{se((a=>({...a,contacts:e})))},value:e.user&&e.user[e.id]?e.user[e.id].email:"",onChange:(n,o)=>{const t=[...de.roles];t[a].user={[e.id]:o},se((e=>({...e,roles:t})))},visible:le,sProps:{bordered:!1,optionLabelProp:"label",allowClear:!0,dropdownMatchSelectWidth:!1,style:{minWidth:100}},usersOnly:!0})],children:[(0,H.jsxs)("b",{children:["#",a+1,"\xa0\xa0"]}),(0,H.jsx)(O.A.Item.Meta,{avatar:(0,H.jsx)(L.A,{style:{border:"1px solid rgba(".concat(e.color,", 0.5)"),backgroundColor:"rgba(".concat(e.color,", 0.1)"),color:"rgb(".concat(e.color,")")},children:null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.charAt(0).toUpperCase()}),title:(0,H.jsx)("span",{className:"fw550",children:e.name})})]})},e.name):(0,H.jsx)(O.A.Item,{style:{border:"0px"},actions:[(0,H.jsx)(E.A,{placeholder:"common.searchUser",setContacts:e=>{se((a=>({...a,contacts:e})))},value:e.user&&e.user[e.id]?e.user[e.id].email:"",onChange:(n,o)=>{const t=[...de.roles];t[a].user={[e.id]:o},se((e=>({...e,roles:t})))},visible:le,sProps:{optionLabelProp:"label",allowClear:!0,dropdownMatchSelectWidth:!1,style:{minWidth:100}},usersOnly:!0})],children:(0,H.jsx)(O.A.Item.Meta,{avatar:(0,H.jsx)(L.A,{style:{border:"1px solid rgba(".concat(e.color,", 0.5)"),backgroundColor:"rgba(".concat(e.color,", 0.1)"),color:"rgb(".concat(e.color,")")},children:null===e||void 0===e||null===(o=e.name)||void 0===o?void 0:o.charAt(0).toUpperCase()}),title:(0,H.jsx)("span",{className:"fw550",children:e.name})})})}})})]}),(0,H.jsx)(c.A,{}),0!==de.workflows.length&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(O.A,{className:"roleAssignList",dataSource:de.workflows||[],renderItem:(e,a)=>{var n,o,t;return(0,H.jsx)(O.A.Item,{style:{border:"0px"},actions:[(0,H.jsx)(r.A,{mode:"multiple",style:{float:"right",width:150},placeholder:"Select form",onChange:e=>{const n=[...de.workflows];n[a].formId=e,se({...de,work:n})},value:e.formId?e.formId:"",options:[{label:"Form",options:null===(n=de.workflow_forms)||void 0===n?void 0:n.map((e=>({label:e.name,value:e.id})))},{label:"Template",options:null===(o=de.workflow_templates)||void 0===o?void 0:o.filter((e=>"template-".concat(e.id)!==W)).map((e=>({label:e.name,value:"template-".concat(e.id)})))}]})],children:(0,H.jsx)(O.A.Item.Meta,{avatar:(0,H.jsx)(L.A,{style:{border:"1px solid rgba(".concat(e.role.color,", 0.5)"),backgroundColor:"rgba(".concat(e.role.color,", 0.1)"),color:"rgb(".concat(e.role.color,")")},children:null===e||void 0===e||null===(t=e.type)||void 0===t?void 0:t.charAt(0).toUpperCase()}),title:(0,H.jsxs)("span",{className:"fw550",children:["Workflow - ",a+1]})})})}}),(0,H.jsx)(c.A,{})]}),(0,H.jsxs)("h3",{className:"mb10",style:{width:"100%"},children:[(0,H.jsx)(z.A,{id:"common.action"}),(0,H.jsx)(r.A,{style:{float:"right",minWidth:150},placeholder:(0,H.jsx)(z.A,{id:"common.search.status"}),onChange:e=>se({...de,action:e}),value:de.action,children:G.B6.map((e=>e.disabled?null:(0,H.jsx)(q,{value:e.name,children:e.name},e.name)))})]}),(0,H.jsx)(c.A,{}),(0,H.jsx)(K.A,{dData:{},hint:"documents.folderHint",onSelect:e=>se({...de,folder_id:e}),visible:!0,height:200,selected:de.folder_id}),(0,H.jsx)(c.A,{}),(0,H.jsx)(P.A,{checked:de.is_completed,onChange:e=>se({...de,is_completed:e.target.checked}),children:"Mark as completed"})]})]})]})]})};var X=n(51400);const W=function(e){let{data:a,isConnectable:n}=e;const{onChange:t,id:l,deleteNode:i}=a,d=(0,w.useSelector)((e=>e.Auth.userData)),[r,m]=(0,o.useState)(!1),[u,x]=(0,o.useState)(a.subject||""),[f,g]=(0,o.useState)((0,A.cloneDeep)(a.content)||""),[b,j]=(0,o.useState)(a.senderName?(0,A.cloneDeep)(a.senderName):"".concat(d.first_name," ").concat(d.last_name)),[y,_]=(0,o.useState)((0,A.cloneDeep)(a.recipientEmail)),[S,E]=(0,o.useState)((0,A.cloneDeep)(a.clientEmail)),[I,B]=(0,o.useState)((0,A.cloneDeep)(a.attach)),[D,M]=(0,o.useState)((0,A.cloneDeep)(a.attachFile)),[O,L]=(0,o.useState)(a.senderEmail?(0,A.cloneDeep)(a.senderEmail):d.email),z=[{key:"email-node-1",label:"General",children:(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("h3",{children:"Email Subject"}),(0,H.jsx)(s.A,{value:u,onChange:e=>x(e.target.value)}),(0,H.jsx)(c.A,{}),(0,H.jsx)("h3",{children:"Email Content"}),(0,H.jsx)(s.A.TextArea,{value:f,onChange:e=>g(e.target.value)})]})},{key:"email-node-2",label:"Recipients",children:(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("h3",{children:"Sender Name"}),(0,H.jsx)(s.A,{value:b,onChange:e=>j(e.target.value)}),(0,H.jsx)(c.A,{}),(0,H.jsx)("h3",{style:{marginBottom:"30px"},children:"Recipient Email"}),(0,H.jsx)(P.A,{checked:S,onChange:e=>E(e.target.checked),children:"Client form email"}),!S&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(c.A,{}),(0,H.jsx)(U.A,{email:y,setEmail:_})]})]})}];return(0,H.jsxs)("div",{className:"custom-node",children:[(0,H.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("div",{className:"node-icon email-icon",children:(0,H.jsx)(X.A,{})}),(0,H.jsxs)("div",{className:"node-content",children:[(0,H.jsx)("label",{htmlFor:"text",children:(0,H.jsx)(s.A,{value:a.label,onChange:e=>t(l,"label",e.target.value),bordered:!1})}),a.recipientEmail||a.clientEmail?(0,H.jsx)("b",{children:a.clientEmail?"Client Email":a.recipientEmail}):(0,H.jsx)(p.Ay,{type:"default",icon:(0,H.jsx)(N.A,{}),size:"small",onClick:()=>m(!0),block:!0,children:"Add Recipients"})]})]}),(0,H.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,H.jsxs)("div",{className:"node-menu",children:[(0,H.jsx)(k.A,{style:{color:"blue"},onClick:()=>m(!0)}),(0,H.jsx)(T.A,{style:{color:"red"},onClick:e=>i(e,l)})]}),(0,H.jsxs)(F.A,{title:"Email Properties",open:r,okText:"OK",onOk:()=>{""===u||""===f||""===y&&!S||""===O?(0,C.A)("error","You need to add all relevant informations for an email."):(t(l,"subject",u),t(l,"content",f),t(l,"senderName",b),t(l,"recipientEmail",y),t(l,"clientEmail",S),t(l,"attach",I),t(l,"attachFile",D),t(l,"senderEmail",O),m(!1))},onCancel:()=>m(!1),cancelText:"Cancel",children:[(0,H.jsx)(h.A,{items:z}),(0,H.jsx)(c.A,{})]})]})};var J=n(24513);const Z=function(e){let{data:a,isConnectable:n}=e;const{onChange:o,id:t,deleteNode:l}=a;return(0,H.jsxs)("div",{className:"custom-node",children:[(0,H.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("div",{className:"node-icon approve-sign-icon",children:(0,H.jsx)(J.A,{})}),(0,H.jsxs)("div",{className:"node-content",children:[(0,H.jsx)("label",{htmlFor:"text",children:(0,H.jsx)(s.A,{value:a.label,onChange:e=>o(t,"label",e.target.value),bordered:!1})}),a.approvers?(0,H.jsx)("b",{children:a.approvers.length>1?"".concat(a.approvers.length," Approvers"):a.approvers[0]}):(0,H.jsx)(p.Ay,{type:"default",icon:(0,H.jsx)(N.A,{}),size:"small",block:!0,children:"Add Signer Email"})]})]}),(0,H.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,H.jsx)("div",{className:"node-menu",children:(0,H.jsx)(T.A,{style:{color:"red"},onClick:e=>l(e,t)})})]})};var Q=n(44806);const $=function(e){let{data:a,isConnectable:n}=e;const{onChange:o,id:t,deleteNode:l}=a;return(0,H.jsxs)("div",{className:"custom-node",children:[(0,H.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("div",{className:"node-icon approval-icon",children:(0,H.jsx)(Q.A,{})}),(0,H.jsxs)("div",{className:"node-content",children:[(0,H.jsx)("label",{htmlFor:"text",children:(0,H.jsx)(s.A,{value:a.label,onChange:e=>o(t,"label",e.target.value),bordered:!1})}),a.approvers?(0,H.jsx)("b",{children:a.approvers.length>1?"".concat(a.approvers.length," Approvers"):a.approvers[0]}):(0,H.jsx)(p.Ay,{type:"default",icon:(0,H.jsx)(N.A,{}),size:"small",block:!0,children:"Complete Setting"})]})]}),(0,H.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,H.jsx)("div",{className:"node-menu",children:(0,H.jsx)(T.A,{style:{color:"red"},onClick:e=>l(e,t)})})]})};var ee=n(60974);const ae=function(e){let{data:a,isConnectable:n}=e;const{onChange:o,id:t,deleteNode:l}=a;return(0,H.jsxs)("div",{className:"custom-node",children:[(0,H.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("div",{className:"node-icon team-approval-icon",children:(0,H.jsx)(ee.A,{})}),(0,H.jsxs)("div",{className:"node-content",children:[(0,H.jsx)("label",{htmlFor:"text",children:(0,H.jsx)(s.A,{value:a.label,onChange:e=>o(t,"label",e.target.value),bordered:!1})}),a.team?(0,H.jsx)("b",{children:a.team}):(0,H.jsx)(p.Ay,{type:"default",icon:(0,H.jsx)(N.A,{}),size:"small",block:!0,children:"Add Team"})]})]}),(0,H.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,H.jsx)("div",{className:"node-menu",children:(0,H.jsx)(T.A,{style:{color:"red"},onClick:e=>l(e,t)})})]})};var ne=n(8203);const oe=function(e){let{data:a,isConnectable:n}=e;const{onChange:o,id:t,deleteNode:l}=a;return(0,H.jsxs)("div",{className:"custom-node",children:[(0,H.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("div",{className:"node-icon approval-report-icon",children:(0,H.jsx)(ne.A,{})}),(0,H.jsxs)("div",{className:"node-content",children:[(0,H.jsx)("label",{htmlFor:"text",children:(0,H.jsx)(s.A,{value:a.label,onChange:e=>o(t,"label",e.target.value),bordered:!1})}),a.recipientEmail?(0,H.jsx)("b",{children:a.recipientEmail}):(0,H.jsx)(p.Ay,{type:"default",icon:(0,H.jsx)(N.A,{}),size:"small",block:!0,children:"Complete Setting"})]})]}),(0,H.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,H.jsx)("div",{className:"node-menu",children:(0,H.jsx)(T.A,{style:{color:"red"},onClick:e=>l(e,t)})})]})};var te=n(42025);const le=function(e){let{data:a,isConnectable:n}=e;const{onChange:t,id:l,deleteNode:i}=a,[d,m]=(0,o.useState)(!1),[u,x]=(0,o.useState)(a.email?(0,A.cloneDeep)(a.email):""),[f,g]=(0,o.useState)((0,A.cloneDeep)(a.pdf)),[b,j]=(0,o.useState)((0,A.cloneDeep)(a.form_field)),[y,C]=(0,o.useState)((0,A.cloneDeep)(a.notify)),[_,w]=(0,o.useState)((0,A.cloneDeep)(a.password)),S=[{key:"form-node-1",label:"General",children:(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("h3",{children:"Recipient Email Address"}),(0,H.jsx)(s.A,{value:u,onChange:e=>x(e.target.value)}),(0,H.jsx)(c.A,{}),(0,H.jsx)("h3",{children:"Select PDF"}),(0,H.jsx)(r.A,{style:{width:"100%"},value:f,options:[{label:"pdf1",value:"pdf1"},{label:"pdf2",value:"pdf2"},{label:"pdf3",value:"pdf3"}],onChange:e=>g(e)})]})},{key:"form-node-2",label:"Advanced",children:(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsxs)("div",{children:[(0,H.jsx)("h3",{children:"User Notification Email"}),(0,H.jsx)("p",{children:"Send custom email to the assignee."})]}),(0,H.jsx)(M.A,{checked:y,onChange:e=>C(e)})]}),(0,H.jsx)(c.A,{}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("div",{children:(0,H.jsx)("h3",{children:"Enable password protection for submission PDF documents."})}),(0,H.jsx)(M.A,{checked:_,onChange:e=>w(e)})]}),_&&(0,H.jsx)(s.A,{value:_,onChange:e=>w(e.target.value)})]})}];return(0,H.jsxs)("div",{className:"custom-node",children:[(0,H.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("div",{className:"node-icon pdf-icon",children:(0,H.jsx)(te.A,{})}),(0,H.jsxs)("div",{className:"node-content",children:[(0,H.jsx)("label",{htmlFor:"text",children:(0,H.jsx)(s.A,{value:a.label,onChange:e=>t(l,"label",e.target.value),bordered:!1})}),a.pdf?(0,H.jsx)("b",{children:a.pdf}):(0,H.jsx)(p.Ay,{type:"default",icon:(0,H.jsx)(N.A,{}),size:"small",onClick:()=>m(!0),block:!0,children:"Complete Setting"})]})]}),(0,H.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,H.jsxs)("div",{className:"node-menu",children:[(0,H.jsx)(k.A,{style:{color:"blue"},onClick:()=>m(!0)}),(0,H.jsx)(T.A,{style:{color:"red"},onClick:e=>i(e,l)})]}),(0,H.jsxs)(F.A,{title:"Form Properties",open:d,okText:"OK",onOk:()=>{t(l,"email",u),t(l,"pdf",f),t(l,"form_field",b),t(l,"notify",y),t(l,"password",_),m(!1)},onCancel:()=>m(!1),cancelText:"Cancel",children:[(0,H.jsx)(h.A,{items:S}),(0,H.jsx)(c.A,{})]})]})};var ie=n(19841);const de=function(e){let{data:a,isConnectable:n}=e;const{onChange:t,id:l,deleteNode:i}=a,[d,m]=(0,o.useState)(!1),[u,h]=(0,o.useState)(a.document);return(0,H.jsxs)("div",{className:"custom-node",children:[(0,H.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("div",{className:"node-icon sign-document-icon",children:(0,H.jsx)(ie.A,{})}),(0,H.jsxs)("div",{className:"node-content",children:[(0,H.jsx)("label",{htmlFor:"text",children:(0,H.jsx)(s.A,{value:a.label,onChange:e=>t(l,"label",e.target.value),bordered:!1})}),a.document?(0,H.jsx)("b",{children:a.document}):(0,H.jsx)(p.Ay,{type:"default",icon:(0,H.jsx)(N.A,{}),size:"small",onClick:()=>m(!0),block:!0,children:"Complete Setting"})]})]}),(0,H.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,H.jsxs)("div",{className:"node-menu",children:[(0,H.jsx)(k.A,{style:{color:"blue"},onClick:()=>m(!0)}),(0,H.jsx)(T.A,{style:{color:"red"},onClick:e=>i(e,l)})]}),(0,H.jsxs)(F.A,{title:"Sign Document Properties",open:d,okText:"OK",onOk:()=>{t(l,"document",u),m(!1)},onCancel:()=>m(!1),cancelText:"Cancel",children:[(0,H.jsx)("h3",{children:"Select Document"}),(0,H.jsx)(r.A,{value:u,options:[{label:"Document1",value:"doc1"},{label:"Document2",value:"doc2"},{label:"Document3",value:"doc3"}],onChange:e=>h(e),style:{width:"100%"}}),(0,H.jsx)(c.A,{})]})]})};var se=n(22748),ce=n(60716),re=n(57560),me=n(57871),ue=n(18469);const pe=function(e){var a;let{data:n,isConnectable:t}=e;const{onChange:l,id:i,deleteNode:d,forms:m,quizs:u,selectedForms:h}=n,[x,f]=(0,o.useState)(!1),[g,b]=(0,o.useState)(!1),[j,_]=(0,o.useState)(n.conditions?(0,A.cloneDeep)(n.conditions):[]),[w,S]=(0,o.useState)(n.combine?(0,A.cloneDeep)(n.combine):"all"),[E,I]=(0,o.useState)({}),[B,D]=(0,o.useState)([]);let M;if(E.if){const[e,a]=E.if.split("-"),n=B.find((a=>"".concat(a.form_id)===e));n&&(M=n.fields.find((e=>"".concat(e.id)===a)))}async function L(){const e=h();for(let a=0;a<e.length;a++){const n=e[a]?e[a].toString().includes("quiz-"):null,o=n?u.filter((n=>n.id.toString()===e[a].replaceAll("quiz-","")))[0]:m.filter((n=>n.id===e[a]))[0];if(o&&"undefined"!==o){const e={headers:{Accept:"application/json","Content-Type":"application/json","Cache-Control":"no-cache"}};let a=n?await(0,y.Ay)("quiz/get-quiz-data",{hash:o.hash}):await ue.A.get("".concat(me.D.host).concat(me.D.getFormData,"?hash=").concat(o.hash),e);a=n?a:a.data,D((e=>e.concat({form:o.name,form_id:o.id,fields:a.data.form.filter((e=>["shortText","longText","time","datePicker","fullname","customElement","email","number","phone","dropdown","singleChoice","multipleChoice","starRating","scaleRating","rangeNumber","imageSelect"].includes(e.type)))})))}}}(0,o.useEffect)((()=>{B.length<1&&L()}),[]);const P=e=>B.filter((a=>a.form_id.toString()===e.split("-")[0]))[0].fields.filter((a=>a.id.toString()===e.split("-")[1]))[0];return(0,H.jsxs)("div",{className:"custom-node",children:[(0,H.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:t}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("div",{className:"node-icon if-icon",children:(0,H.jsx)(ce.A,{})}),(0,H.jsxs)("div",{className:"node-content",children:[(0,H.jsx)("label",{htmlFor:"text",children:(0,H.jsx)(s.A,{value:n.label,onChange:e=>l(i,"label",e.target.value),bordered:!1})}),(null===(a=n.conditions)||void 0===a?void 0:a.length)>0?(0,H.jsxs)("b",{children:[n.conditions.length," Condition(s)"]}):(0,H.jsx)(p.Ay,{type:"default",icon:(0,H.jsx)(N.A,{}),size:"small",onClick:()=>b(!0),block:!0,children:"Add conditions"})]})]}),(0,H.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:t}),(0,H.jsxs)("div",{className:"node-menu",children:[(0,H.jsx)(k.A,{style:{color:"blue"},onClick:()=>b(!0)}),(0,H.jsx)(T.A,{style:{color:"red"},onClick:e=>d(e,i)})]}),(0,H.jsxs)(F.A,{title:"If/Else Condition Properties",open:g,okText:"OK",onOk:()=>{l(i,"conditions",j),l(i,"combine",w),b(!1)},onCancel:()=>b(!1),cancelText:"Cancel",children:[(0,H.jsx)("h3",{children:(0,H.jsx)("b",{children:"Set Conditions"})}),(0,H.jsx)("p",{children:"If/Else conditions direct your flow based on whether the conditions you define are met."}),(0,H.jsx)(p.Ay,{size:"small",style:{float:"right",marginTop:"-10px"},onClick:async()=>{B.length<1&&L(),I({}),f(!0)},children:"+ Add new condition"}),(0,H.jsx)(c.A,{}),(0,H.jsx)(O.A,{itemLayout:"horizontal",dataSource:j,renderItem:e=>{const[a,n]=e.if.split("-"),o=B.find((e=>"".concat(e.form_id)===a)),t=null===o||void 0===o?void 0:o.fields.find((e=>"".concat(e.id)===n));return(0,H.jsx)(O.A.Item,{children:(0,H.jsx)(O.A.Item.Meta,{title:(0,H.jsxs)("div",{className:"condition-block",children:[(0,H.jsx)("div",{style:{float:"right"},children:(0,H.jsx)(se.A,{placement:"bottomRight",title:"Delete Condition",children:(0,H.jsx)(re.A,{style:{color:"red"},onClick:()=>_(j.filter((a=>a.no!==e.no)))})})}),(0,H.jsx)(c.A,{}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"If"}),(0,H.jsx)(r.A,{value:e.if,options:null===B||void 0===B?void 0:B.map((e=>{var a;return{label:e.form,options:null===(a=e.fields)||void 0===a?void 0:a.map((a=>({label:a.label,value:"".concat(e.form_id,"-").concat(a.id)})))}})),onChange:a=>_(j.map((n=>n.no===e.no?{...n,if:a}:n)))})]}),e.if&&t&&"customElement"===t.type&&(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"Field Options"}),(0,H.jsx)(r.A,{value:e.customFieldOption,onChange:a=>_(j.map((n=>n.no===e.no?{...n,customFieldOption:a}:n))),options:Object.keys(t).filter((e=>e.startsWith("placeholder")&&t[e])).map((e=>({label:t[e],value:e})))})]}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"State"}),(0,H.jsx)(r.A,{value:e.state,options:[{label:"Is Equal To",value:"equal"},{label:"Is Not Equal To",value:"not-equal"},{label:"Is Empty",value:"empty"},{label:"Is Filled",value:"filled"},{label:"Less Than",value:"less"},{label:"Greater Than",value:"greater"},{label:"Contains",value:"contain"}],onChange:a=>_(j.map((n=>n.no===e.no?{...n,state:a}:n))),disabled:!e.if})]}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"Target"}),(0,H.jsx)(r.A,{value:e.target,options:[{label:"Value",value:"value"},{label:"Another Field",value:"another-field"}],onChange:a=>_(j.map((n=>n.no===e.no?{...n,target:a}:n))),disabled:!e.if||!e.state||["filled","empty"].includes(e.state)})]}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"value"===e.target?"Value":"Field"}),"value"===e.target?["dropdown","singleChoice","multipleChoice"].includes(P(e.if).type)?(0,H.jsx)(r.A,{options:P(e.if).options.split("\n").map((e=>({value:e,label:e}))),value:e.value,onChange:a=>_(j.map((n=>n.no===e.no?{...n,value:a}:n))),disabled:!e.if||!e.state||["filled","empty"].includes(e.state)||!e.target,mode:"multipleChoice"===P(e.if).type?"multiple":"-"}):(0,H.jsx)(s.A,{value:e.value,onChange:a=>_(j.map((n=>n.no===e.no?{...n,value:a.target.value}:n))),disabled:!e.if||!e.state||["filled","empty"].includes(e.state)||!e.target}):(0,H.jsx)(r.A,{value:e.field,options:null===B||void 0===B?void 0:B.map((e=>{var a;return{label:e.form,options:null===(a=e.fields)||void 0===a?void 0:a.map((a=>({label:a.label,value:"".concat(e.form_id,"-").concat(a.id)})))}})),onChange:a=>_(j.map((n=>n.no===e.no?{...n,field:a}:n))),disabled:!e.if||!e.state||["filled","empty"].includes(e.state)||!e.target})]})]})})})}}),j.length>1&&(0,H.jsxs)("div",{className:"rule-match",children:["IF","  ",(0,H.jsx)(r.A,{style:{width:"100px"},value:w,defaultValue:"all",onChange:e=>S(e),options:[{label:"ALL",value:"all"},{label:"ANY",value:"any"}]})," ","OF THE \u201cIF\u201d RULES ARE MATCHED"]}),(0,H.jsx)(c.A,{})]}),(0,H.jsx)(F.A,{title:"New Condition",open:x,okText:"Add Condtion",cancelText:"Cancel",onCancel:()=>f(!1),onOk:()=>{E.if&&E.state&&["empty","filled"].includes(E.state)||E.if&&E.state&&E.target&&(E.value||E.field)?(E.no=0===j.length?1:Math.max(...j.map((e=>e.no)))+1,_(j.concat(E)),I({}),f(!1)):(0,C.A)("error","You need to fill all field for condition.")},children:(0,H.jsxs)("div",{className:"condition-block",children:[(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"If"}),(0,H.jsx)(r.A,{value:E.if,options:null===B||void 0===B?void 0:B.map((e=>{var a;return{label:e.form,options:null===(a=e.fields)||void 0===a?void 0:a.map((a=>({label:a.label,value:"".concat(e.form_id,"-").concat(a.id)})))}})),onChange:e=>I({...E,if:e})})]}),E.if&&M&&"customElement"===M.type&&(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"Field Options"}),(0,H.jsx)(r.A,{value:E.customFieldOption,onChange:e=>I({...E,customFieldOption:e}),options:Object.keys(M).filter((e=>e.startsWith("placeholder")&&M[e])).map((e=>({label:M[e],value:e})))})]}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"State"}),(0,H.jsx)(r.A,{value:E.state,options:[{label:"Is Equal To",value:"equal"},{label:"Is Not Equal To",value:"not-equal"},{label:"Is Empty",value:"empty"},{label:"Is Filled",value:"filled"},{label:"Less Than",value:"less"},{label:"Greater Than",value:"greater"},{label:"Contains",value:"contain"}],onChange:e=>I({...E,state:e}),disabled:!E.if})]}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"Target"}),(0,H.jsx)(r.A,{value:E.target,options:[{label:"Value",value:"value"},{label:"Another Field",value:"another-field"}],onChange:e=>I({...E,target:e}),disabled:!E.if||!E.state||["filled","empty"].includes(E.state)})]}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"value"===E.target?"Value":"Field"}),"value"===E.target?["dropdown","singleChoice","multipleChoice"].includes(P(E.if).type)?(0,H.jsx)(r.A,{options:P(E.if).options.split("\n").map((e=>({value:e,label:e}))),value:E.value,onChange:e=>I({...E,value:e}),disabled:!E.if||!E.state||["filled","empty"].includes(E.state)||!E.target,mode:"multipleChoice"===P(E.if).type?"multiple":"-"}):(0,H.jsx)(s.A,{value:E.value,onChange:e=>I({...E,value:e.target.value}),disabled:!E.if||!E.state||["filled","empty"].includes(E.state)||!E.target}):(0,H.jsx)(r.A,{value:E.field,options:null===B||void 0===B?void 0:B.map((e=>{var a;return{label:e.form,options:null===(a=e.fields)||void 0===a?void 0:a.map((a=>({label:a.label,value:"".concat(e.form_id,"-").concat(a.id)})))}})),onChange:e=>I({...E,field:e}),disabled:!E.if||!E.state||["filled","empty"].includes(E.state)||!E.target})]})]})})]})};var he=n(38900);const xe=function(e){var a;let{data:n,isConnectable:t}=e;const{onChange:l,id:i,deleteNode:d,forms:m,quizs:u,templates:h,selectedForms:f}=n,[g,b]=(0,o.useState)(!1),[j,_]=(0,o.useState)(!1),[w,S]=(0,o.useState)(n.branches?(0,A.cloneDeep)(n.branches):[]),[E,I]=(0,o.useState)(null),[M,L]=(0,o.useState)(null),[P,z]=(0,o.useState)([]),[G,R]=(0,o.useState)("all"),[V,K]=(0,o.useState)({}),[U,q]=(0,o.useState)([]),[Y,X]=(0,o.useState)(n.type?(0,A.cloneDeep)(n.type):"form");async function W(){const e=f();for(let a=0;a<e.length;a++){const n=e[a]?e[a].toString().includes("quiz-"):null,o=n?u.filter((n=>n.id.toString()===e[a].replaceAll("quiz-","")))[0]:m.filter((n=>n.id===e[a]))[0];if(o&&"undefined"!==o){const e={headers:{Accept:"application/json","Content-Type":"application/json","Cache-Control":"no-cache"}};let a=n?await(0,y.Ay)("quiz/get-quiz-data",{hash:o.hash}):await ue.A.get("".concat(me.D.host).concat(me.D.getFormData,"?hash=").concat(o.hash),e);a=n?a:a.data,q((e=>e.concat({form:o.name,form_id:o.id,fields:a.data.form.filter((e=>["shortText","longText","time","datePicker","fullname","email","number","phone","dropdown","singleChoice","multipleChoice","starRating","scaleRating","rangeNumber","imageSelect"].includes(e.type)))})))}}}(0,o.useEffect)((()=>{U.length<1&&W()}),[]);const J=e=>U.filter((a=>a.form_id.toString()===e.split("-")[0]))[0].fields.filter((a=>a.id.toString()===e.split("-")[1]))[0],Z=(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("h3",{children:"Branch List"}),(0,H.jsx)(c.A,{}),(0,H.jsx)(O.A,{itemLayout:"horizontal",dataSource:w,renderItem:e=>{var a;return(0,H.jsx)(O.A.Item,{actions:[(0,H.jsx)(x.A,{style:{color:"blue"},onClick:()=>{I(e.no),L(e.name),z(e.conditions),R(e.combine)}}),(0,H.jsx)(re.A,{style:{color:"red"},onClick:()=>S(w.filter((a=>a.no!==e.no)))})],style:{background:e.color},className:"condition-block",children:(0,H.jsx)(O.A.Item.Meta,{title:(0,H.jsxs)("b",{children:[e.name," ",(0,H.jsx)("small",{children:(0,H.jsxs)("i",{children:[null===(a=e.conditions)||void 0===a?void 0:a.length," condition(s)"]})})]})})})}}),(0,H.jsx)(c.A,{}),(0,H.jsx)(p.Ay,{icon:(0,H.jsx)(N.A,{}),type:"text",onClick:()=>{const e=0===w.length?1:Math.max(...w.map((e=>e.no)))+1;S(w.concat({no:e,conditions:[],combine:null})),z([]),I(e)},children:"Add new branch"})]}),Q=(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("h3",{children:"Branch Name"}),(0,H.jsx)(s.A,{value:M,onChange:e=>L(e.target.value)}),(0,H.jsxs)(B.A,{style:{marginTop:"20px",flexDirection:"column"},children:[(0,H.jsx)("h3",{children:"Source Type"}),(0,H.jsxs)(D.Ay.Group,{defaultValue:"form",onChange:e=>{X(e.target.value),q([])},value:Y,size:"large",children:[(0,H.jsx)(D.Ay.Button,{disabled:0!==P.length&&"template"===Y,value:"form",children:"Form"}),(0,H.jsx)(D.Ay.Button,{disabled:0!==P.length&&"form"===Y,value:"template",children:"Template"})]})]}),(0,H.jsx)(p.Ay,{size:"small",style:{float:"right",margin:"10px 0"},onClick:async()=>{if("form"===Y)U.length<1&&W(),K({}),_(!0);else{const e=f(),a=h.filter(((a,n)=>e.includes("template-".concat(a.id.toString()))));console.log(a),K({}),_(!0),q(a)}},children:"+ Add new condition"}),(0,H.jsx)(c.A,{}),(0,H.jsx)(O.A,{itemLayout:"horizontal",dataSource:P,renderItem:e=>(0,H.jsx)(O.A.Item,{children:(0,H.jsx)(O.A.Item.Meta,{title:(0,H.jsxs)("div",{className:"condition-block",children:[(0,H.jsx)("div",{style:{float:"right"},children:(0,H.jsx)(se.A,{placement:"bottomRight",title:"Delete Condition",children:(0,H.jsx)(re.A,{style:{color:"red"},onClick:()=>z(P.filter((a=>a.no!==e.no)))})})}),(0,H.jsx)(c.A,{}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"If"}),(0,H.jsx)(r.A,{value:e.if,options:null===U||void 0===U?void 0:U.map((e=>{var a;return{label:"form"===Y?e.form:e.name,..."form"!==Y&&{value:"template-".concat(e.id)},..."form"===Y&&{options:null===(a=e.fields)||void 0===a?void 0:a.map((a=>({label:a.label,value:"".concat(e.form_id,"-").concat(a.id)})))}}})),onChange:a=>z(P.map((n=>n.no===e.no?{...n,if:a}:n)))})]}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"State"}),(0,H.jsx)(r.A,{value:e.state,options:"form"===Y?[{label:"Is Equal To",value:"equal"},{label:"Is Not Equal To",value:"not-equal"},{label:"Is Empty",value:"empty"},{label:"Is Filled",value:"filled"},{label:"Less Than",value:"less"},{label:"Greater Than",value:"greater"},{label:"Contains",value:"contain"}]:[{label:"In Process",value:"In Process"},{label:"Completed",value:"Completed"}],onChange:a=>z(P.map((n=>n.no===e.no?{...n,state:a}:n))),disabled:!e.if})]}),"form"===Y&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"Target"}),(0,H.jsx)(r.A,{value:e.target,options:[{label:"Value",value:"value"},{label:"Another Field",value:"another-field"}],onChange:a=>z(P.map((n=>n.no===e.no?{...n,target:a}:n))),disabled:!e.if||!e.state||["filled","empty"].includes(e.state)})]}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"value"===e.target?"Value":"Field"}),"value"===e.target?["dropdown","singleChoice","multipleChoice"].includes(J(e.if).type)?(0,H.jsx)(r.A,{options:J(e.if).options.split("\n").map((e=>({value:e,label:e}))),value:e.value,onChange:a=>z(P.map((n=>n.no===e.no?{...n,value:a}:n))),disabled:!e.if||!e.state||["filled","empty"].includes(e.state)||!e.target,mode:"multipleChoice"===J(e.if).type?"multiple":"-"}):(0,H.jsx)(s.A,{value:e.value,onChange:a=>z(P.map((n=>n.no===e.no?{...n,value:a.target.value}:n))),disabled:!e.if||!e.state||!e.target}):(0,H.jsx)(r.A,{value:e.field,options:null===U||void 0===U?void 0:U.map((e=>{var a;return{label:e.form,options:null===(a=e.fields)||void 0===a?void 0:a.map((a=>({label:a.label,value:"".concat(e.form_id,"-").concat(a.id)})))}})),onChange:a=>z(P.map((n=>n.no===e.no?{...n,field:a}:n))),disabled:!e.if||!e.state||!e.target})]})]})]})})})}),P.length>1&&(0,H.jsxs)("div",{className:"rule-match",children:["IF","  ",(0,H.jsx)(r.A,{style:{width:"100px"},value:G,defaultValue:"all",onChange:e=>R(e),options:[{label:"ALL",value:"all"},{label:"ANY",value:"any"}]})," ","OF THE \u201cIF\u201d RULES ARE MATCHED"]}),(0,H.jsx)(c.A,{})]});return(0,H.jsxs)("div",{className:"custom-node",children:[(0,H.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:t}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("div",{className:"node-icon condition-icon",children:(0,H.jsx)(he.A,{})}),(0,H.jsxs)("div",{className:"node-content",children:[(0,H.jsx)("label",{htmlFor:"text",children:(0,H.jsx)(s.A,{value:n.label,onChange:e=>l(i,"label",e.target.value),bordered:!1})}),(null===(a=n.branches)||void 0===a?void 0:a.length)>0?(0,H.jsxs)("b",{children:[n.branches.length," Branche(s)"]}):(0,H.jsx)(p.Ay,{type:"default",icon:(0,H.jsx)(N.A,{}),size:"small",onClick:()=>b(!0),block:!0,children:"Complete Setting"})]})]}),(0,H.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:t}),(0,H.jsxs)("div",{className:"node-menu",children:[(0,H.jsx)(k.A,{style:{color:"blue"},onClick:()=>b(!0)}),(0,H.jsx)(T.A,{style:{color:"red"},onClick:e=>d(e,i)})]}),(0,H.jsx)(F.A,{title:"Conditional Branch Properties",open:g,okText:"OK",onOk:()=>{if(E){if(console.log(P),!M||""===M||P.length<1)return void(0,C.A)("error","You need to add branch name and at least 1 condition.");S(w.map((e=>e.no===E?{...e,conditions:P,combine:G,name:M}:e)))}else l(i,"branches",w),l(i,"type",Y),b(!1);z([]),K({}),I(null),L(null),R("all")},onCancel:()=>{b(!1),I(null),z([]),K({})},cancelText:"Cancel",children:E?Q:Z}),(0,H.jsx)(F.A,{title:"New Condition",open:j,okText:"Add Condtion",cancelText:"Cancel",onCancel:()=>_(!1),onOk:()=>{V.if&&V.state&&["empty","filled","In Process","Completed"].includes(V.state)||V.if&&V.state&&V.target&&(V.value||V.field)?(V.no=0===P.length?1:Math.max(...P.map((e=>e.no)))+1,z(P.concat(V)),K({}),_(!1)):(0,C.A)("error","You need to fill all field for condition.")},children:(0,H.jsxs)("div",{className:"condition-block",children:[(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"If"}),(0,H.jsx)(r.A,{value:V.if,options:null===U||void 0===U?void 0:U.map((e=>{var a;return{label:"form"===Y?e.form:e.name,..."form"!==Y&&{value:"template-".concat(e.id)},..."form"===Y&&{options:null===(a=e.fields)||void 0===a?void 0:a.map((a=>({label:a.label,value:"".concat(e.form_id,"-").concat(a.id)})))}}})),onChange:e=>K({...V,if:e})})]}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"State"}),(0,H.jsx)(r.A,{value:V.state,options:"form"===Y?[{label:"Is Equal To",value:"equal"},{label:"Is Not Equal To",value:"not-equal"},{label:"Is Empty",value:"empty"},{label:"Is Filled",value:"filled"},{label:"Less Than",value:"less"},{label:"Greater Than",value:"greater"},{label:"Contains",value:"contain"}]:[{label:"In Process",value:"In Process"},{label:"Completed",value:"Completed"}],onChange:e=>K({...V,state:e}),disabled:!V.if})]}),"form"===Y&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"Target"}),(0,H.jsx)(r.A,{value:V.target,options:[{label:"Value",value:"value"},{label:"Another Field",value:"another-field"}],onChange:e=>K({...V,target:e}),disabled:!V.if||!V.state||["filled","empty"].includes(V.state)})]}),(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("h3",{children:"value"===V.target?"Value":"Field"}),"value"===V.target?["dropdown","singleChoice","multipleChoice"].includes(J(V.if).type)?(0,H.jsx)(r.A,{options:J(V.if).options.split("\n").map((e=>({value:e,label:e}))),value:V.value,onChange:e=>K({...V,value:e}),disabled:!V.if||!V.state||["filled","empty"].includes(V.state)||!V.target,mode:"multipleChoice"===J(V.if).type?"multiple":"-"}):(0,H.jsx)(s.A,{value:V.value,onChange:e=>K({...V,value:e.target.value}),disabled:!V.if||!V.state||!V.target}):(0,H.jsx)(r.A,{value:V.field,options:null===U||void 0===U?void 0:U.map((e=>{var a;return{label:e.form,options:null===(a=e.fields)||void 0===a?void 0:a.map((a=>({label:a.label,value:"".concat(e.form_id,"-").concat(a.id)})))}})),onChange:e=>K({...V,field:e}),disabled:!V.if||!V.state||!V.target})]})]})]})})]})};var fe=n(15306);const ve=function(e){let{data:a,isConnectable:n}=e;const{id:o,deleteNode:t}=a;return(0,H.jsxs)("div",{className:"custom-node branch-node",children:[(0,H.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,H.jsxs)("div",{style:{textAlign:"center"},children:[(0,H.jsx)(fe.A,{}),(0,H.jsx)("br",{}),(0,H.jsx)("p",{children:"Split"})]}),(0,H.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,H.jsx)("div",{className:"node-menu",children:(0,H.jsx)(T.A,{style:{color:"red"},onClick:e=>t(e,o)})})]})};var ge=n(31840);const be=function(e){let{data:a,isConnectable:n}=e;const{id:o,deleteNode:t}=a;return(0,H.jsxs)("div",{className:"custom-node branch-node",children:[(0,H.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,H.jsxs)("div",{style:{textAlign:"center"},children:[(0,H.jsx)(ge.A,{}),(0,H.jsx)("br",{}),(0,H.jsx)("p",{children:"ALL"})]}),(0,H.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,H.jsx)("div",{className:"node-menu",children:(0,H.jsx)(T.A,{style:{color:"red"},onClick:e=>t(e,o)})})]})};const je=function(e){let{data:a,isConnectable:n}=e;const{id:o,deleteNode:t}=a;return(0,H.jsxs)("div",{className:"custom-node endflow",children:[(0,H.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,H.jsx)("h4",{children:1===a.endOption?"End":"Terminate"}),(0,H.jsx)("div",{className:"node-menu",children:(0,H.jsx)(T.A,{style:{color:"red"},onClick:e=>t(e,o)})})]})};var ye=n(30767);const Ae=function(e){var a;let{data:n,isConnectable:o}=e;const{getNodes:t,setNodes:l,deleteNode:i,id:d,parent:s,label:c}=n,r=t().filter((e=>e.id===s))[0],u="ifElseCondition"===(null===r||void 0===r?void 0:r.type),p="conditionalBranch"===(null===r||void 0===r?void 0:r.type),h="Select ".concat(u||p?"Branch":"Outcome"),x=c===h?{title:h,color:"gray"}:u?{title:c,color:"YES"===c?"green":"red"}:p?{title:c,color:"Other Option"===c?"green":"cornflowerblue"}:r.data.outcomes.filter((e=>e.title===n.label))[0],f=(e,a,n)=>e.data.label===a?h:e.data.id!==n?e.data.label:a,g=(null===(a=r.data.branches)||void 0===a?void 0:a.length)>0?r.data.branches.map((e=>({title:e.name,color:"cornflowerblue"}))).concat({title:"Other Option",color:"green"}):[],b=(0,H.jsx)("div",{children:(0,H.jsx)(O.A,{itemLayout:"horizontal",dataSource:u?[{title:"YES",color:"green"},{title:"NO",color:"red"}]:p?g:r.data.outcomes,renderItem:e=>(0,H.jsx)(O.A.Item,{className:"outcome-list",style:{background:e.color,cursor:"pointer"},actions:e.title===c?[(0,H.jsx)(ye.A,{})]:[],onClick:()=>{var a;(a=e.title)!==c&&l((e=>e.map((e=>e.data.parent!==s?e:{...e,data:{...e.data,label:f(e,a,d)}}))))},children:(0,H.jsx)(O.A.Item.Meta,{title:e.title})})})});return(0,H.jsxs)("div",{className:"custom-node outcome",style:{backgroundColor:x.color},children:[(0,H.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:o}),(0,H.jsx)(m.A,{content:b,placement:"bottom",title:h,trigger:"hover",children:(0,H.jsx)("h4",{children:c})}),(0,H.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:o}),(0,H.jsx)("div",{className:"node-menu",children:(0,H.jsx)(T.A,{style:{color:"red"},onClick:e=>i(e,d)})})]})};const Ce=function(e){let{data:a,isConnectable:n}=e;const{deleteNode:o,id:t}=a;return(0,H.jsxs)("div",{className:"custom-node empty",children:[(0,H.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,H.jsx)("p",{children:"Add Element Here"}),(0,H.jsx)("div",{className:"node-menu",children:(0,H.jsx)(T.A,{style:{color:"red"},onClick:e=>o(e,t)})})]})},_e=(0,o.lazy)((()=>n.e(9979).then(n.bind(n,29979)))),we=(0,o.lazy)((()=>Promise.all([n.e(1569),n.e(5327),n.e(7984),n.e(7325),n.e(2115)]).then(n.bind(n,82115)))),Se=(0,o.lazy)((()=>n.e(7161).then(n.bind(n,27161)))),Ne={form:Y,email:W,approveSign:Z,approval:$,teamApproval:ae,approvalReport:oe,pdf:le,signDocument:de,ifElseCondition:pe,conditionalBranch:xe,splitBranch:ve,mergeBranch:be,endFlow:je,outcome:Ae,empty:Ce};function ke(){var e,a;const n=(0,w.useSelector)((e=>e.App.documentId)),S=null===n||void 0===n?void 0:n.split("/").pop(),[N,k]=(0,o.useState)(!0),[T,E]=(0,o.useState)(null),[I,F]=(0,o.useState)({}),[B,D]=(0,o.useState)("1"),[M,O]=(0,o.useState)([]),[L,P]=(0,o.useState)([]),[z,G]=(0,o.useState)([]),[R,V]=(0,o.useState)({loading:!1,origin:null}),K=(0,o.useRef)(null),U=(0,o.useRef)(null),{project:q,getIntersectingNodes:Y,getEdges:X,getNodes:W,getNode:J,setViewport:Z}=(0,v.VH)(),Q=(0,w.useSelector)((e=>e.App.templateData)),{setTemplateData:$,changeDocumentId:ee}=_.A,ae=(0,w.useDispatch)(),ne=()=>{var e,a;const n=M.map((e=>{var a,n;return"outcome"===e.type&&["Select Outcome","Select Branch"].includes(e.data.label)?{label:"You need to select outcome in blank outcome node.",key:e.id}:"form"!==e.type||null!==(a=e.data.form)&&void 0!==a&&a.toString().includes("template-")||e.data.form&&("0"===e.id||e.data.form&&e.data.email&&""!==e.data.email)?["approval","approveSign"].includes(e.type)&&(void 0===e.data.approvers||(null===(n=e.data.approvers)||void 0===n?void 0:n.length)<1)?{label:"You need to add at least one approver.",key:e.id}:"teamApproval"!==e.type||void 0!==e.data.team&&e.data.team?"empty"===e.type?{label:"You need to remove an empty element.",key:e.id}:"email"!==e.type||e.data.recipientEmail&&""!==e.data.recipientEmail||e.data.clientEmail?"ifElseCondition"===e.type&&(!e.data.conditions||e.data.conditions.length<1)?{label:"You need to enter at least one condition.",key:e.id}:"conditionalBranch"===e.type&&(!e.data.branches||e.data.branches.length<2&&"form"===e.data.type)?{label:"You need to enter at least 2 branch conditions.",key:e.id}:"conditionalBranch"===e.type&&(!e.data.branches||e.data.branches.length<1&&"template"===e.data.type)?{label:"You need to enter at least 1 branch conditions.",key:e.id}:"approvalReport"!==e.type||e.data.recipientEmail&&""!==e.data.recipientEmail&&e.data.reportName&&""!==e.data.reportName?!["form","endFlow"].includes(e.type)&&L.filter((a=>a.source===e.id)).length<1&&L.filter((a=>a.target===e.id)).length<1||"form"===e.type&&L.filter((a=>a.source===e.id)).length<1||"endFlow"===e.type&&L.filter((a=>a.target===e.id)).length<1?{label:"Every nodes should be connected.",key:e.id}:null:{label:"You need to enter report name and recipient email.",key:e.id}:{label:"You need to enter recipient email.",key:e.id}:{label:"You need to select team.",key:e.id}:{label:"You need to enter form and assign email.",key:e.id}}));return 0===M.filter((e=>"endFlow"===e.type)).length&&n.push({label:"There should be at least 1 EndFlow node.",key:null===(e=(0,A.last)(M))||void 0===e?void 0:e.id}),0===M.filter((e=>"form"===e.type)).length&&n.push({label:"There should be at least 1 Source node.",key:null===(a=(0,A.first)(M))||void 0===a?void 0:a.id}),n.filter((e=>e))},oe=(e,a,n)=>{O((o=>o.map((o=>o.id!==e?o:{...o,data:{...o.data,[a]:n}}))))},te=()=>{const e=W().filter((e=>"form"===e.type));return e.length>0?e.map((e=>e.data.form)):[]},le=(e,a)=>{e.stopPropagation(),O((e=>e.filter((e=>e.id!==a)))),W().filter((e=>"outcome"===e.type&&e.data.parent===a)).forEach((e=>O((a=>a.filter((a=>a.id!==e.id)))))),W().filter((e=>"empty"===e.type&&L.filter((a=>a.target===e.id)).length<1)).forEach((e=>O((a=>a.filter((a=>a.id!==e.id))))));const n=X().filter((e=>e.target===a)).length>0?J(X().filter((e=>e.target===a))[0].source):null;n&&"outcome"===n.type&&O((e=>e.filter((e=>e.id!==n.id)))),E(null)};(0,o.useEffect)((()=>{const e=[{id:"0",type:"form",position:{x:100,y:0},data:{label:"Source",form:null,email:"",form_field:null,notify:!1,remind:!1,onChange:oe,id:"0"}}];O(e),R.origin||async function(){const a=await(0,y.Ay)("workflow/get-details",{hash_key:S||""},"post",{...y.$K,"Content-Type":"application/json"});if(k(!1),a.success&&a.data){const{name:n,status:o,restart:t,id:l}=a.data;F({name:n,status:o,restart:t}),V((e=>({...e,origin:{name:a.data.name,status:a.data.status,restart:a.data.restart,workflow_json:a.data.workflow_json}}))),a.data.workflow_json?(O(a.data.workflow_json.nodes.map((e=>({...e,data:{...e.data,onChange:oe,setNodes:O,getNodes:W,deleteNode:le,forms:a.data.forms,templates:a.data.templates,selectedForms:te}})))),P(a.data.workflow_json.edges)):O(e.map((e=>({...e,data:{...e.data,forms:a.data.forms,templates:a.data.templates,selectedForms:te,setNodes:O,getNodes:W,deleteNode:le}})))),V((e=>({...e,forms:a.data.forms,templates:a.data.templates,status:a.data.status}))),async function(){const e=await(0,y.Ay)("workflow/get-logs",{params:{hash_key:S||""}},"post",{...y.$K,"Content-Type":"application/json"});e.result&&e.result.data?G(e.result.data):console.log(e.result)}()}else document.getElementById("root").setAttribute("data-path","/dashboard/my-workflows"),ae(ee("/dashboard/my-workflows"))}()}),[]);const ie=(0,o.useCallback)((e=>O((a=>(0,v._0)(e,a)))),[O]);(0,o.useEffect)((()=>{const e=setTimeout((()=>{ae($({...Q,forms:te()}))}),1e3);return()=>clearTimeout(e)}),[M]);const de=(0,o.useCallback)((e=>P((a=>(0,v.zW)(e,a)))),[P]),se=(0,o.useCallback)((e=>{const a=W().filter((a=>a.id===e.source))[0],n=W().filter((a=>a.id===e.target))[0];if(["apporval","approveSign","teamApproval","ifElseCondition","conditionalBranch"].includes(a.type)&&"outcome"!==n.type){const e=["ifElseCondition","conditionalBranch"].includes(a.type),o={id:"".concat(n.id,"-outcome"),position:q({x:n.position.x,y:n.position.y}),type:"outcome",data:{id:"".concat(n.id,"-outcome"),label:e?"Select Branch":"Select Outcome",parent:a.id,getNodes:W,setNodes:O,deleteNode:le}};O((e=>e.filter((e=>e.id!==n.id)).concat(o)));const t={...n,position:{x:n.position.x,y:n.position.y+100}};return O((e=>e.concat(t))),P((e=>e.concat({id:"".concat(a.id,"-").concat(n.id,"-outcome"),source:a.id,target:"".concat(n.id,"-outcome")}))),void P((e=>e.concat({id:"".concat(n.id,"-outcome-").concat(n.id),source:"".concat(n.id,"-outcome"),target:n.id})))}(["apporval","approveSign","teamApproval","ifElseCondition","conditionalBranch"].includes(a.type)||"outcome"!==n.type)&&P((a=>(0,v.rN)(e,a)))}),[P]),ce=(0,o.useCallback)(((e,a)=>{let{nodeId:n}=a;U.current=n}),[]),re=(0,o.useCallback)((e=>{if(e.target.classList.contains("react-flow__pane")){const a=new Date,{top:n,left:o}=K.current.getBoundingClientRect(),t="".concat(a.getTime()),l=J(U.current);if(["approval","approveSign","teamApproval","ifElseCondition","conditionalBranch"].includes(l.type)){const a=["ifElseCondition","conditionalBranch"].includes(l.type),i={id:t,position:q({x:e.clientX-o-15,y:e.clientY-n+150}),type:"empty",data:{label:"Add new Element",id:t,deleteNode:le}},d={id:"".concat(t,"-outcome"),position:q({x:e.clientX-o,y:e.clientY-n}),type:"outcome",data:{id:"".concat(t,"-outcome"),label:a?"Select Branch":"Select Outcome",parent:l.id,getNodes:W,setNodes:O,deleteNode:le}};O((e=>e.concat(d))),O((e=>e.concat(i))),P((e=>e.concat({id:"".concat(t,"-outcome-edge"),source:U.current,target:"".concat(t,"-outcome")}))),P((e=>e.concat({id:t,source:"".concat(t,"-outcome"),target:t})))}else{const a={id:t,position:q({x:e.clientX-o,y:e.clientY-n}),type:"empty",data:{label:"Add new Element",id:t,deleteNode:le}};O((e=>e.concat(a))),P((e=>e.concat({id:t,source:U.current,target:t})))}}}),[q]),me=(0,o.useCallback)(((e,a)=>{if(X().filter((e=>e.target===a.id)).length>0)return;const n=Y(a).filter((e=>"empty"===e.type)).map((e=>e.id));O((e=>e.map((e=>({...e,className:n.includes(e.id)?"highlight":""})))))}),[]),ue=(0,o.useCallback)(((e,a)=>{if(X().filter((e=>e.target===a.id)).length>0)return;const n=Y(a).filter((e=>"empty"===e.type));n.length>0&&(O((e=>e.filter((e=>e.id!==n[0].id)).map((e=>e.id!==a.id?e:{...a,position:n[0].position})))),P((e=>e.map((e=>({...e,source:e.source===n[0].id?a.id:e.source,target:e.target===n[0].id?a.id:e.target}))))))}),[]),pe=(0,o.useCallback)((e=>{e.forEach((e=>{["approval","teamApproval","approveSign","conditionalBranch","ifElseCondition"].includes(e.type)&&M.filter((a=>"outcome"===a.type&&a.data.parent===e.id)).forEach((e=>O((a=>a.filter((a=>a.id!==e.id))))))})),E(null)}),[M,L]),he=(0,H.jsxs)(H.Fragment,{children:[!["Published","Completed"].includes(R.status)&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(_e,{nodes:M,setNodes:O,onChange:oe,getNodes:W,deleteNode:le,forms:R.forms,quizs:R.quizs,templates:R.templates,selectedForms:te}),(0,H.jsx)(we,{active:T,setActive:E,onChange:oe})]}),["Completed","Published"].includes(R.status)&&(0,H.jsx)(Se,{logs:z,setViewport:Z,getNodes:W}),(0,H.jsx)("div",{style:{width:"100%",height:"calc( 100vh - 65px)"},ref:K,children:(0,H.jsxs)(v.Gc,{nodes:M,edges:L,defaultEdgeOptions:{type:"smoothstep",markerEnd:{type:v.TG.ArrowClosed}},deleteKeyCode:"Delete",fitViewOptions:{padding:1,maxZoom:1},onNodesChange:ie,onNodeDrag:me,onNodeDragStop:ue,onNodesDelete:pe,onEdgesChange:de,onConnect:se,onNodeClick:(e,a)=>E(a),nodeTypes:Ne,onConnectStart:ce,onConnectEnd:re,elementsSelectable:"Unpublished"===R.status,nodesConnectable:"Unpublished"===R.status,nodesDraggable:"Unpublished"===R.status,fitView:!0,children:[(0,H.jsx)(g.H,{showInteractive:"Unpublished"===R.status}),(0,H.jsx)(b.o,{zoomable:!0,pannable:!0}),(0,H.jsx)(j.V,{variant:"dots",gap:12,size:1})]})})]}),xe=(0,H.jsx)("div",{style:{marginTop:"85px"},children:(0,H.jsxs)(l.A,{children:[(0,H.jsx)(i.A,{md:6}),(0,H.jsxs)(i.A,{md:12,children:[(0,H.jsxs)("div",{className:"flex",style:{margin:"30px"},children:[(0,H.jsx)(x.A,{style:{color:"green",fontSize:"25px",marginRight:"10px !important"}}),(0,H.jsxs)("h3",{children:["Approval Settings",(0,H.jsx)("br",{}),(0,H.jsx)("small",{children:"Change your approval title and status."})]})]}),(0,H.jsxs)(d.A,{style:{padding:"50px 20px"},children:[(0,H.jsxs)("h3",{children:["Approval Flow Title",(0,H.jsx)("br",{}),(0,H.jsx)("small",{children:"Enter a short, descriptive name for this flow."})]}),(0,H.jsx)(s.A,{value:I.name,onChange:e=>F({...I,name:e.target.value}),disabled:"Published"===R.status}),(0,H.jsx)(c.A,{}),(0,H.jsxs)("h3",{children:["Status",(0,H.jsx)("br",{}),(0,H.jsx)("small",{children:"You can enable or disable your flow from status."})]}),(0,H.jsx)(r.A,{options:[{label:"Unpublished",value:"Unpublished"},{label:"Published",value:"Published"}],value:I.status,onChange:e=>{var a;"Published"===e&&(null===(a=ne())||void 0===a?void 0:a.length)>0?(0,C.A)("error","You can't publish this workflow with any errors."):F({...I,status:e})},style:{width:"100%"}})]})]}),(0,H.jsx)(i.A,{md:6})]})}),fe=(0,H.jsx)("h3",{children:"Publish Page"}),ve=(0,H.jsxs)(H.Fragment,{children:[(null===(e=ne())||void 0===e?void 0:e.length)>0&&(0,H.jsx)(m.A,{content:null===(a=ne())||void 0===a?void 0:a.map((e=>(0,H.jsxs)("li",{style:{cursor:"pointer",marginTop:"7px"},onClick:()=>{var a,n,o,t;D("1"),E(M.filter((a=>(null===a||void 0===a?void 0:a.id)===(null===e||void 0===e?void 0:e.key)))[0]);const l=M.filter((a=>(null===a||void 0===a?void 0:a.id)===(null===e||void 0===e?void 0:e.key)))[0];Z({x:-(null===l||void 0===l||null===(a=l.position)||void 0===a?void 0:a.x)-(null===l||void 0===l?void 0:l.width)/2+(null===(n=window)||void 0===n?void 0:n.innerWidth)/2,y:-(null===l||void 0===l||null===(o=l.position)||void 0===o?void 0:o.y)-(null===l||void 0===l?void 0:l.height)+(null===(t=window)||void 0===t?void 0:t.innerHeight)/2,zoom:1},{duration:500})},children:[(0,H.jsx)(f.A,{style:{color:"red",marginRight:"10px"}}),null===e||void 0===e?void 0:e.label]}))),trigger:"click",placement:"bottom",title:(0,H.jsx)("h3",{style:{color:"red",textAlign:"center"},children:"Errors"}),children:(0,H.jsx)(u.A,{count:"\u26a0 ".concat(ne().length," Errors"),style:{marginRight:"10px",cursor:"pointer"},onClick:()=>console.log(ne())})}),(0,H.jsx)(p.Ay,{type:"primary",style:{marginRight:"10px"},onClick:async()=>{var e;if("Published"===I.status&&(null===(e=ne())||void 0===e?void 0:e.length)>0)return void(0,C.A)("error","You need to fix all errors or set status 'Unpublished' before saving.");V((e=>({...e,loading:!0})));(await(0,y.Ay)("workflow/update",{params:{hash_key:S,name:I.name,status:I.status,restart:I.restart,workflow_json:JSON.stringify({nodes:M,edges:L})}},"post",{...y.$K,"Content-Type":"application/json"})).result.success?(document.getElementById("root").setAttribute("data-path","/dashboard/my-workflows"),ae(ee("/dashboard/my-workflows"))):(0,C.A)("error"),V((e=>({...e,loading:!1})))},disabled:(0,A.isEqual)(JSON.stringify({name:I.name,status:I.status,restart:I.restart,workflow_json:{nodes:M,edges:L}}),JSON.stringify(R.origin)),loading:R.loading,children:"Save"})]}),ge=(0,H.jsx)(p.Ay,{style:{marginLeft:"10px"},onClick:()=>{document.getElementById("root").setAttribute("data-path","/dashboard/my-workflows"),ae(ee("/dashboard/my-workflows"))},children:"Back"});return(0,H.jsxs)(o.Suspense,{fallback:(0,H.jsx)(t.A,{}),children:[(0,H.jsx)("style",{children:["Published","Completed"].includes(R.status)&&".custom-node .node-menu{ display: none !important; } .custom-node *{ pointer-events: none !important; }"}),N&&(0,H.jsx)(t.A,{}),!N&&(0,H.jsxs)("div",{className:"workflow-container",children:[(0,H.jsx)(h.A,{tabBarExtraContent:{left:ge,right:ve},activeKey:B,items:[{key:"1",label:"BUILD"},{key:"2",label:"SETTINGS"}],centered:!0,size:"large",onChange:e=>{D(e)}}),"1"===B&&he,"2"===B&&xe,"3"===B&&fe]})]})}const Te=()=>(0,H.jsx)(v.Ln,{children:(0,H.jsx)(ke,{})})},13771:(e,a,n)=>{n.d(a,{A:()=>f});var o=n(41893),t=n(37734),l=n(6819),i=n(35676),d=n(68265),s=n(41135),c=n(87094),r=n(41988),m=n(55902),u=n(9950),p=n(94885),h=n(8187),x=n(44414);const f=function(e){const{visible:a,onClose:n,handleSubmit:f,modalData:v={}}=e,g=v||{},[b]=d.A.useForm(),[j,y]=(0,u.useState)(!1);(0,i.A)({form:b,visible:a,initVal:{is_selected:!1}});const A=(0,x.jsx)(d.A.Item,{name:"country",className:"countryFormItem",style:{marginBottom:0},children:(0,x.jsx)(p.A,{keyType:"code",valType:"dial_code",className:"countryPicker",filterOption:h.Tk,showSearch:!0,dropDownCustom:!1,allCountries:!0,userVerification:!0,optionFilterProp:!0})});return(0,x.jsx)(s.A,{title:(0,x.jsx)(t.A,{id:g.title||"documents.addRecipient"}),open:a,okText:(0,x.jsx)(t.A,{id:"common.submit"}),onCancel:j?null:n,onOk:j?null:function(){b.validateFields().then((e=>{!async function(e){y(!0);try{const a=new FormData;a.append("email",e.email),a.append("first_name",e.first_name),a.append("phone_number",e.phone_number);const n=await(0,l.Ay)("contact/create",a,"POST",void 0,!0);n.success?((0,o.A)("success",n.message),f(e)):(0,o.A)("error",n.message),y(!1)}catch(a){y(!1),(0,o.A)("error")}}(e)}))},okButtonProps:{id:"add-user"},confirmLoading:j,children:(0,x.jsx)(d.A,{form:b,layout:"vertical",children:(0,x.jsxs)(c.A,{gutter:6,children:[(0,x.jsx)(r.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,x.jsx)(t.A,{id:"common.fullName"}),name:"first_name",rules:[{required:!0,message:(0,x.jsx)(t.A,{id:"req.name"})},{max:50,message:(0,x.jsx)(t.A,{id:"err.max.50char"})},{whitespace:!0,message:(0,x.jsx)(t.A,{id:"err.blankSpace"})}],children:(0,x.jsx)(m.A,{})})}),(0,x.jsx)(r.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,x.jsx)(t.A,{id:"antTable.title.email"}),name:"email",rules:[{required:!0,message:(0,x.jsx)(t.A,{id:"req.email"})},{type:"email",message:(0,x.jsx)(t.A,{id:"err.email"})},{max:255,message:(0,x.jsx)(t.A,{id:"err.max.255char"})}],children:(0,x.jsx)(m.A,{})})}),(0,x.jsx)(r.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,x.jsx)(t.A,{id:"common.phoneNo"}),name:"phone_number",rules:[{max:15,message:(0,x.jsx)(t.A,{id:"err.max.15char"})},{whitespace:!0,message:(0,x.jsx)(t.A,{id:"err.blankSpace"})}],children:(0,x.jsx)(m.A,{type:"number",addonBefore:A})})})]})})})}},73053:(e,a,n)=>{n.d(a,{A:()=>t});var o=n(44414);const t=function(e){return function(a){let n="ltr";return"undefined"!==typeof window&&(n=document.getElementsByTagName("html")[0].getAttribute("dir")),(0,o.jsx)(e,{...a,"data-rtl":n})}}},85908:(e,a,n)=>{function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.3;return"\n      -webkit-transition: all ".concat(e,"s cubic-bezier(0.215, 0.61, 0.355, 1);\n      -moz-transition: all ").concat(e,"s cubic-bezier(0.215, 0.61, 0.355, 1);\n      -ms-transition: all ").concat(e,"s cubic-bezier(0.215, 0.61, 0.355, 1);\n      -o-transition: all ").concat(e,"s cubic-bezier(0.215, 0.61, 0.355, 1);\n      transition: all ").concat(e,"s cubic-bezier(0.215, 0.61, 0.355, 1);\n  ")}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"\n      -webkit-border-radius: ".concat(e,";\n      -moz-border-radius: ").concat(e,";\n      -ms-transition: ").concat(e,";\n      -o-border-radius: ").concat(e,";\n      border-radius: ").concat(e,";\n  ")}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"none";return"\n      -webkit-box-shadow: ".concat(e,";\n      -moz-box-shadow: ").concat(e,";\n      box-shadow: ").concat(e,";\n  ")}n.d(a,{MS:()=>l,Vq:()=>t,kY:()=>o})},35676:(e,a,n)=>{n.d(a,{A:()=>l});var o=n(9950),t=n(41397);const l=function(e){let{form:a,visible:n,initVal:l}=e;const i=(0,o.useRef)();(0,o.useEffect)((()=>{i.current=n,n&&(0,t.isObject)(l)&&!(0,t.isEmpty)(l)&&setTimeout((()=>{a.setFieldsValue(l)}),100)}),[n]);const d=i.current;(0,o.useEffect)((()=>{!n&&d&&a.resetFields()}),[n])}},21436:()=>{},51679:e=>{e.exports=JSON.parse('[{"name":"Afghanistan","dial_code":"+93","code":"AF"},{"name":"Aland Islands","dial_code":"+358","code":"AX"},{"name":"Albania","dial_code":"+355","code":"AL"},{"name":"Algeria","dial_code":"+213","code":"DZ"},{"name":"AmericanSamoa","dial_code":"+1684","code":"AS"},{"name":"Andorra","dial_code":"+376","code":"AD"},{"name":"Angola","dial_code":"+244","code":"AO"},{"name":"Anguilla","dial_code":"+1264","code":"AI"},{"name":"Antarctica","dial_code":"+672","code":"AQ"},{"name":"Antigua and Barbuda","dial_code":"+1268","code":"AG"},{"name":"Argentina","dial_code":"+54","code":"AR"},{"name":"Armenia","dial_code":"+374","code":"AM"},{"name":"Aruba","dial_code":"+297","code":"AW"},{"name":"Australia","dial_code":"+61","code":"AU"},{"name":"Austria","dial_code":"+43","code":"AT"},{"name":"Azerbaijan","dial_code":"+994","code":"AZ"},{"name":"Bahamas","dial_code":"+1242","code":"BS"},{"name":"Bahrain","dial_code":"+973","code":"BH"},{"name":"Bangladesh","dial_code":"+880","code":"BD"},{"name":"Barbados","dial_code":"+1246","code":"BB"},{"name":"Belarus","dial_code":"+375","code":"BY"},{"name":"Belgium","dial_code":"+32","code":"BE"},{"name":"Belize","dial_code":"+501","code":"BZ"},{"name":"Benin","dial_code":"+229","code":"BJ"},{"name":"Bermuda","dial_code":"+1441","code":"BM"},{"name":"Bhutan","dial_code":"+975","code":"BT"},{"name":"Bolivia, Plurinational State of bolivia","dial_code":"+591","code":"BO"},{"name":"Bosnia and Herzegovina","dial_code":"+387","code":"BA"},{"name":"Botswana","dial_code":"+267","code":"BW"},{"name":"Brazil","dial_code":"+55","code":"BR"},{"name":"British Indian Ocean Territory","dial_code":"+246","code":"IO"},{"name":"Brunei Darussalam","dial_code":"+673","code":"BN"},{"name":"Bulgaria","dial_code":"+359","code":"BG"},{"name":"Burkina Faso","dial_code":"+226","code":"BF"},{"name":"Burundi","dial_code":"+257","code":"BI"},{"name":"Cambodia","dial_code":"+855","code":"KH"},{"name":"Cameroon","dial_code":"+237","code":"CM"},{"name":"Canada","dial_code":"+1","code":"CA"},{"name":"Cape Verde","dial_code":"+238","code":"CV"},{"name":"Cayman Islands","dial_code":"+ 345","code":"KY"},{"name":"Central African Republic","dial_code":"+236","code":"CF"},{"name":"Chad","dial_code":"+235","code":"TD"},{"name":"Chile","dial_code":"+56","code":"CL"},{"name":"China","dial_code":"+86","code":"CN"},{"name":"Christmas Island","dial_code":"+61","code":"CX"},{"name":"Cocos (Keeling) Islands","dial_code":"+61","code":"CC"},{"name":"Colombia","dial_code":"+57","code":"CO"},{"name":"Comoros","dial_code":"+269","code":"KM"},{"name":"Congo","dial_code":"+242","code":"CG"},{"name":"Congo, The Democratic Republic of the Congo","dial_code":"+243","code":"CD"},{"name":"Cook Islands","dial_code":"+682","code":"CK"},{"name":"Costa Rica","dial_code":"+506","code":"CR"},{"name":"Cote d\'Ivoire","dial_code":"+225","code":"CI"},{"name":"Croatia","dial_code":"+385","code":"HR"},{"name":"Cuba","dial_code":"+53","code":"CU"},{"name":"Cyprus","dial_code":"+357","code":"CY"},{"name":"Czech Republic","dial_code":"+420","code":"CZ"},{"name":"Denmark","dial_code":"+45","code":"DK"},{"name":"Djibouti","dial_code":"+253","code":"DJ"},{"name":"Dominica","dial_code":"+1767","code":"DM"},{"name":"Dominican Republic","dial_code":"+1849","code":"DO"},{"name":"Ecuador","dial_code":"+593","code":"EC"},{"name":"Egypt","dial_code":"+20","code":"EG"},{"name":"El Salvador","dial_code":"+503","code":"SV"},{"name":"Equatorial Guinea","dial_code":"+240","code":"GQ"},{"name":"Eritrea","dial_code":"+291","code":"ER"},{"name":"Estonia","dial_code":"+372","code":"EE"},{"name":"Ethiopia","dial_code":"+251","code":"ET"},{"name":"Falkland Islands (Malvinas)","dial_code":"+500","code":"FK"},{"name":"Faroe Islands","dial_code":"+298","code":"FO"},{"name":"Fiji","dial_code":"+679","code":"FJ"},{"name":"Finland","dial_code":"+358","code":"FI"},{"name":"France","dial_code":"+33","code":"FR"},{"name":"French Guiana","dial_code":"+594","code":"GF"},{"name":"French Polynesia","dial_code":"+689","code":"PF"},{"name":"Gabon","dial_code":"+241","code":"GA"},{"name":"Gambia","dial_code":"+220","code":"GM"},{"name":"Georgia","dial_code":"+995","code":"GE"},{"name":"Germany","dial_code":"+49","code":"DE"},{"name":"Ghana","dial_code":"+233","code":"GH"},{"name":"Gibraltar","dial_code":"+350","code":"GI"},{"name":"Greece","dial_code":"+30","code":"GR"},{"name":"Greenland","dial_code":"+299","code":"GL"},{"name":"Grenada","dial_code":"+1473","code":"GD"},{"name":"Guadeloupe","dial_code":"+590","code":"GP"},{"name":"Guam","dial_code":"+1671","code":"GU"},{"name":"Guatemala","dial_code":"+502","code":"GT"},{"name":"Guernsey","dial_code":"+44","code":"GG"},{"name":"Guinea","dial_code":"+224","code":"GN"},{"name":"Guinea-Bissau","dial_code":"+245","code":"GW"},{"name":"Guyana","dial_code":"+592","code":"GY"},{"name":"Haiti","dial_code":"+509","code":"HT"},{"name":"Holy See (Vatican City State)","dial_code":"+379","code":"VA"},{"name":"Honduras","dial_code":"+504","code":"HN"},{"name":"Hong Kong","dial_code":"+852","code":"HK"},{"name":"Hungary","dial_code":"+36","code":"HU"},{"name":"Iceland","dial_code":"+354","code":"IS"},{"name":"India","dial_code":"+91","code":"IN"},{"name":"Indonesia","dial_code":"+62","code":"ID"},{"name":"Iran, Islamic Republic of Persian Gulf","dial_code":"+98","code":"IR"},{"name":"Iraq","dial_code":"+964","code":"IQ"},{"name":"Ireland","dial_code":"+353","code":"IE"},{"name":"Isle of Man","dial_code":"+44","code":"IM"},{"name":"Israel","dial_code":"+972","code":"IL"},{"name":"Italy","dial_code":"+39","code":"IT"},{"name":"Jamaica","dial_code":"+1876","code":"JM"},{"name":"Japan","dial_code":"+81","code":"JP"},{"name":"Jersey","dial_code":"+44","code":"JE"},{"name":"Jordan","dial_code":"+962","code":"JO"},{"name":"Kazakhstan","dial_code":"+7","code":"KZ"},{"name":"Kenya","dial_code":"+254","code":"KE"},{"name":"Kiribati","dial_code":"+686","code":"KI"},{"name":"Korea, Democratic People\'s Republic of Korea","dial_code":"+850","code":"KP"},{"name":"Korea, Republic of South Korea","dial_code":"+82","code":"KR"},{"name":"Kuwait","dial_code":"+965","code":"KW"},{"name":"Kyrgyzstan","dial_code":"+996","code":"KG"},{"name":"Laos","dial_code":"+856","code":"LA"},{"name":"Latvia","dial_code":"+371","code":"LV"},{"name":"Lebanon","dial_code":"+961","code":"LB"},{"name":"Lesotho","dial_code":"+266","code":"LS"},{"name":"Liberia","dial_code":"+231","code":"LR"},{"name":"Libyan Arab Jamahiriya","dial_code":"+218","code":"LY"},{"name":"Liechtenstein","dial_code":"+423","code":"LI"},{"name":"Lithuania","dial_code":"+370","code":"LT"},{"name":"Luxembourg","dial_code":"+352","code":"LU"},{"name":"Macao","dial_code":"+853","code":"MO"},{"name":"Macedonia","dial_code":"+389","code":"MK"},{"name":"Madagascar","dial_code":"+261","code":"MG"},{"name":"Malawi","dial_code":"+265","code":"MW"},{"name":"Malaysia","dial_code":"+60","code":"MY"},{"name":"Maldives","dial_code":"+960","code":"MV"},{"name":"Mali","dial_code":"+223","code":"ML"},{"name":"Malta","dial_code":"+356","code":"MT"},{"name":"Marshall Islands","dial_code":"+692","code":"MH"},{"name":"Martinique","dial_code":"+596","code":"MQ"},{"name":"Mauritania","dial_code":"+222","code":"MR"},{"name":"Mauritius","dial_code":"+230","code":"MU"},{"name":"Mayotte","dial_code":"+262","code":"YT"},{"name":"Mexico","dial_code":"+52","code":"MX"},{"name":"Micronesia, Federated States of Micronesia","dial_code":"+691","code":"FM"},{"name":"Moldova","dial_code":"+373","code":"MD"},{"name":"Monaco","dial_code":"+377","code":"MC"},{"name":"Mongolia","dial_code":"+976","code":"MN"},{"name":"Montenegro","dial_code":"+382","code":"ME"},{"name":"Montserrat","dial_code":"+1664","code":"MS"},{"name":"Morocco","dial_code":"+212","code":"MA"},{"name":"Mozambique","dial_code":"+258","code":"MZ"},{"name":"Myanmar","dial_code":"+95","code":"MM"},{"name":"Namibia","dial_code":"+264","code":"NA"},{"name":"Nauru","dial_code":"+674","code":"NR"},{"name":"Nepal","dial_code":"+977","code":"NP"},{"name":"Netherlands","dial_code":"+31","code":"NL"},{"name":"Netherlands Antilles","dial_code":"+599","code":"AN"},{"name":"New Caledonia","dial_code":"+687","code":"NC"},{"name":"New Zealand","dial_code":"+64","code":"NZ"},{"name":"Nicaragua","dial_code":"+505","code":"NI"},{"name":"Niger","dial_code":"+227","code":"NE"},{"name":"Nigeria","dial_code":"+234","code":"NG"},{"name":"Niue","dial_code":"+683","code":"NU"},{"name":"Norfolk Island","dial_code":"+672","code":"NF"},{"name":"Northern Mariana Islands","dial_code":"+1670","code":"MP"},{"name":"Norway","dial_code":"+47","code":"NO"},{"name":"Oman","dial_code":"+968","code":"OM"},{"name":"Pakistan","dial_code":"+92","code":"PK"},{"name":"Palau","dial_code":"+680","code":"PW"},{"name":"Palestinian Territory, Occupied","dial_code":"+970","code":"PS"},{"name":"Panama","dial_code":"+507","code":"PA"},{"name":"Papua New Guinea","dial_code":"+675","code":"PG"},{"name":"Paraguay","dial_code":"+595","code":"PY"},{"name":"Peru","dial_code":"+51","code":"PE"},{"name":"Philippines","dial_code":"+63","code":"PH"},{"name":"Pitcairn","dial_code":"+64","code":"PN"},{"name":"Poland","dial_code":"+48","code":"PL"},{"name":"Portugal","dial_code":"+351","code":"PT"},{"name":"Puerto Rico","dial_code":"+1939","code":"PR"},{"name":"Qatar","dial_code":"+974","code":"QA"},{"name":"Romania","dial_code":"+40","code":"RO"},{"name":"Russia","dial_code":"+7","code":"RU"},{"name":"Rwanda","dial_code":"+250","code":"RW"},{"name":"Reunion","dial_code":"+262","code":"RE"},{"name":"Saint Barthelemy","dial_code":"+590","code":"BL"},{"name":"Saint Helena, Ascension and Tristan Da Cunha","dial_code":"+290","code":"SH"},{"name":"Saint Kitts and Nevis","dial_code":"+1869","code":"KN"},{"name":"Saint Lucia","dial_code":"+1758","code":"LC"},{"name":"Saint Martin","dial_code":"+590","code":"MF"},{"name":"Saint Pierre and Miquelon","dial_code":"+508","code":"PM"},{"name":"Saint Vincent and the Grenadines","dial_code":"+1784","code":"VC"},{"name":"Samoa","dial_code":"+685","code":"WS"},{"name":"San Marino","dial_code":"+378","code":"SM"},{"name":"Sao Tome and Principe","dial_code":"+239","code":"ST"},{"name":"Saudi Arabia","dial_code":"+966","code":"SA"},{"name":"Senegal","dial_code":"+221","code":"SN"},{"name":"Serbia","dial_code":"+381","code":"RS"},{"name":"Seychelles","dial_code":"+248","code":"SC"},{"name":"Sierra Leone","dial_code":"+232","code":"SL"},{"name":"Singapore","dial_code":"+65","code":"SG"},{"name":"Slovakia","dial_code":"+421","code":"SK"},{"name":"Slovenia","dial_code":"+386","code":"SI"},{"name":"Solomon Islands","dial_code":"+677","code":"SB"},{"name":"Somalia","dial_code":"+252","code":"SO"},{"name":"South Africa","dial_code":"+27","code":"ZA"},{"name":"South Sudan","dial_code":"+211","code":"SS"},{"name":"South Georgia and the South Sandwich Islands","dial_code":"+500","code":"GS"},{"name":"Spain","dial_code":"+34","code":"ES"},{"name":"Sri Lanka","dial_code":"+94","code":"LK"},{"name":"Sudan","dial_code":"+249","code":"SD"},{"name":"Suriname","dial_code":"+597","code":"SR"},{"name":"Svalbard and Jan Mayen","dial_code":"+47","code":"SJ"},{"name":"Swaziland","dial_code":"+268","code":"SZ"},{"name":"Sweden","dial_code":"+46","code":"SE"},{"name":"Switzerland","dial_code":"+41","code":"CH"},{"name":"Syrian Arab Republic","dial_code":"+963","code":"SY"},{"name":"Taiwan","dial_code":"+886","code":"TW"},{"name":"Tajikistan","dial_code":"+992","code":"TJ"},{"name":"Tanzania, United Republic of Tanzania","dial_code":"+255","code":"TZ"},{"name":"Thailand","dial_code":"+66","code":"TH"},{"name":"Timor-Leste","dial_code":"+670","code":"TL"},{"name":"Togo","dial_code":"+228","code":"TG"},{"name":"Tokelau","dial_code":"+690","code":"TK"},{"name":"Tonga","dial_code":"+676","code":"TO"},{"name":"Trinidad and Tobago","dial_code":"+1868","code":"TT"},{"name":"Tunisia","dial_code":"+216","code":"TN"},{"name":"Turkey","dial_code":"+90","code":"TR"},{"name":"Turkmenistan","dial_code":"+993","code":"TM"},{"name":"Turks and Caicos Islands","dial_code":"+1649","code":"TC"},{"name":"Tuvalu","dial_code":"+688","code":"TV"},{"name":"Uganda","dial_code":"+256","code":"UG"},{"name":"Ukraine","dial_code":"+380","code":"UA"},{"name":"United Arab Emirates","dial_code":"+971","code":"AE"},{"name":"United Kingdom","dial_code":"+44","code":"GB"},{"name":"United States","dial_code":"+1","code":"US"},{"name":"Uruguay","dial_code":"+598","code":"UY"},{"name":"Uzbekistan","dial_code":"+998","code":"UZ"},{"name":"Vanuatu","dial_code":"+678","code":"VU"},{"name":"Venezuela, Bolivarian Republic of Venezuela","dial_code":"+58","code":"VE"},{"name":"Vietnam","dial_code":"+84","code":"VN"},{"name":"Virgin Islands, British","dial_code":"+1284","code":"VG"},{"name":"Virgin Islands, U.S.","dial_code":"+1340","code":"VI"},{"name":"Wallis and Futuna","dial_code":"+681","code":"WF"},{"name":"Yemen","dial_code":"+967","code":"YE"},{"name":"Zambia","dial_code":"+260","code":"ZM"},{"name":"Zimbabwe","dial_code":"+263","code":"ZW"}]')}}]);