"use strict";(self.webpackChunkfilesdna=self.webpackChunkfilesdna||[]).push([[3070],{12197:(n,e,t)=>{t.d(e,{A:()=>j});var o,i=t(9950),a=t(90101),r=t(1203),s=t(18469),c=t(98341),l=t(21270),d=t(37734),p=t(41397),u=t(98581),m=t(57528),f=t(33753),h=t(73053),y=t(1868);const x=(0,h.A)(f.Ay.div(o||(o=(0,m.A)(["\n  & .moveHome {\n    padding: 6px;\n    margin-bottom: 8px;\n    cursor: pointer;\n    transition: all 0.3s;\n\n    &:hover {\n      background-color: #f5f5f5;\n    }\n\n    &.selected {\n      background: ",";\n      color: #fff;\n    }\n\n    & p {\n      font-size: 15px;\n      & .anticon {\n        margin: ",";\n        font-size: 16px;\n      }\n    }\n  }\n\n  & .ant-tree {\n    & .ant-tree-list {\n      & .ant-tree-list-holder-inner {\n        overflow-x: auto;\n\n        & .ant-tree-treenode {\n          & .ant-tree-indent {\n            white-space: initial;\n          }\n        }\n      }\n\n      & .ant-tree-switcher,\n      & .ant-tree-iconEle {\n        height: 34px;\n        line-height: 34px;\n\n        & .anticon {\n          font-size: 13px;\n        }\n      }\n      & .ant-tree-iconEle {\n        & .anticon {\n          font-size: 18px;\n        }\n      }\n      & .ant-tree-node-content-wrapper {\n        min-height: 34px;\n        line-height: 34px;\n\n        & .ant-tree-title {\n          font-size: 15px;\n          font-weight: 500;\n          margin-left: 5px;\n        }\n      }\n    }\n  }\n"])),(0,y.palette)("primary",0),(n=>"rtl"===n["data-rtl"]?"0 25px 0 10px":"0 10px 0 0")));var A=t(44414);const{DirectoryTree:g}=a.A,j=n=>{const{visible:e=!1,onSelect:t=(()=>{}),height:o,selected:a=[],hint:m="",multiple:f=!1}=n,[h,y]=(0,i.useState)({loading:!1,data:[]}),j=(0,c.useSelector)((n=>n.Auth.userData)),w="undefined"!==typeof window?window.innerHeight:800,v=async n=>{if(!Array.isArray(n))return[];const e=n.map((async n=>{const e=n.is_sub?await(async n=>{const e={params:{login:j.email}};return(await s.A.post("".concat(u.A.apiDomain,"/api/attachments/file-sub-directories/").concat(n),e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.result.directories||[]})(n.directory_id):[],t=await v(e);return{title:n.directory_name,key:n.directory_id.toString(),children:t}}));return Promise.all(e)};(0,i.useEffect)((()=>{if(e){const n=async()=>{const n=await(async()=>{const n={params:{login:j.email}};return(await s.A.post("".concat(u.A.apiDomain,"/api/attachments/file-directories"),n,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.result.directories||[]})(),e=await v(n);y({loading:!1,data:e})};y({loading:!0,data:[]}),n()}else t([])}),[e]);return(0,A.jsxs)(x,{children:[m&&(0,A.jsx)("p",{className:"mb20",children:(0,A.jsx)(d.A,{id:m})}),h.loading||(0,p.isEmpty)(h.data)?(0,A.jsx)(r.A,{description:(0,A.jsx)(d.A,{id:"documents.noDir"})}):(0,A.jsx)(l.A,{style:{height:o||w-Math.round(w/1.5)},children:(0,A.jsx)(g,{height:o,treeData:h.data,onSelect:n=>{const e=(0,p.isEqual)(n,a)?[]:n;t(e)},selectedKeys:a,multiple:f})})]})}},13070:(n,e,t)=>{t.r(e),t.d(e,{default:()=>h});var o=t(9950),i=t(72612),a=t(87094),r=t(41988),s=t(41893),c=t(6819),l=t(58769),d=t(37734),p=t(10597),u=t(41397),m=t(12197),f=t(44414);const h=function(n){const{handleSubmit:e=(()=>{}),visible:t=!1,onClose:h=(()=>{}),docId:y="",folderId:x="",type:A="",dData:g={}}=n,j="copy"===A,[w,v]=(0,o.useState)(!1),[S,b]=(0,o.useState)([]),[k,C]=(0,o.useState)(!1);(0,o.useEffect)((()=>{C(t)}),[t]);const D=j?"documents.copyto":"documents.moveto",E=j?"common.copy":"common.move",_=j?"copy-to":"move-to";return(0,f.jsx)(p._H,{children:(0,f.jsx)(l.A,{open:t,onClose:w?null:h,title:(0,f.jsx)(d.A,{id:D}),okText:(0,f.jsx)(d.A,{id:E}),onOk:w?null:function(){let n=!0;S&&!(0,u.isEmpty)(S)||j||(n=!1,(0,s.A)("error","req.folder")),n&&async function(){v(!0);const n=(0,u.isArray)(S)&&!(0,u.isEmpty)(S)?S.toString():"";if(y==(j?n||x:n))return console.log(y,j?n||x:n),(0,s.A)("error","Select other folder"),void v(!1);try{const t=j?"copy-document":"move-document",o=await(0,c.Ay)("file/".concat(t),{document_id:y,folder_id:j?n||x:n,form:"forms"===g.page},"POST");o.success?(v(!1),(0,s.A)("success",o.message),e()):(v(!1),(0,s.A)("error",o.message))}catch(t){v(!1),(0,s.A)("error")}}()},onCancel:w?null:h,confirmLoading:w,okButtonProps:{id:_},children:(0,f.jsx)(i.A,{spinning:w,children:(0,f.jsx)(a.A,{gutter:6,children:(0,f.jsx)(r.A,{span:24,children:(0,f.jsx)(m.A,{docId:y,dData:g,folderId:x||y,visible:k,onSelect:n=>b(n),selected:S,type:A,hint:j?"documents.folderCopyHint":""})})})})})})}}}]);