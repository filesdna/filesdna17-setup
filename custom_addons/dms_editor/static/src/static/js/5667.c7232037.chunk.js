"use strict";(self.webpackChunkfilesdna=self.webpackChunkfilesdna||[]).push([[5667,3072,691],{38048:(t,n,e)=>{e.r(n),e.d(n,{default:()=>K});var a,i,r,o,l=e(44070),c=e(79378),s=e(10597),d=e(58769),p=e(41893),u=e(79796),h=e(19392),g=e(55902),m=e(73053),x=e(57528),f=e(33753),b=e(1868),A=e(85908);const{Search:w,TextArea:j,Group:y,Password:v}=g.A,k=(C=g.A,(0,f.Ay)(C)(a||(a=(0,x.A)(["\n  &.ant-input {\n    padding: 4px 10px;\n    width: 100%;\n    height: 35px;\n    cursor: text;\n    text-align: ",";\n    font-size: 13px;\n    line-height: 1.5;\n    color: ",";\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid ",";\n    ",";\n    ",";\n\n    &:focus {\n      border-color: ",";\n    }\n\n    &.ant-input-lg {\n      height: 42px;\n      padding: 6px 10px;\n    }\n\n    &.ant-input-sm {\n      padding: 1px 10px;\n      height: 30px;\n    }\n\n    &::-webkit-input-placeholder {\n      text-align: ",";\n      color: ",";\n    }\n\n    &:-moz-placeholder {\n      text-align: ",";\n      color: ",";\n    }\n\n    &::-moz-placeholder {\n      text-align: ",";\n      color: ",";\n    }\n    &:-ms-input-placeholder {\n      text-align: ",";\n      color: ",";\n    }\n  }\n"])),(t=>"rtl"===t["data-rtl"]?"right":"left"),(0,b.palette)("text",1),(0,b.palette)("border",1),(0,A.Vq)("4px"),(0,A.kY)(),(0,b.palette)("primary",0),(t=>"rtl"===t["data-rtl"]?"right":"left"),(0,b.palette)("grayscale",0),(t=>"rtl"===t["data-rtl"]?"right":"left"),(0,b.palette)("grayscale",0),(t=>"rtl"===t["data-rtl"]?"right":"left"),(0,b.palette)("grayscale",0),(t=>"rtl"===t["data-rtl"]?"right":"left"),(0,b.palette)("grayscale",0)));var C;(0,m.A)(k);const S=(t=>(0,f.Ay)(t)(i||(i=(0,x.A)(["\n  &.ant-input-group {\n    margin-bottom: 10px;\n\n    .ant-select-auto-complete {\n      margin-right: ",";\n    }\n\n    .ant-input {\n      &:first-child {\n        border-radius: ",";\n      }\n    }\n\n    .ant-input-group-addon:not(:first-child):not(:last-child),\n    .ant-input-group-wrap:not(:first-child):not(:last-child),\n    > .ant-input:not(:first-child):not(:last-child) {\n      padding: 0 7px;\n      border-left-width: ",";\n      margin-right: ",";\n    }\n\n    .ant-input-group-addon {\n      padding: 4px 7px;\n      font-size: 12px;\n      color: ",";\n      text-align: center;\n      background-color: ",";\n      border: 1px solid ",";\n      ",";\n\n      &:first-child {\n        border-right-width: ",";\n        border-left-width: ",";\n        border-radius: ",";\n      }\n\n      &:last-child {\n        border-right-width: ",";\n        border-left-width: ",";\n        border-radius: ",";\n      }\n\n      .ant-select {\n        .ant-select-selection {\n          background-color: inherit;\n          margin: -1px;\n          border: 1px solid transparent;\n          ",";\n        }\n      }\n    }\n\n    .ant-input-group-addon:not(:first-child):not(:last-child),\n    .ant-input-group-wrap:not(:first-child):not(:last-child) {\n      border-left: 0;\n      border-right: 0;\n    }\n\n    & > .ant-input:not(:first-child):not(:last-child) {\n      ",";\n    }\n\n    .ant-input:first-child:last-child {\n      border-radius: 4px;\n    }\n\n    &.ant-input-group-compact > * {\n      border-right-width: ",";\n    }\n\n    &.ant-input-group-compact > .ant-select > .ant-select-selection,\n    &.ant-input-group-compact > .ant-calendar-picker .ant-input,\n    &.ant-input-group-compact > .ant-select-auto-complete .ant-input,\n    &.ant-input-group-compact > .ant-cascader-picker .ant-input,\n    &.ant-input-group-compact > .ant-mention-wrapper .ant-mention-editor,\n    &.ant-input-group-compact > .ant-time-picker .ant-time-picker-input {\n      border-right-width: ",";\n    }\n\n    &.ant-input-group-compact > *:first-child,\n    &.ant-input-group-compact > .ant-select:first-child > .ant-select-selection,\n    &.ant-input-group-compact > .ant-calendar-picker:first-child .ant-input,\n    &.ant-input-group-compact\n      > .ant-select-auto-complete:first-child\n      .ant-input,\n    &.ant-input-group-compact > .ant-cascader-picker:first-child .ant-input,\n    &.ant-input-group-compact\n      > .ant-mention-wrapper:first-child\n      .ant-mention-editor,\n    &.ant-input-group-compact\n      > .ant-time-picker:first-child\n      .ant-time-picker-input {\n      border-radius: ",";\n      border-left-width: 1px\n        ",";\n    }\n\n    &.ant-input-group-compact > *:last-child,\n    &.ant-input-group-compact > .ant-select:last-child > .ant-select-selection,\n    &.ant-input-group-compact > .ant-calendar-picker:last-child .ant-input,\n    &.ant-input-group-compact > .ant-select-auto-complete:last-child .ant-input,\n    &.ant-input-group-compact > .ant-cascader-picker:last-child .ant-input,\n    &.ant-input-group-compact\n      > .ant-mention-wrapper:last-child\n      .ant-mention-editor,\n    &.ant-input-group-compact\n      > .ant-time-picker:last-child\n      .ant-time-picker-input {\n      border-radius: ",";\n      border-right-width: ",";\n    }\n\n    .ant-calendar-picker-clear,\n    .ant-calendar-picker-icon {\n      right: ",";\n      left: ",";\n    }\n  }\n\n  &.ant-input-group-lg {\n    .ant-input,\n    > .ant-input-group-addon {\n      padding: 6px 10px;\n      height: 35px;\n    }\n  }\n"])),(t=>"rtl"===t["data-rtl"]?"-1px":"0"),(t=>"rtl"===t["data-rtl"]?"0 4px 4px 0":"4px 0 0 4px"),(t=>"rtl"===t["data-rtl"]?"0":"1px"),(t=>"rtl"===t["data-rtl"]?"-1px":"0"),(0,b.palette)("text",1),(0,b.palette)("grayscale",4),(0,b.palette)("border",0),(0,A.kY)(),(t=>"rtl"===t["data-rtl"]?"1px":"0"),(t=>"rtl"===t["data-rtl"]?"0":"1px"),(t=>"rtl"===t["data-rtl"]?"0 4px 4px 0":"4px 0 0 4px"),(t=>"rtl"===t["data-rtl"]?"0":"1px"),(t=>"rtl"===t["data-rtl"]?"1px":"0"),(t=>"rtl"===t["data-rtl"]?"4px 0 0 4px":"0 4px 4px 0"),(0,A.MS)(),"",(t=>"rtl"===t["data-rtl"]?"1px ":"0"),(t=>"rtl"===t["data-rtl"]?"1px ":"0"),(t=>"rtl"===t["data-rtl"]?"0 4px 4px 0":"4px 0 0 4px"),"",(t=>"rtl"===t["data-rtl"]?"4px 0 0 4px":"0 4px 4px 0"),(t=>"rtl"===t["data-rtl"]?"0 ":"1px"),(t=>"rtl"===t["data-rtl"]?"inherit":"8px"),(t=>"rtl"===t["data-rtl"]?"8px":"inherit")))(y),z=((0,m.A)(S),(t=>(0,f.Ay)(t)(o||(o=(0,x.A)(["\n  &.ant-input-affix-wrapper {\n    .ant-input {\n      padding: 4px 10px;\n      width: 100%;\n      height: 35px;\n      cursor: text;\n      font-size: 13px;\n      line-height: 1.5;\n      color: ",";\n      background-color: #fff;\n      background-image: none;\n      border: 1px solid ",";\n      ",";\n      ",";\n\n      &:focus {\n        border-color: ",";\n      }\n\n      &.ant-input-lg {\n        height: 42px;\n        padding: 6px 10px;\n      }\n\n      &.ant-input-sm {\n        padding: 1px 10px;\n        height: 30px;\n      }\n\n      &::-webkit-input-placeholder {\n        color: ",";\n      }\n\n      &:-moz-placeholder {\n        color: ",";\n      }\n\n      &::-moz-placeholder {\n        color: ",";\n      }\n      &:-ms-input-placeholder {\n        color: ",";\n      }\n    }\n\n    .ant-input-suffix {\n      right: ",";\n      left: ",";\n    }\n\n    .ant-input-ant-input-prefix {\n      right: ",";\n      left: ",";\n    }\n\n    .ant-input-search-icon {\n      color: ",";\n\n      &:hover {\n        color: ",";\n      }\n    }\n  }\n"])),(0,b.palette)("text",1),(0,b.palette)("border",0),(0,A.Vq)("4px"),(0,A.kY)(),(0,b.palette)("primary",0),(0,b.palette)("grayscale",0),(0,b.palette)("grayscale",0),(0,b.palette)("grayscale",0),(0,b.palette)("grayscale",0),(t=>"rtl"===t["data-rtl"]?"inherit":"7px"),(t=>"rtl"===t["data-rtl"]?"7px":"inherit"),(t=>"rtl"===t["data-rtl"]?"7px":"inherit"),(t=>"rtl"===t["data-rtl"]?"inherit":"7px"),(0,b.palette)("grayscale",0),(0,b.palette)("primary",0)))(w)),O=((0,m.A)(z),(t=>(0,f.Ay)(t)(r||(r=(0,x.A)(["\n  &.ant-input {\n    padding: 4px 10px;\n    width: 100%;\n    height: auto;\n    cursor: text;\n    font-size: 13px;\n    line-height: 1.5;\n    color: ",";\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid ",";\n    ",";\n    ",";\n\n    &:focus {\n      border-color: ",";\n    }\n\n    &::-webkit-input-placeholder {\n      color: ",";\n    }\n\n    &:-moz-placeholder {\n      color: ",";\n    }\n\n    &::-moz-placeholder {\n      color: ",";\n    }\n    &:-ms-input-placeholder {\n      color: ",";\n    }\n  }\n"])),(0,b.palette)("text",1),(0,b.palette)("border",0),(0,A.Vq)("4px"),(0,A.kY)(),(0,b.palette)("primary",0),(0,b.palette)("grayscale",0),(0,b.palette)("grayscale",0),(0,b.palette)("grayscale",0),(0,b.palette)("grayscale",0)))(j)),L=(0,m.A)(O);var I=e(78254),_=e(21270),M=e(37734),E=e(13771),N=e(51865),H=e(6819),B=e(8187),P=e(35676),W=e(99386),T=e(68265),V=e(35398),G=e(29796),q=e(41988),F=e(23072),R=e(87094),Y=e(72612),D=e(41397),U=e(9950),Q=e(98341),X=e(34845),$=e(44414);const{Option:J}=W.A;const K=function(t){const[n]=T.A.useForm(),e=window.innerHeight||800,{visible:a=!1,onClose:i=(()=>{}),rowData:r={}}=t,o=(0,Q.useSelector)((t=>{var n,e;return!(0,D.isNumber)(null===(n=t.Auth.access)||void 0===n||null===(e=n.monthly_features)||void 0===e?void 0:e.num_of_send_doc)||t.Auth.access.monthly_features.num_of_send_doc})),[g,m]=(0,U.useState)(!1),[x,f]=(0,U.useState)([]),[b,A]=(0,U.useState)({newContactVisible:!1,message:"",cLoading:!1,contacts:[]});function w(t){const n=[...x];(0,N.pm)(n,(n=>n.email.toLowerCase()===t.email.toLowerCase()))||(n.push(t),f(n))}function j(t,n){const e=(null===n||void 0===n?void 0:n.obj)||{},a=(null===n||void 0===n?void 0:n.key)||"";if(!(0,D.isEmpty)(e)){const n=e.email?e.email.toLowerCase():"",a=e.first_name?e.first_name.toLowerCase():"",i=e.last_name?e.last_name.toLowerCase():"";return n.indexOf(t.toLowerCase())>=0||a.indexOf(t.toLowerCase())>=0||i.indexOf(t.toLowerCase())>=0}return"new"===a}function y(t,n){const e=(0,B.dS)(t.first_name,t.last_name);return(0,$.jsx)(V.A.Item,{actions:[(0,$.jsx)(u.A,{children:(0,$.jsx)(h.A,{shape:"circle",icon:(0,$.jsx)(l.A,{}),className:"deleteCircle",onClick:()=>function(t){const n=[...x];n.splice(t,1),f(n)}(n)})})],children:(0,$.jsx)(V.A.Item.Meta,{avatar:(0,$.jsx)(G.A,{icon:(0,$.jsx)(c.A,{})}),title:e,description:t.email})},t.email)}return(0,P.A)({form:n,visible:a,initVal:{}}),(0,U.useEffect)((()=>{a&&o?async function(t){A((t=>({...t,cLoading:!0})));try{const n=await(0,H.Ay)("contact/get-contact",t);n.success?A((t=>({...t,contacts:n.data||[],cLoading:!1}))):A((t=>({...t,cLoading:!1})))}catch(n){A((t=>({...t,cLoading:!1})))}}():(f([]),A((t=>({...t,message:""}))))}),[a]),(0,$.jsxs)(s._H,{children:[(0,$.jsx)(d.A,{open:a,onClose:g?null:i,title:(0,$.jsx)(M.A,{id:"documents.sendDoc",values:{doc:(0,$.jsx)("strong",{children:r.name})}}),okText:(0,$.jsx)(M.A,{id:"common.send"}),onOk:g?null:function(){n.validateFields().then((t=>{let n=!0;if(x&&!(0,D.isEmpty)(x)||((0,p.A)("error","req.selectRecipient"),n=!1),n){const n=(0,D.map)(x,(t=>t.email));!async function(t){m(!0);try{const n=await(0,H.Ay)("file/send-file",t,"POST");n.success?(m(!1),(0,p.A)("success",n.message),i()):(m(!1),(0,p.A)("error",n.message))}catch(n){m(!1),(0,p.A)("error")}}({document_id:r.id||0,send_to:n,message:t.message||""})}}))},onCancel:g?null:i,confirmLoading:g,okButtonProps:{id:"add-users"},footer:0===o?null:void 0,children:0===o?(0,$.jsx)(I.default,{msg:"document.sendUpgradeLimit"}):(0,$.jsx)(Y.A,{spinning:g||b.cLoading,children:(0,$.jsx)(T.A,{form:n,children:(0,$.jsx)(R.A,{gutter:6,children:function(){const t=b.contacts.filter((t=>x.findIndex((n=>{const e=(0,D.isObject)(n)&&n.email?n.email.toLowerCase():"",a=(0,D.isObject)(t)&&t.email?t.email.toLowerCase():"";return a&&(0,D.isEqual)(e,a)}))<0));return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(q.A,{span:24,children:[(0,$.jsx)("div",{className:"mb10",children:(0,$.jsx)("h3",{children:(0,$.jsx)(M.A,{id:"documents.msgToRecipients"})})}),(0,$.jsx)(T.A.Item,{name:"message",rules:[{required:!0,message:(0,$.jsx)(M.A,{id:"req.message"})},{whitespace:!0,message:(0,$.jsx)(M.A,{id:"err.blankSpace"})}],children:(0,$.jsx)(L,{})})]}),(0,$.jsx)(F.A,{}),(0,$.jsxs)(q.A,{span:24,children:[(0,$.jsxs)("div",{className:"mb10",children:[(0,$.jsx)("h3",{children:(0,$.jsx)(M.A,{id:"documents.chooseRecipients"})}),(0,$.jsx)("p",{children:(0,$.jsx)(M.A,{id:"documents.sendHint"})})]}),(0,$.jsx)(R.A,{gutter:6,children:(0,$.jsx)(q.A,{span:24,children:(0,$.jsxs)(W.A,{showSearch:!0,style:{width:"100%"},placeholder:(0,$.jsx)(M.A,{id:"common.search"}),notFoundContent:null,onChange:(t,n)=>{t&&"new"===t.toString()?A((t=>({...t,newContactVisible:!0}))):w((null===n||void 0===n?void 0:n.obj)||{})},filterOption:j,value:[],children:[(0,$.jsx)(J,{children:(0,$.jsx)("p",{style:{fontWeight:550},children:(0,$.jsx)(M.A,{id:"common.addNew"})})},"new"),t.map((t=>(0,$.jsxs)(J,{value:t.id,obj:t,children:[(0,$.jsx)("p",{style:{fontWeight:550},children:(0,B.dS)(t.first_name,t.last_name)}),(0,$.jsx)("p",{children:t.email})]},t.id)))]})})})]}),(0,D.isArray)(x)&&!(0,D.isEmpty)(x)?(0,$.jsx)(q.A,{span:24,className:"mt10",children:(0,$.jsx)(X.h2,{children:(0,$.jsx)(_.A,{autoHeight:!0,autoHeightMax:Math.round(e-e/1.8),autoHide:!1,children:(0,$.jsx)(V.A,{className:"selectedUsersList",dataSource:x,renderItem:y})})})}):null]})}()})})})}),(0,$.jsx)(E.A,{visible:b.newContactVisible,onClose:()=>{A((t=>({...t,newContactVisible:!1})))},handleSubmit:(t,n)=>{n&&w(t);const e=[...b.contacts];e.push(t),A((t=>({...t,contacts:e,newContactVisible:!1})))}})]})}},51865:(t,n,e)=>{e.d(n,{dY:()=>i,pm:()=>o,wf:()=>l,z8:()=>r});var a=e(41397);function i(t,n,e){const a=new Image;a.crossOrigin="Anonymous",a.onload=function(){const t=document.createElement("canvas"),a=t.getContext("2d");let i;t.height=this.naturalHeight,t.width=this.naturalWidth,a.drawImage(this,0,0),i=t.toDataURL(e),n(i)},a.src=t,(a.complete||void 0===a.complete)&&(a.src="data:image/gif;base64, R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",a.src=t)}function r(t,n){const e=n?t.length:0;for(let i=0;i<e;i+=1){const e=t[i]&&t[i].getObjects()||[],r=n?(0,a.find)(e,n):{};if(r)return r}return{}}function o(t,n){const e=n?t.length:0;let a=null;for(let i=0;i<e;i+=1){const e=t[i];if(n(e)&&e){a=e;break}}return a}function l(t){return[5,10,25,50,75,100,...t?[]:[150]]}},23072:(t,n,e)=>{e.d(n,{A:()=>g});var a=e(9950),i=e(48738),r=e.n(i),o=e(5741),l=e(20033),c=e(45343),s=e(43717),d=e(91874);const p=t=>{const{componentCls:n,sizePaddingEdgeHorizontal:e,colorSplit:a,lineWidth:i,textPaddingInline:r,orientationMargin:o,verticalMarginInline:s}=t;return{[n]:Object.assign(Object.assign({},(0,c.dF)(t)),{borderBlockStart:"".concat((0,l.unit)(i)," solid ").concat(a),"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:s,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:"".concat((0,l.unit)(i)," solid ").concat(a)},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:"".concat((0,l.unit)(t.dividerHorizontalGutterMargin)," 0")},["&-horizontal".concat(n,"-with-text")]:{display:"flex",alignItems:"center",margin:"".concat((0,l.unit)(t.dividerHorizontalWithTextGutterMargin)," 0"),color:t.colorTextHeading,fontWeight:500,fontSize:t.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:"0 ".concat(a),"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:"".concat((0,l.unit)(i)," solid transparent"),borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},["&-horizontal".concat(n,"-with-text-left")]:{"&::before":{width:"calc(".concat(o," * 100%)")},"&::after":{width:"calc(100% - ".concat(o," * 100%)")}},["&-horizontal".concat(n,"-with-text-right")]:{"&::before":{width:"calc(100% - ".concat(o," * 100%)")},"&::after":{width:"calc(".concat(o," * 100%)")}},["".concat(n,"-inner-text")]:{display:"inline-block",paddingBlock:0,paddingInline:r},"&-dashed":{background:"none",borderColor:a,borderStyle:"dashed",borderWidth:"".concat((0,l.unit)(i)," 0 0")},["&-horizontal".concat(n,"-with-text").concat(n,"-dashed")]:{"&::before, &::after":{borderStyle:"dashed none none"}},["&-vertical".concat(n,"-dashed")]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},["&-plain".concat(n,"-with-text")]:{color:t.colorText,fontWeight:"normal",fontSize:t.fontSize},["&-horizontal".concat(n,"-with-text-left").concat(n,"-no-default-orientation-margin-left")]:{"&::before":{width:0},"&::after":{width:"100%"},["".concat(n,"-inner-text")]:{paddingInlineStart:e}},["&-horizontal".concat(n,"-with-text-right").concat(n,"-no-default-orientation-margin-right")]:{"&::before":{width:"100%"},"&::after":{width:0},["".concat(n,"-inner-text")]:{paddingInlineEnd:e}}})}},u=(0,s.OF)("Divider",(t=>{const n=(0,d.h1)(t,{dividerHorizontalWithTextGutterMargin:t.margin,dividerHorizontalGutterMargin:t.marginLG,sizePaddingEdgeHorizontal:0});return[p(n)]}),(t=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:t.marginXS})),{unitless:{orientationMargin:!0}});var h=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(t);i<a.length;i++)n.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(t,a[i])&&(e[a[i]]=t[a[i]])}return e};const g=t=>{const{getPrefixCls:n,direction:e,divider:i}=a.useContext(o.QO),{prefixCls:l,type:c="horizontal",orientation:s="center",orientationMargin:d,className:p,rootClassName:g,children:m,dashed:x,plain:f,style:b}=t,A=h(t,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain","style"]),w=n("divider",l),[j,y,v]=u(w),k=s.length>0?"-".concat(s):s,C=!!m,S="left"===s&&null!=d,z="right"===s&&null!=d,O=r()(w,null===i||void 0===i?void 0:i.className,y,v,"".concat(w,"-").concat(c),{["".concat(w,"-with-text")]:C,["".concat(w,"-with-text").concat(k)]:C,["".concat(w,"-dashed")]:!!x,["".concat(w,"-plain")]:!!f,["".concat(w,"-rtl")]:"rtl"===e,["".concat(w,"-no-default-orientation-margin-left")]:S,["".concat(w,"-no-default-orientation-margin-right")]:z},p,g),L=a.useMemo((()=>"number"===typeof d?d:/^\d+$/.test(d)?Number(d):d),[d]),I=Object.assign(Object.assign({},S&&{marginLeft:L}),z&&{marginRight:L});return j(a.createElement("div",Object.assign({className:O,style:Object.assign(Object.assign({},null===i||void 0===i?void 0:i.style),b)},A,{role:"separator"}),m&&"vertical"!==c&&a.createElement("span",{className:"".concat(w,"-inner-text"),style:I},m)))}}}]);