"use strict";(self.webpackChunkfilesdna=self.webpackChunkfilesdna||[]).push([[9799,3072,691],{626:(t,e,n)=>{n.d(e,{A:()=>g});var a=n(37734),i=n(6819),o=n(99386),r=n(52160),l=n(72612),c=n(41397),s=n(9950),d=n(44414);const{Option:h}=o.A;const g=function(t){const{onChange:e=(()=>{}),onSelect:n=(()=>{}),onDeselect:g=(()=>{}),placeholder:u,apiData:f={},initVal:m,fullData:p=!1,allowClear:x=!0,disabled:y=!1,mode:b,vKey:j="",lKey:v="",value:w,refSelect:A,renderOption:S=null,addNew:O=!1,onClear:C=(()=>{}),onClick:k=(()=>{}),open:z,onFocus:E=(()=>{}),onBlur:B=(()=>{})}=t,[T,I]=(0,s.useState)({data:[],fetching:!1}),[M,N]=(0,s.useState)(!1);let P=0;const{fetching:D,data:H}=T,W=M?H:H.slice(0,10);(0,s.useEffect)((()=>{(0,c.isObject)(m)&&!(0,c.isEmpty)(m)&&I((t=>({...t,value:m})))}),[m]);const F=async()=>{const t=(0,c.isObject)(f)?f:{};try{const e=await(0,i.Ay)(t.apiUrl,{}),n=e&&(0,c.isArray)(e.data)?e.data:[];I((t=>({...t,data:n,fetching:!1})))}catch(e){I((t=>({...t,data:[],fetching:!1})))}};(0,s.useEffect)((()=>{F()}),[(0,c.isEmpty)(w)]);const G=(0,c.debounce)((async t=>{P+=1;const e=P,n=t?t.trim():"",a=n.length,o=(0,c.isObject)(f)?f:{};if(a>1&&!(0,c.isEmpty)(o)){I((t=>({...t,data:[],fetching:!0})));try{const t=await(0,i.Ay)(o.apiUrl,{[o.apiParam]:n,fullData:p||null}),a=t&&(0,c.isArray)(t.data)?t.data:[];if(e!==P)return;I((t=>({...t,data:a,fetching:!1})))}catch(r){I((t=>({...t,data:[],fetching:!1})))}}else I((t=>({...t,data:[]})))}),800),L=j||"id",K=v||"name",U=()=>N(!0),R=S||function(t){return(0,d.jsx)(h,{value:t[L],obj:t,children:t[K]},t[L])};return(0,d.jsxs)(o.A,{onChange:e,placeholder:u,ref:A,notFoundContent:D?(0,d.jsx)("div",{className:"flexCenter",children:(0,d.jsx)(l.A,{size:"small"})}):null,filterOption:!1,onSearch:G,style:{width:"100%"},allowClear:x,showSearch:!0,disabled:y,mode:b,onSelect:t=>{n(t),F()},onDeselect:g,value:w,onClear:C,onClick:k,open:z,onFocus:E,onBlur:B,children:[W.map(R),O?(0,d.jsx)(h,{children:(0,d.jsx)("p",{style:{fontWeight:550},children:(0,d.jsx)(a.A,{id:"common.addNew"})})},"new"):null,H.map(R).length>10&&!M&&(0,d.jsx)(h,{style:{direction:"rtl"},children:(0,d.jsx)(r.Ay,{type:"text",size:"small",onClick:U,children:(0,d.jsx)(a.A,{id:"common.showMore"})})},"show-more")]})}},56884:(t,e,n)=>{n.d(e,{A:()=>a});const a=n(68265).A},29799:(t,e,n)=>{n.r(e),n.d(e,{default:()=>b});var a=n(10597),i=n(58769),o=n(41893),r=n(626),l=n(56884),c=n(37734),s=n(6819),d=n(35676),h=n(72612),g=n(87094),u=n(41988),f=n(23072),m=n(35621),p=n(41397),x=n(9950),y=n(44414);const b=function(t){const{handleSubmit:e=(()=>{}),visible:n=!1,onClose:b=(()=>{}),rowData:j={}}=t,v=(0,x.useRef)(null),[w,A]=(0,x.useState)(!1),[S,O]=(0,x.useState)([]),[C,k]=(0,x.useState)({tags:[],loading:!1}),[z,E]=(0,x.useState)(!1),[B]=l.A.useForm(),T=(0,p.isArray)(j.tags)?(0,p.map)(j.tags,"name"):[];function I(t,e){if("add"===e){const e=t?t.toString().trim():"";if(e){const t=[...S];t.push(e),O(t)}else(0,o.A)("error","err.tagBlank")}else if("remove"===e&&"Top secret"!==t){const e=[...S],n=e.indexOf(t);n>-1&&(e.splice(n,1),O(e))}}return(0,d.A)({form:B,visible:n}),(0,x.useEffect)((()=>{n&&(!async function(){k((t=>({...t,loading:!0})));try{const t=await(0,s.Ay)("file/get-tags");t.success&&t.companyTags?k((e=>({...e,tags:t.companyTags,loading:!1}))):k((t=>({...t,tags:[],loading:!1})))}catch(t){k((t=>({...t,tags:[],loading:!1})))}}(),O(T))}),[n]),(0,y.jsx)(a._H,{children:(0,y.jsx)(i.A,{open:n,onClose:w?null:b,title:(0,y.jsx)(c.A,{id:"documents.tagsfor",values:{doc:(0,y.jsx)("strong",{children:j.name})}}),okText:(0,y.jsx)(c.A,{id:"common.submit"}),onOk:w?null:function(){!async function(t){A(!0);try{const n=await(0,s.Ay)("file/add-tags",t,"POST");n.success?(A(!1),(0,o.A)("success",n.message),e(n.data||{})):(A(!1),(0,o.A)("error",n.message))}catch(n){A(!1),(0,o.A)("error")}}({tags:S,file_id:j.id||0})},onCancel:w?null:b,confirmLoading:w,okButtonProps:{id:"add-tags"},children:(0,y.jsx)(h.A,{spinning:w,children:(0,y.jsx)(l.A,{form:B,initialValues:{tags:T},layout:"vertical",children:(0,y.jsxs)(g.A,{gutter:6,children:[(0,y.jsxs)(u.A,{span:24,children:[(0,y.jsx)("h3",{style:{marginBottom:10},children:(0,y.jsx)(c.A,{id:"documents.searchTags"})}),(0,y.jsx)(r.A,{refSelect:v,mode:"tags",apiData:{apiParam:"keyword",apiUrl:"file/get-tags"},placeholder:(0,y.jsx)(c.A,{id:"documents.searchTags"}),vKey:"name",onSelect:t=>{"show-more"!==t&&I(t,"add")},onDeselect:t=>I(t,"remove"),value:S,onClear:()=>O([]),open:z,onFocus:()=>E(!0),onBlur:()=>E(!1)})]}),!(0,p.isEmpty)(C.tags)||C.loading?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(f.A,{}),(0,y.jsx)(u.A,{span:24,children:(0,y.jsx)(h.A,{spinning:C.loading,children:(0,y.jsxs)("div",{children:[(0,y.jsx)("h3",{children:(0,y.jsx)(c.A,{id:"documents.deptTags"})}),(0,y.jsx)("p",{style:{fontSize:13},children:(0,y.jsx)(c.A,{id:"documents.deptTagsHint"})}),(0,y.jsx)("p",{className:"mt15",children:C.tags.map((t=>S.indexOf(t.name)>-1?null:(0,y.jsx)(m.A,{className:"pointer",onClick:()=>{const e=[...S];e.push(t.name),O(e)},children:t.name},t.id)))})]})})})]}):null]})})})})})}},23072:(t,e,n)=>{n.d(e,{A:()=>f});var a=n(9950),i=n(48738),o=n.n(i),r=n(5741),l=n(20033),c=n(45343),s=n(43717),d=n(91874);const h=t=>{const{componentCls:e,sizePaddingEdgeHorizontal:n,colorSplit:a,lineWidth:i,textPaddingInline:o,orientationMargin:r,verticalMarginInline:s}=t;return{[e]:Object.assign(Object.assign({},(0,c.dF)(t)),{borderBlockStart:"".concat((0,l.unit)(i)," solid ").concat(a),"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:s,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:"".concat((0,l.unit)(i)," solid ").concat(a)},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:"".concat((0,l.unit)(t.dividerHorizontalGutterMargin)," 0")},["&-horizontal".concat(e,"-with-text")]:{display:"flex",alignItems:"center",margin:"".concat((0,l.unit)(t.dividerHorizontalWithTextGutterMargin)," 0"),color:t.colorTextHeading,fontWeight:500,fontSize:t.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:"0 ".concat(a),"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:"".concat((0,l.unit)(i)," solid transparent"),borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},["&-horizontal".concat(e,"-with-text-left")]:{"&::before":{width:"calc(".concat(r," * 100%)")},"&::after":{width:"calc(100% - ".concat(r," * 100%)")}},["&-horizontal".concat(e,"-with-text-right")]:{"&::before":{width:"calc(100% - ".concat(r," * 100%)")},"&::after":{width:"calc(".concat(r," * 100%)")}},["".concat(e,"-inner-text")]:{display:"inline-block",paddingBlock:0,paddingInline:o},"&-dashed":{background:"none",borderColor:a,borderStyle:"dashed",borderWidth:"".concat((0,l.unit)(i)," 0 0")},["&-horizontal".concat(e,"-with-text").concat(e,"-dashed")]:{"&::before, &::after":{borderStyle:"dashed none none"}},["&-vertical".concat(e,"-dashed")]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},["&-plain".concat(e,"-with-text")]:{color:t.colorText,fontWeight:"normal",fontSize:t.fontSize},["&-horizontal".concat(e,"-with-text-left").concat(e,"-no-default-orientation-margin-left")]:{"&::before":{width:0},"&::after":{width:"100%"},["".concat(e,"-inner-text")]:{paddingInlineStart:n}},["&-horizontal".concat(e,"-with-text-right").concat(e,"-no-default-orientation-margin-right")]:{"&::before":{width:"100%"},"&::after":{width:0},["".concat(e,"-inner-text")]:{paddingInlineEnd:n}}})}},g=(0,s.OF)("Divider",(t=>{const e=(0,d.h1)(t,{dividerHorizontalWithTextGutterMargin:t.margin,dividerHorizontalGutterMargin:t.marginLG,sizePaddingEdgeHorizontal:0});return[h(e)]}),(t=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:t.marginXS})),{unitless:{orientationMargin:!0}});var u=function(t,e){var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(t);i<a.length;i++)e.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(t,a[i])&&(n[a[i]]=t[a[i]])}return n};const f=t=>{const{getPrefixCls:e,direction:n,divider:i}=a.useContext(r.QO),{prefixCls:l,type:c="horizontal",orientation:s="center",orientationMargin:d,className:h,rootClassName:f,children:m,dashed:p,plain:x,style:y}=t,b=u(t,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain","style"]),j=e("divider",l),[v,w,A]=g(j),S=s.length>0?"-".concat(s):s,O=!!m,C="left"===s&&null!=d,k="right"===s&&null!=d,z=o()(j,null===i||void 0===i?void 0:i.className,w,A,"".concat(j,"-").concat(c),{["".concat(j,"-with-text")]:O,["".concat(j,"-with-text").concat(S)]:O,["".concat(j,"-dashed")]:!!p,["".concat(j,"-plain")]:!!x,["".concat(j,"-rtl")]:"rtl"===n,["".concat(j,"-no-default-orientation-margin-left")]:C,["".concat(j,"-no-default-orientation-margin-right")]:k},h,f),E=a.useMemo((()=>"number"===typeof d?d:/^\d+$/.test(d)?Number(d):d),[d]),B=Object.assign(Object.assign({},C&&{marginLeft:E}),k&&{marginRight:E});return v(a.createElement("div",Object.assign({className:z,style:Object.assign(Object.assign({},null===i||void 0===i?void 0:i.style),y)},b,{role:"separator"}),m&&"vertical"!==c&&a.createElement("span",{className:"".concat(j,"-inner-text"),style:B},m)))}}}]);