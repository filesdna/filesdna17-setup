"use strict";(self.webpackChunkfilesdna=self.webpackChunkfilesdna||[]).push([[9568],{21707:(e,n,t)=>{t.d(n,{A:()=>m});var o=t(44070);const r=t(73149).A;var a=t(41893),i=t(19392),c=t(37734),l=t(6819),s=t(41397),d=t(79796),p=t(44414);function m(e){const{apiUrl:n,apiData:t,title:m,fetchData:u=(()=>{}),setState:g=(()=>{}),onConfirm:x=(()=>{}),btnId:v,btnProps:h={},deleteCallback:f,disabled:y=!1}=e;return(0,p.jsx)(d.A,{children:(0,p.jsx)(r,{title:m,okText:(0,p.jsx)(c.A,{id:"common.deleteCap"}),okButtonProps:{id:"delete-item"},cancelText:(0,p.jsx)(c.A,{id:"common.no"}),onConfirm:async function(){if((0,s.isObject)(t)&&!(0,s.isEmpty)(t)){g((e=>({...e,loading:!0})));try{(new FormData).append("id",t.document_id),console.log(t);let e=await(0,l.Ay)(n,{params:t},"POST",{...l.$K,"Content-Type":"application/json"});e="form"===t.type?e.data:e.result;let o="error";e.success?(f&&f(),o="success",u()):g((e=>({...e,loading:!1}))),setTimeout((()=>{(0,a.A)(o,e.message)}),200)}catch(e){g((e=>({...e,loading:!1}))),(0,a.A)("error")}}else x()},className:"deleteBtn",onCancel:null,placement:"topRight",disabled:y,children:(0,p.jsx)("div",{children:(0,p.jsx)(i.A,{id:v,shape:"circle",danger:!0,icon:(0,p.jsx)(o.A,{}),className:"deleteCircle ".concat(y?" disabled":""),...h})})})})}},79796:(e,n,t)=>{t.d(n,{A:()=>s});var o,r=t(57528),a=t(33753),i=t(1868),c=t(73053);const l=a.Ay.div(o||(o=(0,r.A)(["\n  & .deleteCircle,\n  & .deleteCircle:hover {\n    color: ",";\n    border-width: 0px;\n  }\n"])),(0,i.palette)("error",0)),s=(0,c.A)(l)},17619:(e,n,t)=>{t.d(n,{A:()=>i});var o,r=t(57528),a=t(33753);const i=(0,t(73053).A)(a.Ay.div(o||(o=(0,r.A)(["\n  @keyframes voice_pulse {\n    0% {\n      box-shadow: 0px 0px 5px 0px rgba(214, 214, 214, 0.7);\n    }\n    65% {\n      box-shadow: 0px 0px 5px 13px rgba(214, 214, 214, 0.9);\n    }\n    90% {\n      box-shadow: 0px 0px 5px 13px rgba(214, 214, 214, 0);\n    }\n  }\n\n  & .ant-btn-circle.rec {\n    animation-name: voice_pulse;\n    animation-duration: 1.5s;\n    animation-iteration-count: infinite;\n    animation-timing-function: linear;\n\n    background-color: #ff4646;\n    color: #fff;\n    border-color: transparent !important;\n  }\n"]))))},55215:(e,n,t)=>{t.d(n,{A:()=>s,Y:()=>l});var o,r,a=t(57528),i=t(33753);const c=i.Ay.div(o||(o=(0,a.A)(["\n  & .titleContent {\n    margin-bottom: 15px;\n\n    p {\n      font-size: 13px;\n    }\n  }\n\n  & .enrollContent {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-top: 15px;\n  }\n\n  & .mainBtn {\n    font-size: 15px !important;\n    margin-left: 5px;\n    margin-right: 5px;\n  }\n\n  & .resultContent {\n    & .ant-col {\n      text-align: center;\n\n      & h4 {\n        margin-bottom: 10px;\n      }\n\n      & .ant-alert {\n        width: 60%;\n        margin: 0 auto;\n      }\n    }\n  }\n\n  & .deleteVoice {\n    & p {\n      margin-bottom: 10px;\n    }\n  }\n"]))),l=i.Ay.div(r||(r=(0,a.A)(["\n  padding: 5px 10px 5px 15px;\n  background: #f2f2f2;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  margin: 0px 0px 10px 0px;\n\n  & .recordContent {\n    display: flex;\n    align-items: center;\n\n    & .form-check-label {\n      flex: 1;\n      display: flex;\n      align-items: center;\n      font-weight: 550;\n      padding-right: 10px;\n    }\n\n    & .recordAction {\n      display: flex;\n      align-items: center;\n\n      & > * {\n        margin-right: 5px;\n        &:last-child {\n          margin-right: 0px;\n        }\n      }\n    }\n  }\n"]))),s=c},82304:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var o=t(9950),r=t(41893),a=t(19392),i=t(37734),c=t(6819),l=t(39389),s=t(22748),d=t(1635),p=t(55266),m=t(21707),u=t(17619),g=t(55215),x=t(44414);const v=e=>{let{text:n,index:t,selectedIndex:o,record:r,onClick:c,isRecording:l,deleteHandler:v}=e;const h=l&&o===t;return(0,x.jsxs)(g.Y,{children:[(0,x.jsxs)("div",{className:"recordContent",children:[(0,x.jsx)("p",{className:"form-check-label",children:n}),(0,x.jsxs)("div",{className:"recordAction",children:[(0,x.jsx)(s.A,{placement:"bottom",title:(0,x.jsx)(i.A,{id:"".concat(h?"common.stop":"record")}),children:(0,x.jsx)(u.A,{children:(0,x.jsx)(a.A,{className:h&&"rec",shape:"circle",onClick:()=>c(t),danger:h,icon:h?(0,x.jsx)(d.A,{}):(0,x.jsx)(p.A,{})})})}),r&&!!r.file&&(0,x.jsx)(s.A,{placement:"bottom",title:(0,x.jsx)(i.A,{id:"voice.deleteRec"}),children:(0,x.jsx)("div",{children:(0,x.jsx)(m.A,{onConfirm:()=>v(t)})})})]})]}),(0,x.jsx)("div",{className:"recordAudio",children:r&&!!r.file&&(0,x.jsx)("audio",{src:null===r||void 0===r?void 0:r.sourceUrl,controls:!0})})]})},h=["Difficult roads often lead to beautiful destinations.","To be the best, you must be able to handle the worst.","Tough times never last, but tough people do.","Hard work beats talent when talent doesn't work hard.","If anything is worth doing, do it with all your heart."];const f=function(e){let{token:n,guest:t=null,enrollSuccess:s,onHandleCancel:d}=e;const[p,m]=(0,o.useState)(!1),[u,g]=(0,o.useState)(null),[f,y]=(0,o.useState)((()=>h.map((()=>null)))),{start:b,stop:A,isRecording:j}=(0,l.A)((e=>{const n=new File([e],"audio_".concat(u,"_file.wav"),{type:e.type}),t=[...f];t[u]={file:n,sourceUrl:window.URL.createObjectURL(e)},y(t)}),(e=>{"NotAllowedError"===e.name&&(0,r.A)("error","record.permission")}));(0,o.useEffect)((()=>{null!==u&&(j?A():b())}),[u]);const w=e=>{if(j)(0,r.A)("error","voice.stopRecDelete");else{const n=[...f];n[e]=null,y(n)}},C=e=>{const n=u===e;j?n?A():(0,r.A)("error","voice.stopChangeTxt"):n?b():g(e)},O=(0,o.useMemo)((()=>[...f].filter((e=>!!e)).length),[f]),E=5===O;return(0,x.jsxs)("div",{className:"enrollContainer",children:[(0,x.jsxs)("div",{className:"titleContent",children:[s&&(0,x.jsx)("h1",{className:"voice-title",children:"Voice Recognition System"}),(0,x.jsx)("h2",{children:(0,x.jsx)(i.A,{id:"voice.masterVoiceRec"})}),(0,x.jsx)("p",{className:"voice-description",children:(0,x.jsx)(i.A,{id:"voice.masterVoiceSub"})})]}),(0,x.jsxs)("div",{children:[h.map(((e,n)=>(0,x.jsx)(v,{index:n,name:"enrol",text:(0,x.jsx)(i.A,{id:"voice.testLine".concat(n+1)}),onClick:C,start:b,stop:A,deleteHandler:w,selectedIndex:u,record:f[n],isRecording:j},e))),(0,x.jsxs)("div",{className:"enrollContent",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("span",{children:[(0,x.jsx)(i.A,{id:"voice.recorded"})," "]}),(0,x.jsx)("strong",{children:O})]}),s&&(0,x.jsx)(a.A,{className:"mainBtn",type:"primary",onClick:()=>d(),children:(0,x.jsx)(i.A,{id:"common.cancel"})}),(0,x.jsx)(a.A,{className:"mainBtn",type:"primary",onClick:async()=>{console.log(">>> onEnrolUser()");try{m(!0);const e=new FormData;e.append("token",n),t&&t.isGuest&&t.guestEmail&&e.append("email",t.guestEmail),f.forEach((n=>{null!==n&&void 0!==n&&n.file&&e.append("audios[]",n.file)})),await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const n=new FormData;e?(n.append("email",e),await(0,c.Ay)("voice-non-user/reset",n,"POST",{},!0)):await(0,c.Ay)("voice/reset",{},"POST")}catch(n){console.log(n.message),(0,r.A)("error",n.message)}}((null===t||void 0===t?void 0:t.guestEmail)||null);const o=t&&t.isGuest?"voice-non-user/enroll":"voice/enroll";(await(0,c.Ay)(o,e,"POST",{},!0)).success?((0,r.A)("success","voice.enrollSuccess"),s&&s(!0)):(0,r.A)("success","voice.enrollSuccess"),y(h.map((()=>null))),g(null)}catch(e){(0,r.A)("success","voice.enrollSuccess")}finally{m(!1)}},loading:p,disabled:!E,children:(0,x.jsx)(i.A,{id:"voice.enroll"})})]})]})]})}},39389:(e,n,t)=>{t.d(n,{A:()=>l,s:()=>c});var o=t(9950),r=t(31407);const a={isRecording:!1,recorder:null,data:null,error:null},i=(e,n)=>{switch(n.type){case"start":case"stop":return{...e,isRecording:!1};case"startRecording":return{...e,isRecording:!0,recorder:n.payload.recorder};case"hasError":return{...e,isRecording:!1,error:n.payload.error};default:return e}},c=(e,n)=>{const[t,c]=(0,o.useReducer)(i,a),[l,s]=(0,o.useState)(0),d=n=>{let{data:t}=n;e(t)};return(0,o.useEffect)((()=>()=>{t.recorder&&t.recorder.removeEventListener("dataavailable",(()=>{}))}),[t.recorder]),{start:async()=>{try{if(t.isRecording)return;c({type:"start"}),s(0);const e=await navigator.mediaDevices.getUserMedia({audio:!0}),n=new r.VW(e,{mimeType:"audio/wav"});c({type:"startRecording",payload:{recorder:n}}),n.start(),n.addEventListener("dataavailable",d),t.error&&c({type:"hasError",payload:{error:null}})}catch(e){console.log("\ud83d\ude80 ~ state.error",e),n(e),c({type:"hasError",payload:{error:e}})}},stop:()=>{try{const{recorder:e}=t;c({type:"stop"}),e&&("inactive"!==e.state&&e.stop(),e.removeEventListener("dataavailable",d))}catch(e){n(e),c({type:"hasError",payload:{error:e}})}},recorder:t.recorder,isRecording:t.isRecording,error:t.error,countdown:l}},l=c},44070:(e,n,t)=>{t.d(n,{A:()=>l});var o=t(58168),r=t(9950);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var i=t(25085),c=function(e,n){return r.createElement(i.A,(0,o.A)({},e,{ref:n,icon:a}))};const l=r.forwardRef(c)},68493:(e,n,t)=>{t.d(n,{b:()=>o});const o=e=>e?"function"===typeof e?e():e:null},86875:(e,n,t)=>{t.d(n,{Ay:()=>m});var o=t(9950),r=t(48738),a=t.n(r),i=t(99888),c=t(68493),l=t(5741),s=t(94965),d=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t};const p=e=>{const{hashId:n,prefixCls:t,className:r,style:l,placement:s="top",title:d,content:p,children:m}=e;return o.createElement("div",{className:a()(n,t,"".concat(t,"-pure"),"".concat(t,"-placement-").concat(s),r),style:l},o.createElement("div",{className:"".concat(t,"-arrow")}),o.createElement(i.Popup,Object.assign({},e,{className:n,prefixCls:t}),m||((e,n,t)=>n||t?o.createElement(o.Fragment,null,n&&o.createElement("div",{className:"".concat(e,"-title")},(0,c.b)(n)),o.createElement("div",{className:"".concat(e,"-inner-content")},(0,c.b)(t))):null)(t,d,p)))},m=e=>{const{prefixCls:n,className:t}=e,r=d(e,["prefixCls","className"]),{getPrefixCls:i}=o.useContext(l.QO),c=i("popover",n),[m,u,g]=(0,s.A)(c);return m(o.createElement(p,Object.assign({},r,{prefixCls:c,hashId:u,className:a()(t,g)})))}},65059:(e,n,t)=>{t.d(n,{A:()=>x});var o=t(9950),r=t(48738),a=t.n(r),i=t(68493),c=t(49437),l=t(5741),s=t(22748),d=t(86875),p=t(94965),m=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t};const u=e=>{let{title:n,content:t,prefixCls:r}=e;return o.createElement(o.Fragment,null,n&&o.createElement("div",{className:"".concat(r,"-title")},(0,i.b)(n)),o.createElement("div",{className:"".concat(r,"-inner-content")},(0,i.b)(t)))},g=o.forwardRef(((e,n)=>{const{prefixCls:t,title:r,content:i,overlayClassName:d,placement:g="top",trigger:x="hover",mouseEnterDelay:v=.1,mouseLeaveDelay:h=.1,overlayStyle:f={}}=e,y=m(e,["prefixCls","title","content","overlayClassName","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),{getPrefixCls:b}=o.useContext(l.QO),A=b("popover",t),[j,w,C]=(0,p.A)(A),O=b(),E=a()(d,w,C);return j(o.createElement(s.A,Object.assign({placement:g,trigger:x,mouseEnterDelay:v,mouseLeaveDelay:h,overlayStyle:f},y,{prefixCls:A,overlayClassName:E,ref:n,overlay:r||i?o.createElement(u,{prefixCls:A,title:r,content:i}):null,transitionName:(0,c.b)(O,"zoom-big",y.transitionName),"data-popover-inject":!0})))}));g._InternalPanelDoNotUseOrYouWillBeFired=d.Ay;const x=g},94965:(e,n,t)=>{t.d(n,{A:()=>m});var o=t(45343),r=t(98691),a=t(26871),i=t(88704),c=t(43717),l=t(91874),s=t(51201);const d=e=>{const{componentCls:n,popoverColor:t,titleMinWidth:r,fontWeightStrong:i,innerPadding:c,boxShadowSecondary:l,colorTextHeading:s,borderRadiusLG:d,zIndexPopup:p,titleMarginBottom:m,colorBgElevated:u,popoverBg:g,titleBorderBottom:x,innerContentPadding:v,titlePadding:h}=e;return[{[n]:Object.assign(Object.assign({},(0,o.dF)(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:p,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","--antd-arrow-background-color":u,"&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},["".concat(n,"-content")]:{position:"relative"},["".concat(n,"-inner")]:{backgroundColor:g,backgroundClip:"padding-box",borderRadius:d,boxShadow:l,padding:c},["".concat(n,"-title")]:{minWidth:r,marginBottom:m,color:s,fontWeight:i,borderBottom:x,padding:h},["".concat(n,"-inner-content")]:{color:t,padding:v}})},(0,a.Ay)(e,"var(--antd-arrow-background-color)"),{["".concat(n,"-pure")]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",["".concat(n,"-content")]:{display:"inline-block"}}}]},p=e=>{const{componentCls:n}=e;return{[n]:i.s.map((t=>{const o=e["".concat(t,"6")];return{["&".concat(n,"-").concat(t)]:{"--antd-arrow-background-color":o,["".concat(n,"-inner")]:{backgroundColor:o},["".concat(n,"-arrow")]:{background:"transparent"}}}}))}},m=(0,c.OF)("Popover",(e=>{const{colorBgElevated:n,colorText:t}=e,o=(0,l.h1)(e,{popoverBg:n,popoverColor:t});return[d(o),p(o),(0,r.aB)(o,"zoom-big")]}),(e=>{const{lineWidth:n,controlHeight:t,fontHeight:o,padding:r,wireframe:i,zIndexPopupBase:c,borderRadiusLG:l,marginXS:d,lineType:p,colorSplit:m,paddingSM:u}=e,g=t-o,x=g/2,v=g/2-n,h=r;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:c+30},(0,s.n)(e)),(0,a.Ke)({contentRadius:l,limitVerticalRadius:!0})),{innerPadding:i?0:12,titleMarginBottom:i?0:d,titlePadding:i?"".concat(x,"px ").concat(h,"px ").concat(v,"px"):0,titleBorderBottom:i?"".concat(n,"px ").concat(p," ").concat(m):"none",innerContentPadding:i?"".concat(u,"px ").concat(h,"px"):0})}),{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]})}}]);