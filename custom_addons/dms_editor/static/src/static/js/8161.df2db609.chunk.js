"use strict";(self.webpackChunkfilesdna=self.webpackChunkfilesdna||[]).push([[8161],{2040:(e,s,n)=>{n.d(s,{A:()=>o,Q:()=>d});var i,l,t=n(57528),a=n(33753),r=n(73053);const c=(0,r.A)(a.Ay.div(i||(i=(0,t.A)(["\n  pre {\n    word-break: break-all;\n    width: 100%;\n    white-space: break-spaces;\n  }\n"])))),d=(0,r.A)(a.Ay.div(l||(l=(0,t.A)(["\n  & .pKeyMain {\n    display: flex;\n    align-items: center;\n\n    & .sIcon {\n      padding: 6px;\n      border-radius: 2px;\n      margin-right: 5px;\n      height: 20px;\n      display: flex;\n      align-items: center;\n      box-shadow: none;\n      background-color: #eee;\n\n      &:hover,\n      &:focus,\n      &:active {\n        color: inherit;\n        border-color: inherit;\n        box-shadow: none;\n      }\n\n      & .anticon {\n        font-size: 18px;\n        line-height: 0;\n      }\n    }\n    & .dots {\n      font-size: 21px;\n      line-height: 10px;\n    }\n  }\n"])))),o=c},31554:(e,s,n)=>{n.d(s,{A:()=>v});var i=n(41135),l=n(72612),t=n(87094),a=n(45259),r=n(41988),c=n(9762),d=n(37734),o=n(9950),u=n(18469),m=n(41893),h=n(2040),x=n(44414);const v=function(e){const{visible:s=!1,onClose:n=(()=>{}),bcDetails:v={}}=e,[g,p]=(0,o.useState)({valid:null,loading:!1});return(0,o.useEffect)((()=>{!async function(e){p((e=>({...e,loading:!0})));const s={method:"POST",url:"https://bc2.filesdna.com/api/verify_signature",headers:{"content-type":"application/json"},body:JSON.stringify({id:e.user_id,payload:e.hash_value,signature:e.bc_signature})};try{(await u.A.post(s.url,s.body,s.headers)).data.signerPubKey===e.pub_key?p((e=>({...e,valid:!0,loading:!1}))):p((e=>({...e,valid:!1,loading:!1})))}catch(n){(0,m.A)("error"),p((e=>({...e,loading:!1})))}}(v)}),[v]),(0,x.jsx)(i.A,{title:(0,x.jsx)(d.A,{id:"bc.verifiction"}),open:s,onCancel:n,footer:null,children:(0,x.jsx)(l.A,{spinning:g.loading,style:{alignSelf:"center"},children:(0,x.jsx)(h.A,{children:(0,x.jsx)(t.A,{children:(0,x.jsxs)(a.A,{size:"large",direction:"vertical",children:[(0,x.jsx)(r.A,{children:(0,x.jsx)("h2",{style:{color:null!==g&&void 0!==g&&g.valid?"#0db8ad":"#e1342c"},children:!0===g.valid?(0,x.jsx)(d.A,{id:"bc.verifySuccess"}):!1===g.valid?(0,x.jsx)(d.A,{id:"bc.verifyFailed"}):"-"})}),(0,x.jsx)(r.A,{span:24,children:(0,x.jsxs)(c.A,{layout:"vertical",column:{xs:1,sm:1,md:1,xxl:1},bordered:!0,children:[(0,x.jsx)(c.A.Item,{label:(0,x.jsx)(d.A,{id:"bc.signedHash"}),children:(0,x.jsx)("pre",{children:v.bc_signature||"-"})}),(0,x.jsx)(c.A.Item,{label:(0,x.jsx)(d.A,{id:"bc.hashVal"}),children:(0,x.jsx)("pre",{children:v.hash_value||"-"})}),(0,x.jsx)(c.A.Item,{label:(0,x.jsx)(d.A,{id:"bc.pubKey"}),children:(0,x.jsx)("pre",{children:v.pub_key||"-"})})]})})]})})})})})}},27941:(e,s,n)=>{n.r(s),n.d(s,{default:()=>j});var i=n(37734),l=n(72612),t=n(87094),a=n(41988),r=n(22748),c=n(52160),d=n(41135),o=n(6819),u=n(9950),m=n(59051),h=n.n(m),x=n(41893),v=n(62545),g=n(31554),p=n(44414);function j(){var e,s,n,m;const[j,A]=(0,u.useState)({}),[f,b]=(0,u.useState)(!1),[y,N]=(0,u.useState)(!1),w=window.location.href.split("/").pop(),[k,q]=(0,u.useState)(!1);(0,u.useEffect)((()=>{(async()=>{N(!0);try{const e=await(0,o.Ay)("get-qrcode-doc",{document_id:w,type:"view"},"POST");e.success&&A(e.data),N(!1)}catch(e){N(!1)}})()}),[]);return(0,p.jsx)(l.A,{className:"mh100",spinning:y,style:{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",minHeight:"100vh"},size:"large",children:(0,p.jsxs)("div",{style:{backgroundImage:"url(/dms_editor/static/src/images/QRimage2.png)",height:"".concat(window.innerHeight,"px")},className:"qrtestImg",id:"qrimg",children:[(0,p.jsxs)("div",{style:{width:"100%"},children:[(0,p.jsx)("a",{href:"#",className:"logo-link",style:{display:"inline-block"},children:(0,p.jsx)("img",{src:"/dms_editor/static/src/images/logo2.png"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"qrtext",children:"Document Authenticity"}),(0,p.jsx)("div",{className:"qrtext",children:"Integrity Validation"}),(0,p.jsx)("div",{className:"qrtext",children:"Fraud Protection"})]}),(0,p.jsxs)("div",{className:"form-wrapper",children:[(0,p.jsxs)("div",{className:"form-field dflex",children:[(0,p.jsx)(i.A,{id:"Document Id"}),":"," ",(0,p.jsx)("div",{className:"qrinput",children:null===j||void 0===j?void 0:j.barcode})]}),(0,p.jsxs)("div",{className:"form-field dflex",children:[(0,p.jsx)(i.A,{id:"Document Owner"}),":",(0,p.jsx)("div",{className:"qrinput",children:null===j||void 0===j?void 0:j.email})]}),null!==j&&void 0!==j&&null!==(e=j.signers)&&void 0!==e&&e.length?(0,p.jsxs)("div",{className:"form-field signsec",children:[(0,p.jsxs)(t.A,{gutter:8,children:[(0,p.jsx)(a.A,{className:"gutter-row",span:15,children:(0,p.jsx)("div",{className:"qrscan",children:(0,p.jsx)(i.A,{id:"Signed By"})})}),(0,p.jsx)(a.A,{className:"gutter-row text-right",span:7,children:(0,p.jsx)("div",{className:"qrscan",children:(0,p.jsx)(i.A,{id:"Signed Date"})})}),(0,p.jsx)(a.A,{className:"gutter-row text-right",span:2,children:(0,p.jsx)("div",{className:"qrscan",children:(0,p.jsx)(i.A,{id:"ETH"})})})]}),null===j||void 0===j||null===(s=j.signers)||void 0===s?void 0:s.slice(0,4).map(((e,s)=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(t.A,{gutter:8,style:{alignItems:"center"},children:[(0,p.jsx)(a.A,{className:"gutter-row",span:15,children:(0,p.jsx)("div",{className:"qrscan",children:(0,p.jsx)(r.A,{title:e.email,trigger:"click",children:(0,p.jsx)("div",{className:"mailtext",children:e.email})})})}),(0,p.jsx)(a.A,{className:"gutter-row text-right",span:7,children:(0,p.jsx)("div",{className:"qrscan",children:(0,p.jsx)(r.A,{title:h()(e.updatedAt).format("ll"),trigger:"click",children:(0,p.jsx)("div",{children:h()(e.updatedAt).format("ll")},s)})})}),(null===e||void 0===e?void 0:e.bc_signature)&&(0,p.jsx)(a.A,{className:"gutter-row text-right",span:2,children:(0,p.jsx)("div",{className:"qrscan",children:(0,p.jsx)(r.A,{title:(0,p.jsx)(i.A,{id:"bc.view"}),children:(0,p.jsx)(c.Ay,{onClick:()=>q(!0),shape:"circle",icon:(0,p.jsx)(v.A,{}),size:"small"})})})})]},s),(0,p.jsx)(g.A,{bcDetails:e,onClose:()=>q(!1),visible:k})]})))]}):(0,p.jsxs)("div",{className:"form-field dflex",children:[(0,p.jsx)(i.A,{id:"Completed by"}),":"," ",(0,p.jsx)("div",{className:"qrinput",children:null===j||void 0===j?void 0:j.email})]}),(0,p.jsx)("div",{className:"text-right",children:(null===j||void 0===j||null===(n=j.signers)||void 0===n?void 0:n.length)>4&&(0,p.jsx)(c.Ay,{className:"showmorebtn",size:"small",type:"text",onClick:()=>b(!0),children:(0,p.jsx)(i.A,{id:"Show More"})})})]})]}),(0,p.jsxs)("div",{className:"bottomform",children:[(0,p.jsxs)("div",{className:"qrbtn",children:[(0,p.jsx)(c.Ay,{className:"qrButtons first",size:"small",shape:"round",onClick:()=>{(async e=>{console.log("check url:::",e),fetch(e).then((e=>e.blob())).then((e=>{const s=URL.createObjectURL(e);console.log("check blobbb :::",s),window.open(s,"_blank"),window.open(s,"_blank")||(0,x.A)("error","Unable to open the PDF in a new tab. Please click on the link: ".concat(s))})).catch((e=>{console.log("err:",e)}))})(j.url)},children:(0,p.jsx)(i.A,{id:"Open Document"})}),(0,p.jsx)("br",{})]}),(0,p.jsxs)(d.A,{open:f,onCancel:()=>b(!1),footer:null,centered:!0,className:"qrmodal",children:[(0,p.jsxs)(t.A,{gutter:8,children:[(0,p.jsx)(a.A,{className:"gutter-row",span:15,children:(0,p.jsx)("div",{className:"qrscan",children:(0,p.jsx)(i.A,{id:"Signed By"})})}),(0,p.jsx)(a.A,{className:"gutter-row text-right",span:9,children:(0,p.jsx)("div",{className:"qrscan",children:(0,p.jsx)(i.A,{id:"Signed Date"})})})]}),null===j||void 0===j||null===(m=j.signers)||void 0===m?void 0:m.map(((e,s)=>(0,p.jsxs)(t.A,{gutter:8,children:[(0,p.jsx)(a.A,{className:"gutter-row",span:15,children:(0,p.jsx)("div",{className:"qrscan",children:(0,p.jsx)(r.A,{title:e.email,trigger:"click",children:(0,p.jsx)("div",{className:"mailtext",children:e.email},s)})})}),(0,p.jsx)(a.A,{className:"gutter-row text-right",span:9,children:(0,p.jsx)("div",{className:"qrscan",children:(0,p.jsx)(r.A,{title:h()(e.updatedAt).format("ll"),trigger:"click",children:(0,p.jsx)("div",{children:h()(e.updatedAt).format("ll")},s)})})})]},s)))]})]})]})})}},73053:(e,s,n)=>{n.d(s,{A:()=>l});var i=n(44414);const l=function(e){return function(s){let n="ltr";return"undefined"!==typeof window&&(n=document.getElementsByTagName("html")[0].getAttribute("dir")),(0,i.jsx)(e,{...s,"data-rtl":n})}}},65750:(e,s,n)=>{function i(e){return["small","middle","large"].includes(e)}function l(e){return!!e&&("number"===typeof e&&!Number.isNaN(e))}n.d(s,{X:()=>i,m:()=>l})},82413:(e,s,n)=>{n.d(s,{A:()=>l});var i=n(9950);function l(){const[,e]=i.useReducer((e=>e+1),0);return e}},16661:(e,s,n)=>{n.d(s,{A:()=>r});var i=n(9950),l=n(13511),t=n(82413),a=n(66191);const r=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const s=(0,i.useRef)({}),n=(0,t.A)(),r=(0,a.Ay)();return(0,l.A)((()=>{const i=r.subscribe((i=>{s.current=i,e&&n()}));return()=>r.unsubscribe(i)}),[]),s.current}},45259:(e,s,n)=>{n.d(s,{A:()=>p});var i=n(9950),l=n(48738),t=n.n(l),a=n(50604),r=n(65750),c=n(5741),d=n(93457);const o=i.createContext({latestIndex:0}),u=o.Provider,m=e=>{let{className:s,index:n,children:l,split:t,style:a}=e;const{latestIndex:r}=i.useContext(o);return null===l||void 0===l?null:i.createElement(i.Fragment,null,i.createElement("div",{className:s,style:a},l),n<r&&t&&i.createElement("span",{className:"".concat(s,"-split")},t))};var h=n(44655),x=function(e,s){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&s.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(n[i[l]]=e[i[l]])}return n};const v=i.forwardRef(((e,s)=>{var n,l;const{getPrefixCls:d,space:o,direction:v}=i.useContext(c.QO),{size:g=(null===o||void 0===o?void 0:o.size)||"small",align:p,className:j,rootClassName:A,children:f,direction:b="horizontal",prefixCls:y,split:N,style:w,wrap:k=!1,classNames:q,styles:C}=e,O=x(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[S,I]=Array.isArray(g)?g:[g,g],_=(0,r.X)(I),z=(0,r.X)(S),E=(0,r.m)(I),P=(0,r.m)(S),D=(0,a.A)(f,{keepEmpty:!0}),R=void 0===p&&"horizontal"===b?"center":p,F=d("space",y),[B,H,T]=(0,h.A)(F),K=t()(F,null===o||void 0===o?void 0:o.className,H,"".concat(F,"-").concat(b),{["".concat(F,"-rtl")]:"rtl"===v,["".concat(F,"-align-").concat(R)]:R,["".concat(F,"-gap-row-").concat(I)]:_,["".concat(F,"-gap-col-").concat(S)]:z},j,A,T),M=t()("".concat(F,"-item"),null!==(n=null===q||void 0===q?void 0:q.item)&&void 0!==n?n:null===(l=null===o||void 0===o?void 0:o.classNames)||void 0===l?void 0:l.item);let Q=0;const U=D.map(((e,s)=>{var n,l;null!==e&&void 0!==e&&(Q=s);const t=e&&e.key||"".concat(M,"-").concat(s);return i.createElement(m,{className:M,key:t,index:s,split:N,style:null!==(n=null===C||void 0===C?void 0:C.item)&&void 0!==n?n:null===(l=null===o||void 0===o?void 0:o.styles)||void 0===l?void 0:l.item},e)})),X=i.useMemo((()=>({latestIndex:Q})),[Q]);if(0===D.length)return null;const G={};return k&&(G.flexWrap="wrap"),!z&&P&&(G.columnGap=S),!_&&E&&(G.rowGap=I),B(i.createElement("div",Object.assign({ref:s,className:K,style:Object.assign(Object.assign(Object.assign({},G),null===o||void 0===o?void 0:o.style),w)},O),i.createElement(u,{value:X},U)))}));const g=v;g.Compact=d.Ay;const p=g}}]);