"use strict";(self.webpackChunkfilesdna=self.webpackChunkfilesdna||[]).push([[590],{19392:(n,e,t)=>{t.d(e,{A:()=>b});var a,r,o=t(52160),i=t(73053),l=t(57528),s=t(32141),d=t(1868),c=t(85908);const p=(m=o.Ay,(0,s.Ay)(m)(a||(a=(0,l.A)(["\n  &.ant-btn {\n    display: inline-block;\n    margin-bottom: 0;\n    font-weight: 500;\n    text-align: center;\n    -ms-touch-action: manipulation;\n    touch-action: manipulation;\n    cursor: pointer;\n    background-image: none;\n    // border: 1px solid transparent;\n    white-space: nowrap;\n    line-height: 1.5;\n    padding: 0 25px;\n    font-size: 14px;\n    border-radius: 4px;\n    height: 36px;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    position: relative;\n    // color: ",";\n    // border-color: ",";\n    ",";\n\n    // &:hover {\n    //   border-color: ",";\n    //   color: ",";\n    // }\n    // &:focus {\n    //   color: ",";\n    //   border-color: ",";\n    // }\n\n    > .anticon + span,\n    > span + .anticon {\n      margin: ",";\n    }\n\n    .anticon-right {\n      transform: ",";\n    }\n\n    .anticon-left {\n      transform: ",";\n    }\n\n    &.ant-btn-primary {\n      // background-color: ",";\n      // border-color: ",";\n\n      // &:hover {\n      //   background-color: ",";\n      //   border-color: ",";\n      //   color: #fff;\n      // }\n    }\n\n    &.ant-btn-sm {\n      padding: 0 15px;\n      height: 28px;\n      font-size: 12px;\n\n      &.ant-btn-loading:not(.ant-btn-circle):not(.ant-btn-circle-outline) {\n        padding: ",";\n        .anticon {\n          margin: ",";\n        }\n      }\n    }\n\n    &.ant-btn-lg {\n      padding: 0 35px;\n      font-size: 14px;\n      height: 42px;\n    }\n\n    &.ant-btn-primary {\n      color: #ffffff;\n    }\n\n    // &.ant-btn-dashed {\n    //   border-style: dashed;\n    //   border-color: ",";\n\n    //   &:hover {\n    //     color: ",";\n    //     border-color: ",";\n    //   }\n    // }\n\n    &.ant-btn-danger {\n      background-color: ",";\n      border-color: ",";\n      color: #ffffff;\n\n      &:hover {\n        background-color: ",";\n        border-color: ",";\n      }\n\n      &.ant-btn-background-ghost {\n        color: ",";\n        background-color: transparent;\n        border-color: ",";\n\n        &:hover {\n          color: ",";\n          border-color: ",";\n        }\n      }\n    }\n\n    &.ant-btn-circle,\n    &.ant-btn-circle-outline {\n      width: 35px;\n      padding: 0;\n      font-size: 14px;\n      border-radius: 50%;\n      height: 35px;\n\n      &.ant-btn-sm {\n        padding: 0;\n        height: 28px;\n        width: 28px;\n        font-size: 12px;\n      }\n\n      &.ant-btn-lg {\n        padding: 0;\n        font-size: 14px;\n        height: 42px;\n        width: 42px;\n      }\n    }\n\n    &.ant-btn.disabled,\n    &.ant-btn[disabled],\n    &.ant-btn.disabled:hover,\n    &.ant-btn[disabled]:hover,\n    &.ant-btn.disabled:focus,\n    &.ant-btn[disabled]:focus,\n    &.ant-btn.disabled:active,\n    &.ant-btn[disabled]:active,\n    &.ant-btn.disabled.active,\n    &.ant-btn[disabled].active {\n      color: ",";\n      background-color: #f7f7f7;\n      border-color: ",";\n      cursor: not-allowed;\n    }\n\n    &.ant-btn-loading:not(.ant-btn-circle):not(.ant-btn-circle-outline)\n      .anticon {\n      margin: ",";\n    }\n\n    &.isoButton {\n      display: inline-block;\n      margin-bottom: 0;\n      font-weight: 500;\n      text-align: center;\n      -ms-touch-action: manipulation;\n      touch-action: manipulation;\n      cursor: pointer;\n      background-image: none;\n      border: 0;\n      white-space: nowrap;\n      line-height: 1.5;\n      padding: 0 25px;\n      font-size: 13px;\n      border-radius: 4px;\n      height: 35px;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n      -ms-user-select: none;\n      user-select: none;\n      position: relative;\n      color: #ffffff;\n      background-color: ",";\n      ",";\n\n      &:hover {\n        background-color: ",";\n      }\n\n      &.isoBtnSm {\n        padding: 0 15px;\n        height: 28px;\n        font-size: 12px;\n      }\n\n      &.isoBtnLg {\n        padding: 0 35px;\n        font-size: 14px;\n        height: 42px;\n      }\n    }\n\n    &.regularTxt {\n      color: ",";\n      padding: 0px !important;\n    }\n  }\n\n  + .ant-btn-group {\n    margin-left: "," !important;\n    margin-right: "," !important;\n  }\n"])),(0,d.palette)("text",1),(0,d.palette)("border",0),(0,c.kY)(),(0,d.palette)("primary",0),(0,d.palette)("primary",0),(0,d.palette)("primary",0),(0,d.palette)("primary",0),(n=>"rtl"===n["data-rtl"]?"0 0.5em 0 0":"0 0 0 0.5em"),(n=>"rtl"===n["data-rtl"]?"rotate(180deg)":"rotate(0)"),(n=>"rtl"===n["data-rtl"]?"rotate(180deg)":"rotate(0)"),(0,d.palette)("primary",0),(0,d.palette)("primary",0),(0,d.palette)("primary",10),(0,d.palette)("primary",10),(n=>"rtl"===n["data-rtl"]?"0 24px 0 15px":"0 15px 0 24px"),(n=>"rtl"===n["data-rtl"]?"0 -17px 0 0":"0 0 0 -17px"),(0,d.palette)("border",1),(0,d.palette)("primary",0),(0,d.palette)("primary",0),(0,d.palette)("error",0),(0,d.palette)("error",0),(0,d.palette)("error",2),(0,d.palette)("error",2),(0,d.palette)("error",0),(0,d.palette)("error",0),(0,d.palette)("error",2),(0,d.palette)("error",2),(0,d.palette)("grayscale",2),(0,d.palette)("border",0),(n=>"rtl"===n["data-rtl"]?"0 -14px 0 0":"0 0 0 -14px"),(0,d.palette)("primary",0),(0,c.kY)(),(0,d.palette)("primary",2),(0,d.palette)("text",3),(n=>"rtl"===n["data-rtl"]?"0":"-1px"),(n=>"rtl"===n["data-rtl"]?"-1px":"0")));var m;const u=(0,i.A)(p),h=(n=>(0,s.Ay)(n)(r||(r=(0,l.A)(["\n  &.ant-btn-group {\n    .ant-btn {\n      margin: 0;\n      margin-right: 0;\n      display: inline-block;\n      margin-bottom: 0;\n      font-weight: 500;\n      text-align: center;\n      -ms-touch-action: manipulation;\n      touch-action: manipulation;\n      cursor: pointer;\n      background-image: none;\n      border: 1px solid transparent;\n      border-color: ",";\n      white-space: nowrap;\n      line-height: 1.5;\n      padding: 0 8px;\n      font-size: 14px;\n      border-radius: 0;\n      height: 36px;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n      -ms-user-select: none;\n      user-select: none;\n      position: relative;\n      ",";\n\n      &:hover {\n        border-color: ",";\n      }\n\n      // &.ant-btn-dashed {\n      //   border-style: dashed;\n\n      //   &:hover {\n      //     border-color: ",";\n      //   }\n      // }\n\n      &.ant-btn-primary {\n        border-color: ",";\n\n        &:hover {\n          border-color: ",";\n        }\n      }\n    }\n\n    > .ant-btn:first-child:not(:last-child) {\n      border-radius: ",";\n    }\n\n    > .ant-btn:last-child:not(:first-child) {\n      border-radius: ",";\n    }\n\n    .ant-btn-primary:last-child:not(:first-child),\n    .ant-btn-primary + .ant-btn-primary {\n      border-left-color: ",";\n      border-right-color: ",";\n    }\n\n    .ant-btn-primary:first-child:not(:last-child) {\n      border-left-color: ",";\n      border-right-color: ",";\n    }\n\n    .ant-btn + .ant-btn,\n    + .ant-btn {\n      margin-left: "," !important;\n      margin-right: "," !important;\n    }\n\n    &.ant-btn-group-lg {\n      > .ant-btn {\n        padding: 0 35px;\n        font-size: 14px;\n        height: 42px;\n      }\n    }\n\n    &.ant-btn-group-sm {\n      > .ant-btn {\n        padding: 0 15px;\n        height: 28px;\n        font-size: 12px;\n      }\n    }\n  }\n\n  &.ant-btn-group + &.ant-btn-group {\n    margin-left: "," !important;\n    margin-right: "," !important;\n  }\n"])),(0,d.palette)("border",1),(0,c.kY)(),(0,d.palette)("primary",0),(0,d.palette)("primary",0),(0,d.palette)("primary",0),(0,d.palette)("primary",10),(n=>"rtl"===n["data-rtl"]?"0 4px 4px 0":"4px 0 0 4px"),(n=>"rtl"===n["data-rtl"]?"4px 0 0 4px":"0 4px 4px 0"),(n=>"rtl"===n["data-rtl"]?(0,d.palette)("primary",0):(0,d.palette)("primary",2)),(n=>"rtl"===n["data-rtl"]?(0,d.palette)("primary",2):(0,d.palette)("primary",0)),(n=>"rtl"===n["data-rtl"]?(0,d.palette)("primary",2):(0,d.palette)("primary",0)),(n=>"rtl"===n["data-rtl"]?(0,d.palette)("primary",0):(0,d.palette)("primary",2)),(n=>"rtl"===n["data-rtl"]?"0":"-1px"),(n=>"rtl"===n["data-rtl"]?"-1px":"0"),(n=>"rtl"===n["data-rtl"]?"0":"-1px"),(n=>"rtl"===n["data-rtl"]?"-1px":"0")))(p.Group),b=((0,i.A)(h),u)},30590:(n,e,t)=>{t.r(e),t.d(e,{default:()=>R});var a=t(9950),r=t(41397),o=t(59051),i=t.n(o),l=t(83662),s=t(12036),d=t(19392),c=t(37734),p=t(10597),m=t(6819),u=t(74283),h=t(8187),b=t(34373),g=t(22748),x=t(73149),f=t(35621),y=t(50918),w=t(77645),v=t(23072),k=t(12678),A=t(24513),j=t(13239),C=t(20265),_=t(1158),L=t(93347),N=t(49998);const z=n=>{let{filters:e,restrictFlt:t=[]}=n;const o=(0,r.isArray)(t)?t:[];(0,a.useEffect)((()=>{const n=(0,r.isObject)(e)?(0,r.omitBy)(e,((n,e)=>!n||!(0,r.isNumber)(n)&&(0,r.isEmpty)(n)||o.includes(e))):{};u.A.stringify(n,{arrayFormat:"comma",encode:!1}),(0,r.isEmpty)(n)}),[e])};var B=t(44070);const S=x.A;var D,E=t(57528),P=t(32141),I=t(1868),T=t(73053);const M=P.Ay.div(D||(D=(0,E.A)(["\n  & .deleteCircle,\n  & .deleteCircle:hover {\n    color: ",";\n    border-width: 0px;\n  }\n"])),(0,I.palette)("error",0)),F=(0,T.A)(M);var K=t(44414);function O(n){const{apiUrl:e,apiData:t,title:a,fetchData:o=(()=>{}),setState:i=(()=>{}),onConfirm:s=(()=>{}),btnId:p,btnProps:u={},deleteCallback:h,disabled:b=!1}=n;return(0,K.jsx)(F,{children:(0,K.jsx)(S,{title:a,okText:(0,K.jsx)(c.A,{id:"common.deleteCap"}),okButtonProps:{id:"delete-item"},cancelText:(0,K.jsx)(c.A,{id:"common.no"}),onConfirm:async function(){if((0,r.isObject)(t)&&!(0,r.isEmpty)(t)){i((n=>({...n,loading:!0})));try{(new FormData).append("id",t.document_id),console.log(t);let n=await(0,m.Ay)(e,t,"POST");n="form"===t.type?n.data:n;let a="error";n.success?(h&&h(),a="success",o()):i((n=>({...n,loading:!1}))),setTimeout((()=>{(0,l.A)(a,n.message)}),200)}catch(n){i((n=>({...n,loading:!1}))),(0,l.A)("error")}}else s()},className:"deleteBtn",onCancel:null,placement:"topRight",disabled:b,children:(0,K.jsx)("div",{children:(0,K.jsx)(d.A,{id:p,shape:"circle",danger:!0,icon:(0,K.jsx)(B.A,{}),className:"deleteCircle ".concat(b?" disabled":""),...u})})})})}var Y=t(98341),V=t(12547);const U=function(n){let{action:e=(()=>{}),condition:t,type:o=[]}=n;(0,a.useEffect)((()=>{const n={},a=!(0,r.isFunction)(t)||t(n);!(0,r.isEmpty)(n)&&(0,r.isArray)(o)&&a&&e(n)}),[])},G=(0,a.lazy)((()=>Promise.all([t.e(650),t.e(463)]).then(t.bind(t,10463)))),H={"shared-workflows":{disableCreate:!0,title:"workflow.shared",apiData:{url:"workflow/index",method:"get"}}};function R(){const n=(0,N.A)(),e=(0,r.isArray)(n)?n[0]:"",t="shared-workflows"===e,o=H[e]||{},B=window.location.search,S=u.A.parse(B),D=(0,Y.useDispatch)(),E=(0,Y.useSelector)((n=>n.Auth.userData)),{changeDocumentId:P}=V.A,I=(0,r.isObject)(E)?E:{},[T,M]=a.useState({docs:[],docLoading:!0}),[F,R]=a.useState(S),[q,J]=a.useState(null),[Q,W]=a.useState(0),[X,Z]=a.useState({}),[$,nn]=a.useState({createLoading:!1,completeLoading:!1,visibleModal:!1,breadcrumb:[{title:"Home",id:0}]});async function en(n,e){var a;M((n=>({...n,docLoading:"disable-reload"!==e||(0,r.isEmpty)(T.docs)}))),t&&(n={...n,status:"Published"}),"undefined"===typeof(null===(a=n)||void 0===a?void 0:a.folder)&&(n={...n,folder:Q});try{var i,s;const e=await(0,m.Ay)((null===o||void 0===o||null===(i=o.apiData)||void 0===i?void 0:i.url)||"workflow/index",n,(null===o||void 0===o||null===(s=o.apiData)||void 0===s?void 0:s.method)||"get");if(e.success&&(0,r.isArray)(e.data)){var d;M({docs:(0,r.isArray)(e.data)?null!==(d=n)&&void 0!==d&&d.folder?[{name:"Back",type:"folder"}].concat(e.data):e.data:[],docLoading:!1});const t=F&&F.pagination?{...F.pagination}:{};t.total=e.total_count||0,t.pageSize=e.per_page||5,t.current=e.page||1,Z(t)}else M({docs:[],docLoading:!1})}catch(c){M({docs:[],docLoading:!1}),(0,l.A)("error")}}function tn(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n.hash_key){const e=n.user_id===I.user_id,a=$.completeLoading===n.hash_key,r="Published"!==n.status||t,o="Completed"===n.status,i=e&&!t,s="folder"===n.type;return(0,K.jsxs)(K.Fragment,{children:[i&&!s&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{onClick:()=>{document.getElementById("root-workflow").setAttribute("data-path","/edit-workflow/".concat(n.hash_key)),D(P("/edit-workflow/".concat(n.hash_key)))},children:(0,K.jsx)(g.A,{title:(0,K.jsx)(c.A,{id:"workflow.".concat(["Published","Completed"].includes(n.status)?"viewProject":"viewEditProject")}),children:(0,K.jsx)(d.A,{shape:"circle",icon:["Published","Completed"].includes(n.status)?(0,K.jsx)(k.A,{}):(0,K.jsx)(A.A,{}),className:"invoiceViewBtn"})})}),!o&&(0,K.jsx)(x.A,{title:(0,K.jsx)(c.A,{id:"workflow.sureComplete"}),okText:(0,K.jsx)(c.A,{id:"workflow.complete"}),cancelText:(0,K.jsx)(c.A,{id:"common.no"}),onConfirm:()=>async function(n){nn((e=>({...e,completeLoading:n})));try{(await(0,m.Ay)("workflow/complete",{hash_key:n||""},"post")).success?(en(),nn((n=>({...n,completeLoading:!0})))):((0,l.A)("error"),nn((n=>({...n,completeLoading:!0}))))}catch(e){(0,l.A)("error"),nn((n=>({...n,completeLoading:!0})))}}(n.hash_key),className:"deleteBtn",onCancel:null,disabled:a||r,children:(0,K.jsx)(g.A,{placement:"bottom",title:(0,K.jsx)(c.A,{id:"workflow.completeProject"}),children:(0,K.jsx)(d.A,{disabled:r,shape:"circle",loading:a,icon:(0,K.jsx)(j.A,{}),className:"invoiceViewBtn",style:{marginLeft:8}})})})]}),i&&(0,K.jsx)(O,{btnId:"delete-confirm-card",apiUrl:"workflow/delete",apiData:{workflow_id:n.id},fetchData:()=>en(F),setState:n=>{let{loading:e}=n;return M((n=>({...n,docLoading:e})))}})]})}return"-"}z({filters:F}),U({type:[t?"update_workflow_shared_list":"update_workflow_list"],action:()=>en({...F},"disable-reload")}),(0,a.useEffect)((()=>{en(F)}),[t]);const an=[{key:"name",title:(0,K.jsx)(c.A,{id:"workflow.projectName"}),dataIndex:"name",rowKey:"name",className:"fullname-cell",render:(n,e)=>"folder"===e.type?(0,K.jsxs)("h4",{style:{cursor:"pointer"},onClick:()=>{const t="Back"===n?(0,r.cloneDeep)($.breadcrumb[$.breadcrumb.length-2]).id:e.id;W(t),nn((t=>({...t,breadcrumb:"Back"===n?t.breadcrumb.slice(0,-1):t.breadcrumb.concat({title:e.name,id:e.id})}))),en({folder:t})},children:["Back"===n?(0,K.jsx)(C.A,{}):(0,K.jsx)(_.A,{})," ",n]}):(0,K.jsxs)("div",{onClick:()=>{document.getElementById("root-workflow").setAttribute("data-path","/edit-workflow/".concat(e.hash_key)),D(P("/edit-workflow/".concat(e.hash_key)))},children:[(0,K.jsx)("span",{className:"label",children:(0,K.jsx)(c.A,{id:"workflow.projectName"})}),(0,K.jsx)("span",{className:"mobile-lbl-val",children:(0,K.jsx)("div",{className:"nameEmailMain",children:(0,K.jsx)(g.A,{className:"iNum",placement:"topLeft",title:n,children:n})})})]})},{key:"createdAt_sort",title:(0,K.jsx)(c.A,{id:"common.createdAt"}),dataIndex:"createdAt",rowKey:"createdAt",width:180,render:n=>(0,K.jsxs)("div",{children:[(0,K.jsx)("span",{className:"label",children:(0,K.jsx)(c.A,{id:"common.createdAt"})}),(0,K.jsx)("span",{className:"mobile-lbl-val",children:n?i()(n).format("lll"):"-"})]})},{key:"user_status",title:(0,K.jsx)(c.A,{id:"common.status"}),dataIndex:"user_status",rowKey:"user_status",width:150,render:(n,e)=>{if("folder"===e.type)return(0,K.jsx)(K.Fragment,{children:"\xa0"});const a=t?e.user_status:e.status,r=L.oj.find((n=>n.name===a)),o=r?r.color:"";return(0,K.jsxs)("div",{children:[(0,K.jsx)("span",{className:"label",children:(0,K.jsx)(c.A,{id:"common.status"})}),(0,K.jsx)("span",{className:"mobile-lbl-val",children:a?(0,K.jsx)(f.A,{color:o,children:(0,K.jsx)(c.A,{id:a.toLowerCase()})},a):"-"})]})}},{title:(0,K.jsx)(c.A,{id:"common.action"}),dataIndex:"edit",rowKey:"edit",width:160,fixed:"right",className:"action-cell",render:(n,e)=>(0,K.jsx)("div",{className:"isoInvoiceBtnView",children:tn(e)})}];return(0,K.jsxs)(s.A,{children:[(0,K.jsxs)(p.az,{children:[(0,K.jsx)(a.Suspense,{fallback:(0,K.jsx)("div",{}),children:(0,K.jsx)(G,{addLoading:$.createLoading,onAdd:n=>o.disableCreate?null:()=>{nn((e=>({...e,visibleModal:n})))},onChange:function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const t={...F,page:1};e&&(t[e]=n),R(t),en(t)},filters:F,sharedProject:t})}),(0,K.jsx)(p.Ox,{children:(0,K.jsx)("div",{className:"isoInvoiceTable",children:(0,K.jsx)(b.A,{scroll:{x:1400},loading:T.docLoading,rowKey:n=>n.id,dataSource:T.docs,onChange:function(n,e,t){const a={...F};t&&t.columnKey&&(a[t.columnKey]=(0,h.vD)(t.order)),n&&(a.page=n.current,Z(n)),R(a),en(a)},columns:an,pagination:{...X,showSizeChanger:!1},className:"invoiceListTable",showSorterTooltip:!1})})})]}),(0,K.jsxs)(y.A,{title:"Create ".concat($.visibleModal),open:$.visibleModal,onOk:async function(){if(q&&""!==q)try{var n;const a=await(0,m.Ay)("workflow/create-work-flow",{name:q,type:$.visibleModal,folder:Q},"post");var e,t;if(a.success&&null!==a&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.hash_key)if("folder"!==$.visibleModal)document.getElementById("root-workflow").setAttribute("data-path","/edit-workflow/".concat((null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.hash_key)||"")),D(P("/edit-workflow/".concat((null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.hash_key)||"")));else en();else(0,l.A)("error",a.message);nn((n=>({...n,createLoading:!1})))}catch(a){(0,l.A)("error")}else(0,l.A)("error","You should enter name.")},onCancel:()=>nn((n=>({...n,visibleModal:!1}))),children:[(0,K.jsxs)("h4",{style:{margin:"20px 0"},children:["Please enter new ",$.visibleModal," name"]}),(0,K.jsx)(w.A,{value:q,onChange:n=>J(n.target.value)}),(0,K.jsx)(v.A,{})]})]})}}}]);