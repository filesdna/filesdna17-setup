(self.webpackChunkfilesdna=self.webpackChunkfilesdna||[]).push([[443],{21270:(n,e,i)=>{"use strict";i.d(e,{A:()=>a});var s=i(69466),t=i(44414);function a(n){let{id:e,style:i,children:a,className:r,autoHide:o=!0,autoHeight:l,autoHeightMin:d=0,autoHeightMax:c=200,sRef:x,...g}=n;return(0,t.jsx)(s.ur,{ref:x,id:e,className:r,style:i,autoHide:o,autoHideTimeout:1e3,autoHideDuration:200,thumbMinSize:30,universal:!0,autoHeight:l,autoHeightMin:d,autoHeightMax:c,...g,children:a})}},39443:(n,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>pn});var s,t,a,r,o,l=i(9950),d=i(50918),c=i(37734),x=i(23561),g=i(72612),p=i(35398),m=i(87094),u=i(41988),h=i(1203),f=i(77645),j=i(23072),y=i(68902),b=i(41397),A=i(83662),v=i(6819),w=i(10597),U=i(57528),S=i(32141),N=i(1868),I=i(73053);const R=S.Ay.div(s||(s=(0,U.A)(["\n  .signForm {\n    background-color: #f4f4f4;\n    width: 100%;\n    border: 1px dashed rgb(221, 221, 221);\n    padding: 10px;\n    border-radius: 5px;\n  }\n  .signPad {\n    width: 100%;\n  }\n  .absolute-cross {\n    position: absolute;\n    bottom: 45px;\n    left: 12px;\n    color: #999;\n    font-size: 12px;\n  }\n  .footerTxt {\n    text-align: center;\n    color: rgb(153, 153, 153);\n    font-size: 12px;\n  }\n  .clearTxt {\n    position: absolute;\n    right: 15px;\n    top: 10px;\n    color: ",";\n    padding: 0px 3px;\n    border: 1px solid ",";\n    border-radius: 2px;\n    font-weight: bold;\n    font-size: 13px;\n    cursor: pointer;\n  }\n  position: relative;\n  // margin-right: 5px;\n"])),(0,N.palette)("primary",0),(0,N.palette)("primary",0));S.Ay.div(t||(t=(0,U.A)(["\n  height: 26px;\n  width: 26px;\n  border-radius: 50%;\n  border: 1px solid #ddd;\n  text-align: center;\n  margin-left: 26px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ",";\n}\n"])),(0,N.palette)("primary",0)),S.Ay.div(a||(a=(0,U.A)(["\n  background-color: rgb(244, 244, 244);\n  // border: 1px dashed rgb(204, 204, 204);\n  justify-content: center;\n  align-items: center;\n  // display: flex;\n  height: 234px;\n  border-radius: 5px;\n  @media (max-width: 768px) {\n    margin-bottom: 10px;\n  }\n\n  & .dragWrapper {\n    background-color: #f4f4f4 !important;\n    padding: 20px;\n    position: relative;\n    border: none;\n\n    &.verifyDrag {\n      min-width: 200px;\n      height: 234px;\n      padding: 40px 0 15px 0px;\n\n      & > span {\n        padding: 0px !important;\n      }\n\n      & .ant-upload-drag-container {\n        text-align: center;\n      }\n\n      & .verify-container {\n        img {\n          max-width: 100%;\n        }\n      }\n      & .changeTxt {\n        position: absolute;\n        right: 15px;\n        top: 10px;\n        color: ",";\n        padding: 0px 3px;\n        border: 1px solid ",";\n        border-radius: 2px;\n        font-weight: bold;\n        font-size: 13px;\n        cursor: pointer;\n      }\n    }\n  }\n"])),(0,N.palette)("primary",0),(0,N.palette)("primary",0));(0,I.A)(S.Ay.div(o||(o=(0,U.A)(["\n  ","\n"])),function(){let n="";for(let e=1;e<=10;e+=1){const s=i(1531)("./sign".concat(e,".woff"));n+="\n      @font-face {\n        font-family: 'Sign".concat(e,"';\n        font-style: normal;\n        font-weight: 300;\n        font-display: swap;\n        src: url('").concat(s,"');\n        src: url('").concat(s,"') format('woff');\n      }\n    ")}return(0,S.AH)(r||(r=(0,U.A)(["\n    ","\n  "])),n)}()));var k,D,L,T,C,F,_=i(8187),H=i(35676),z=i(5755),M=i(21270),E=i(13239);const O=S.Ay.div(k||(k=(0,U.A)(["\n  .signForm {\n    background-color: #f4f4f4;\n    width: 100%;\n    border: 1px dashed rgb(221, 221, 221);\n    padding: 10px;\n    border-radius: 5px;\n\n    & .ant-divider-horizontal {\n      margin: -3px 0 10px !important;\n    }\n  }\n  .signPad {\n    width: 100%;\n    min-height: 150px;\n  }\n  .absolute-cross {\n    position: absolute;\n    bottom: 25px;\n    left: 12px;\n    color: #999;\n    font-size: 12px;\n  }\n  .footerTxt {\n    text-align: center;\n    color: rgb(153, 153, 153);\n    font-size: 12px;\n  }\n  .clearTxt {\n    position: absolute;\n    right: 15px;\n    top: 10px;\n    color: ",";\n    padding: 0px 3px;\n    border: 1px solid ",";\n    border-radius: 2px;\n    font-weight: bold;\n    font-size: 13px;\n    cursor: pointer;\n  }\n  position: relative;\n  // margin-right: 5px;\n"])),(0,N.palette)("primary",0),(0,N.palette)("primary",0)),P=S.Ay.div(D||(D=(0,U.A)(["\n  height: 26px;\n  width: 26px;\n  border-radius: 50%;\n  border: 1px solid #ddd;\n  text-align: center;\n  margin-left: 26px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ",";\n\n  @media only screen and (max-width: 768px) {\n    margin-left: 7px;\n  }\n  @media only screen and (max-width: 580px) {\n    height: 22px;\n    width: 22px;\n  }\n}\n"])),(0,N.palette)("primary",0)),V=S.Ay.div(L||(L=(0,U.A)(["\n  background-color: rgb(244, 244, 244);\n  // border: 1px dashed rgb(204, 204, 204);\n  justify-content: center;\n  align-items: center;\n  // display: flex;\n  height: 234px;\n  border-radius: 5px;\n  @media (max-width: 768px) {\n    margin-bottom: 10px;\n  }\n\n  & .dragWrapper {\n    background-color: #f4f4f4 !important;\n    padding: 10px;\n    min-width: 100px;\n    position: relative;\n    border: none;\n\n    & .ant-upload-drag-container {\n      text-align: center;\n      cursor: pointer;\n\n      & .ant-upload-drag-icon {\n        & .anticon {\n          color: #2dc4b5;\n          font-size: 48px;\n        }\n      }\n\n      & .ant-upload-text {\n        margin: 0 0 4px;\n        font-size: 16px;\n      }\n    }\n\n    &.verifyDrag {\n      min-width: 200px;\n      height: 234px;\n      padding: 40px 0 15px 0px;\n\n      & > span {\n        padding: 0px !important;\n      }\n\n      & .ant-upload-drag-container {\n        text-align: center;\n        cursor: pointer;\n      }\n\n      & .pdfContainer {\n        max-width: 50%;\n        border: 1px dashed #666;\n        padding: 10px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 130px;\n        height: 130px;\n        margin: 0 auto;\n        background: #eee;\n        flex-direction: column;\n\n        & .viewTxt {\n          font-weight: bold;\n          margin-top: 10px;\n        }\n\n        & .anticon {\n          font-size: 39px;\n          color: ",";\n        }\n\n        &:hover {\n          border-color: ",";\n          & .anticon {\n            color: ",";\n          }\n        }\n      }\n\n      & .verify-container {\n        img {\n          max-width: 100%;\n        }\n      }\n      & .changeTxt {\n        position: absolute;\n        right: 15px;\n        top: 10px;\n        color: ",";\n        padding: 0px 3px;\n        border: 1px solid ",";\n        border-radius: 2px;\n        font-weight: bold;\n        font-size: 13px;\n        cursor: pointer;\n      }\n    }\n  }\n"])),(0,N.palette)("secondary",2),(0,N.palette)("primary",0),(0,N.palette)("primary",0),(0,N.palette)("primary",0),(0,N.palette)("primary",0)),B=(0,I.A)(S.Ay.div(T||(T=(0,U.A)(["\n  & .controlMain {\n    display: flex;\n    justify-content: start;\n    & > div {\n      padding-right: 10px;\n      & > span {\n        display: inline-block;\n        margin-right: 3px;\n\n        &:after {\n          content: ':';\n          margin-left: 3px;\n        }\n      }\n    }\n  }\n"]))));const Y=(0,I.A)(S.Ay.div(F||(F=(0,U.A)(["\n  ","\n"])),function(){let n="";for(let e=1;e<=10;e+=1){const s=i(1531)("./sign".concat(e,".woff"));n+="\n      @font-face {\n        font-family: 'Sign".concat(e,"';\n        font-style: normal;\n        font-weight: 300;\n        font-display: swap;\n        src: url('").concat(s,"');\n        src: url('").concat(s,"') format('woff');\n      }\n    ")}return(0,S.AH)(C||(C=(0,U.A)(["\n    ","\n  "])),n)}()));var W=i(44414);const K=(0,_.cI)(11);const q=function(n){const{state:e={},selectedSign:i={},setSelectedSign:s=(()=>{}),name:t="",initials:a="",renderItem:r=null,pType:o="",dataSource:l,fullHeight:d}=n,x=window.innerHeight||800;function g(n,i){return(0,W.jsxs)(w.YV,{noDesign:e.noDesign,children:[(0,W.jsx)("span",{className:"title-top",children:e.signBy&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(c.A,{id:"signature.signedBy"}),":"," ",(0,W.jsx)("span",{children:t||""})," "]})}),(0,W.jsx)("div",{className:"sign-container",children:(0,W.jsx)("span",{className:"sign ".concat(n?"default":""),style:{fontFamily:i},children:t})}),(0,W.jsxs)("div",{className:"extraInfo",children:[e.signDate&&(0,W.jsxs)("span",{children:[e.signDate," (UTC)"]}),e.signReason&&(0,W.jsx)("span",{children:e.signReason})]})]})}function h(n){return(0,W.jsxs)(w.YV,{noDesign:e.noDesign,children:[(0,W.jsxs)("span",{className:"title-top",children:[(0,W.jsx)(c.A,{id:"signature.initials"}),":"]}),(0,W.jsx)("div",{className:"sign-container",children:(0,W.jsx)("span",{className:"sign",style:{fontFamily:n},children:a})})]})}function f(n){const e=0===n,i=e?void 0:"Sign".concat(n);return o?"initial"===o?(0,W.jsx)(u.A,{xs:20,sm:14,children:h(i)}):(0,W.jsx)(u.A,{xs:20,sm:14,children:g(e,i)}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(u.A,{xs:14,children:g(e,i)}),(0,W.jsx)(u.A,{xs:6,children:h(i)})]})}return(0,W.jsx)(m.A,{children:(0,W.jsx)(u.A,{xs:24,children:(0,W.jsx)(Y,{children:(0,W.jsx)(M.A,{style:{minHeight:"100%",height:d?x:x-x/2},children:(0,W.jsx)(p.A,{className:"chooseList",itemLayout:"horizontal",dataSource:l||K,renderItem:r||function(n,e){const t=e===i.signature_font;return(0,W.jsx)(p.A.Item,{onClick:()=>{s({signature_font:e})},style:{backgroundColor:t?"".concat(z.A.colors.primaryColor,"06"):"#0000"},children:(0,W.jsx)(p.A.Item.Meta,{title:(0,W.jsxs)(m.A,{style:{alignItems:"center"},children:[(0,W.jsx)(u.A,{xs:3,children:(0,W.jsx)(P,{children:t&&(0,W.jsx)(E.A,{})})}),f(e)]})})})}})})})})})};var G=i(94118),J=i(44051),Q=i.n(J);const X=function(n){let{trimmedSignURL:e,trimmedInitURL:i,setState:s,pType:t=""}=n;const a=l.createRef(),r=l.createRef(),o=n=>{(a&&a.current||r&&r.current)&&s("sign"===n?n=>({...n,trimmedSignURL:a.current.getTrimmedCanvas().toDataURL("image/png")}):n=>({...n,trimmedInitURL:r.current.getTrimmedCanvas().toDataURL("image/png")}))};function d(){return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"footerTxt mb5",children:(0,W.jsx)(c.A,{id:"signature.drawInitial"})}),(0,W.jsx)(O,{children:(0,W.jsxs)("div",{className:"signForm",children:[(0,W.jsx)(Q(),{canvasProps:{className:"signPad"},ref:r,velocityFilterWeight:.9,throttle:20,onEnd:()=>{o("initials")}}),(0,W.jsx)("span",{className:"absolute-cross",children:(0,W.jsx)(G.A,{})}),(0,W.jsx)(j.A,{style:{margin:"10px 0"}}),i&&(0,W.jsx)("div",{className:"clearTxt",onClick:()=>{r&&r.current&&(r.current.clear(),s((n=>({...n,trimmedInitURL:""}))))},children:(0,W.jsx)(c.A,{id:"common.clear"})})]})})]})}function x(){return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"footerTxt mb5",children:(0,W.jsx)(c.A,{id:"signature.drawSignature"})}),(0,W.jsx)(O,{children:(0,W.jsxs)("div",{className:"signForm",children:[(0,W.jsx)(Q(),{canvasProps:{className:"signPad"},ref:a,velocityFilterWeight:.9,throttle:20,onEnd:()=>{o("sign")},clearOnResize:!1}),(0,W.jsx)("span",{className:"absolute-cross",children:(0,W.jsx)(G.A,{})}),(0,W.jsx)(j.A,{style:{margin:"10px 0"}}),e&&(0,W.jsx)("div",{className:"clearTxt",onClick:()=>{a&&a.current&&(a.current.clear(),s((n=>({...n,trimmedSignURL:""}))))},children:(0,W.jsx)(c.A,{id:"common.clear"})})]})})]})}return(0,W.jsx)(m.A,{justify:"space-between",gutter:[12,0],children:t?(0,W.jsx)(u.A,{xs:24,sm:"initial"===t?8:16,children:"initial"===t?d():x()}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(u.A,{xs:24,sm:16,children:x()}),(0,W.jsx)(u.A,{xs:24,sm:8,children:d()})]})})};var Z=i(30135),$=i(72540),nn=i(51598),en=i(58143);const sn=(0,Z.j4)((function(n){const{beforeUpload:e,setUploadData:i,signImageUrl:s,initialsImageUrl:t,intl:a,pType:r="",type:o=""}=n;function l(){return(0,W.jsx)(V,{style:{display:"flex",border:"1px dashed rgb(204, 204, 204)"},children:(0,W.jsxs)($.A,{className:"dragWrapper",style:{border:s?"2px dashed #ddd":"none"},showUploadList:!1,beforeUpload:n=>(e(n,"sign"),!1),children:[s?"disableExtraPreview"===o?(0,W.jsx)("img",{alt:a.formatMessage({id:"common.signature"}),src:s,style:{margin:"5px 0px",height:40}}):(0,W.jsx)(w.YV,{style:{paddingRight:15,width:"100%"},children:(0,W.jsxs)("div",{className:"sign-wrapper",children:[(0,W.jsxs)("span",{className:"title-top",children:[(0,W.jsx)(c.A,{id:"signature.signedBy"}),":"]}),(0,W.jsx)("div",{className:"sign-container",children:(0,W.jsx)("img",{alt:a.formatMessage({id:"common.signature"}),src:s,style:{margin:"5px 0px",height:40}})})]})}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("p",{className:"ant-upload-drag-icon",style:{margin:5},children:(0,W.jsx)(nn.A,{})}),(0,W.jsx)("p",{className:"ant-upload-text",children:(0,W.jsx)(c.A,{id:"signature.uploadSign"})})]}),s&&(0,W.jsx)("span",{className:"absolute-remove",children:(0,W.jsx)(en.A,{onClick:n=>{n.preventDefault(),n.stopPropagation(),i((n=>({...n,signImageUrl:""})))},style:{color:"#e25766"}})})]})})}function d(){return(0,W.jsx)(V,{style:{display:"flex",border:"1px dashed rgb(204, 204, 204)"},children:(0,W.jsxs)($.A,{className:"dragWrapper",style:{border:t?"2px dashed #ddd":"none"},showUploadList:!1,beforeUpload:n=>(e(n,"initials"),!1),children:[t?(0,W.jsxs)(w.YV,{style:{paddingRight:15,width:"100%"},children:[(0,W.jsxs)("span",{className:"title-top",children:[(0,W.jsx)(c.A,{id:"signature.signedBy"}),":"]}),(0,W.jsx)("div",{className:"sign-container",children:(0,W.jsx)("img",{alt:a.formatMessage({id:"common.initial"}),src:t,style:{margin:"5px 0px",height:40}})})]}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("p",{className:"ant-upload-drag-icon",style:{margin:5},children:(0,W.jsx)(nn.A,{})}),(0,W.jsx)("p",{className:"ant-upload-text",children:(0,W.jsx)(c.A,{id:"signature.uploadInit"})})]}),t&&(0,W.jsx)("span",{className:"absolute-remove",children:(0,W.jsx)(en.A,{onClick:n=>{n.preventDefault(),n.stopPropagation(),i((n=>({...n,initialsImageUrl:""})))},style:{color:"#e25766"}})})]})})}return(0,W.jsxs)("div",{children:[(0,W.jsx)(m.A,{justify:"space-between",gutter:[12,0],children:r?(0,W.jsx)(u.A,{xs:24,children:"initial"===r?d():l()}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(u.A,{xs:24,sm:16,children:l()}),(0,W.jsx)(u.A,{xs:24,sm:8,children:d()})]})}),(0,W.jsx)("div",{className:"signHint",children:(0,W.jsx)(c.A,{id:"signature.hintMsg"})})]})}));var tn=i(98341),an=i(93347),rn=i(16895),on=i(59051),ln=i.n(on);const dn=[{id:"signDate",title:"common.dateTime"},{id:"reason",defaultVal:"Test Reason",title:"common.signReason"},{id:"signBy",title:"signature.signedBy"},{id:"noDesign",title:"signature.noDesign"}];const cn=(0,Z.j4)((function(n){const{state:e={},setState:i=(()=>{}),intl:s}=n;return(0,W.jsxs)(B,{children:[(0,W.jsx)("div",{className:"controlMain",children:dn.map((n=>(0,W.jsxs)("div",{children:[(0,W.jsx)("span",{children:n.title&&(0,W.jsx)(c.A,{id:n.title})}),(0,W.jsx)(rn.A,{checked:!!e[n.id],onChange:e=>{const s="signDate"===n.id&&e?ln()().utc().format("DD/MM/YYYY HH:mm:ss"):"";i((i=>({...i,[n.id]:e?s||n.defaultVal||!0:e,..."reason"===n.id&&!e&&{signReason:""}})))},checkedChildren:(0,W.jsx)(c.A,{id:"common.on"}),unCheckedChildren:(0,W.jsx)(c.A,{id:"common.off"})})]},n.id)))}),(0,W.jsx)("div",{className:"mt15",children:e.reason&&(0,W.jsx)(f.A.TextArea,{maxLength:50,placeholder:s.formatMessage({id:"signature.enterReason"}),value:e.signReason,onChange:n=>{const{value:e}=n.target;i((n=>({...n,signReason:e})))}})})]})}));function xn(n,e){const{visible:i,type:s,handleSubmit:t=(()=>{}),user:a={},showSaved:r=!1,setDisable:o=(()=>{}),submitLoading:d=!1,setSubmitLoader:U=(()=>{})}=n,S="initial"===s,N="sign"===s,{idToken:I,userData:k}=(0,tn.useSelector)((n=>n.Auth)),D=(0,b.isObject)(a)&&!(0,b.isEmpty)(a)?a:k||{},L=(0,_.dS)(D.first_name,D.last_name)||"";let T=L.match(/\b\w/g)||[];T=((T.shift()||"")+(T.pop()||"")).toUpperCase();const C={full_name:L,initial_name:T},[F,z]=l.useState({trimmedSignURL:null,trimmedInitURL:null,signs:[]}),[M]=x.A.useForm(),[O,V]=(0,l.useState)({}),[B,Y]=(0,l.useState)("choose"),[K,G]=(0,l.useState)({signImageUrl:"",initialsImageUrl:""}),{signImageUrl:J,initialsImageUrl:Q}=K;(0,l.useEffect)((()=>{i&&Y(r&&I?"saved":"choose")}),[i]),(0,l.useEffect)((()=>{i&&"saved"===B&&I&&(!F.signs||(0,b.isEmpty)(F.signs))&&async function(){z((n=>({...n,loading:!0})));try{const n=await(0,v.Ay)("user/get-signature");if("Unauthorized"===n.message)return void(0,A.A)("error","common.sessionExpired");n.success&&(0,b.isArray)(n.data)?z((e=>({...e,loading:!1,signs:n.data}))):z((n=>({...n,loading:!1})))}catch(n){z((n=>({...n,loading:!1})))}}()}),[B]),(0,H.A)({form:M,visible:i,initVal:C});const Z=n=>{const e={...n};e.type=B,"upload"===B?(e.signature=null===K||void 0===K?void 0:K.signImageUrl,e.initial=null===K||void 0===K?void 0:K.initialsImageUrl):"draw"===B?(e.signature=null===F||void 0===F?void 0:F.trimmedSignURL,e.initial=null===F||void 0===F?void 0:F.trimmedInitURL):"saved"===B?e.sign_id=null===O||void 0===O?void 0:O.id:e.signature_font=(null===O||void 0===O?void 0:O.signature_font)||"roboto",e.date=F.signDate,e.sign_by=F.signBy,e.reason=F.signReason,e.no_design=F.noDesign,async function(n){U(!0);try{const e=await(0,v.Ay)("add-sign",{...n,pType:"sign"===s?"full":s},"POST");e.success&&e.data?(U(!1),t(e.data)):(U(!1),(0,A.A)("error",e.message))}catch(e){U(!1),(0,A.A)("error")}}(e)};function $(n,e){const i=e("full_name"),t=e("initial_name"),a=N&&!i||S&&!t;return"saved"===n?(0,W.jsx)(g.A,{spinning:F.loading||!1,children:(0,W.jsx)("div",{className:"signatureList",children:(0,W.jsx)(q,{state:F,dataSource:F.signs||[],renderItem:e=>{const i=e.id===O.id;return(0,W.jsx)(p.A.Item,{onClick:()=>{V({...e,type:n})},children:(0,W.jsx)(p.A.Item.Meta,{title:(0,W.jsxs)(m.A,{style:{alignItems:"center"},children:[(0,W.jsx)(u.A,{xs:4,sm:3,children:(0,W.jsx)(P,{children:i&&(0,W.jsx)(E.A,{})})}),(0,W.jsx)(u.A,{xs:20,sm:17,children:(0,W.jsx)("div",{className:"sign-main",children:(0,W.jsx)("img",{alt:S?e.initial_name:e.full_name,src:S?e.initial_signature:e.full_signature})})})]})})})}})})}):"choose"===n?a?(0,W.jsx)(h.A,{}):(0,W.jsx)(q,{state:F,selectedSign:O,setSelectedSign:e=>{V({...e,type:n})},pType:s,name:i,initials:t}):"draw"===n?(0,W.jsxs)(W.Fragment,{children:[nn(F.trimmedSignURL,i),(0,W.jsx)(X,{setState:n=>{z(n)},trimmedInitURL:F.trimmedInitURL,trimmedSignURL:F.trimmedSignURL,pType:s})]}):"upload"===n?(0,W.jsxs)(W.Fragment,{children:[nn(J,i),(0,W.jsx)(sn,{beforeUpload:(n,e)=>{((n,e)=>{const i=(0,_.cd)(n,"custom");i.status?(0,_.In)(n,(n=>{G("sign"===e?e=>({...e,signImageUrl:n,loading:!1}):e=>({...e,initialsImageUrl:n,loading:!1}))})):(0,A.A)("error",i.message)})(n,e)},signImageUrl:J,initialsImageUrl:Q,setUploadData:n=>{G(n)},pType:s})]}):null}function nn(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return(0,W.jsx)(R,{children:(0,W.jsx)("div",{className:"signForm mb20",children:(0,W.jsxs)(w.YV,{noDesign:F.noDesign,children:[(0,W.jsx)("span",{className:"title-top",children:F.signBy&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(c.A,{id:"signature.signedBy"}),":"," ",(0,W.jsx)("span",{children:e||""})," "]})}),(0,W.jsx)("div",{className:"sign-container",children:n&&(0,W.jsx)("img",{src:n,alt:"sign"})}),(0,W.jsxs)("div",{className:"extraInfo",children:[F.signDate&&(0,W.jsxs)("span",{children:[F.signDate," (UTC)"]}),F.signReason&&(0,W.jsx)("span",{children:F.signReason})]})]})})})}return(0,l.useEffect)((()=>{const n=(()=>{let n=!1;return"choose"===B||"saved"===B?n=(0,b.isEmpty)(O)||O.type!==B:"draw"===B?n=S&&!F.trimmedInitURL||N&&!F.trimmedSignURL:"upload"===B&&(n=N&&!K.signImageUrl||S&&!K.initialsImageUrl),n})();o(n)}),[B,F,K,O,i]),(0,l.useImperativeHandle)(e,(()=>({onOk(){M.validateFields().then((n=>{Z(n)})).catch((n=>{console.log("Validate Failed:",n)}))}}))),(0,W.jsx)("div",{className:"w100",children:(0,W.jsx)(g.A,{spinning:d||!1,children:(0,W.jsx)(w._H,{children:(0,W.jsxs)(x.A,{form:M,layout:"horizontal",children:[(0,W.jsxs)(m.A,{gutter:[20],children:[N&&(0,W.jsx)(u.A,{xs:24,sm:12,children:(0,W.jsx)(x.A.Item,{name:"full_name",label:(0,W.jsx)(c.A,{id:"signature.name"}),rules:[{max:50,message:(0,W.jsx)(c.A,{id:"err.max.50char"})},{whitespace:!0,message:(0,W.jsx)(c.A,{id:"err.blankSpace"})}],children:(0,W.jsx)(f.A,{})})}),S&&(0,W.jsx)(u.A,{xs:24,sm:12,children:(0,W.jsx)(x.A.Item,{name:"initial_name",label:(0,W.jsx)(c.A,{id:"signature.initials"}),rules:[{max:20,message:(0,W.jsx)(c.A,{id:"err.max.20char"})},{whitespace:!0,message:(0,W.jsx)(c.A,{id:"err.blankSpace"})}],children:(0,W.jsx)(f.A,{})})})]}),(0,W.jsx)(j.A,{style:{margin:"15px 0px"}}),(0,W.jsx)(cn,{setState:z,state:F}),(0,W.jsx)(j.A,{style:{margin:"10px 0px"}}),(0,W.jsx)(y.A,{defaultActiveKey:B,activeKey:B,onChange:n=>{Y(n)},children:an.gV.map((n=>"saved"===n.type&&(!r||!I)?null:(0,W.jsx)(y.A.TabPane,{tab:(0,W.jsx)(c.A,{id:n.title}),children:(0,W.jsx)(x.A.Item,{noStyle:!0,shouldUpdate:(n,e)=>n.full_name!==e.full_name||n.initial_name!==e.initial_name,children:e=>{let{getFieldValue:i}=e;return $(n.type,i)}})},n.type)))})]})})})})}const gn=(0,l.forwardRef)(xn);const pn=function(n){const{visible:e,type:i,handleSubmit:s=(()=>{}),user:t={},showSaved:a=!0,className:r}=n,o=(0,l.useRef)(null),x="initial"===i,[g,p]=l.useState({trimmedSignURL:null,trimmedInitURL:null,signs:[],isOkDisabled:!1}),[m,u]=(0,l.useState)(!1),h=()=>!m&&(n.onClose(),!0);return(0,W.jsx)(d.A,{className:r,style:{top:50},open:e,onClose:h,title:(0,W.jsx)(c.A,{id:x?"common.addInitial":"common.addSign"}),onOk:()=>{null!==o&&void 0!==o&&o.current&&o.current.onOk()},onCancel:h,destroyOnClose:!0,closable:!0,width:600,okText:(0,W.jsx)(c.A,{id:"common.add"}),cancelButtonProps:{key:"back"},okButtonProps:{id:"sign-ok",key:"submit",loading:m,disabled:g.isOkDisabled},children:(0,W.jsx)(gn,{ref:o,visible:e,type:i,handleSubmit:n=>s(n),setDisable:n=>p((e=>({...e,isOkDisabled:n}))),user:t,showSaved:a,submitLoading:m,setSubmitLoader:u})})}},35676:(n,e,i)=>{"use strict";i.d(e,{A:()=>a});var s=i(9950),t=i(41397);const a=function(n){let{form:e,visible:i,initVal:a}=n;const r=(0,s.useRef)();(0,s.useEffect)((()=>{r.current=i,i&&(0,t.isObject)(a)&&!(0,t.isEmpty)(a)&&setTimeout((()=>{e.setFieldsValue(a)}),100)}),[i]);const o=r.current;(0,s.useEffect)((()=>{!i&&o&&e.resetFields()}),[i])}},1531:(n,e,i)=>{var s={"./sign1.woff":57020,"./sign10.woff":98636,"./sign2.woff":15929,"./sign3.woff":42406,"./sign4.woff":42931,"./sign5.woff":86208,"./sign6.woff":33149,"./sign7.woff":18170,"./sign8.woff":28167,"./sign9.woff":9620};function t(n){var e=a(n);return i(e)}function a(n){if(!i.o(s,n)){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}return s[n]}t.keys=function(){return Object.keys(s)},t.resolve=a,n.exports=t,t.id=1531},57020:(n,e,i)=>{"use strict";n.exports=i.p+"static/media/sign1.1fb5b043585234b6f308.woff"},98636:(n,e,i)=>{"use strict";n.exports=i.p+"static/media/sign10.3cfe36699a2522821730.woff"},15929:(n,e,i)=>{"use strict";n.exports=i.p+"static/media/sign2.241e1d17d5b9a78971dc.woff"},42406:(n,e,i)=>{"use strict";n.exports=i.p+"static/media/sign3.126c0da4264b86892700.woff"},42931:(n,e,i)=>{"use strict";n.exports=i.p+"static/media/sign4.101d4eb06302f82225cb.woff"},86208:(n,e,i)=>{"use strict";n.exports=i.p+"static/media/sign5.3c8e9a69775ee24091d7.woff"},33149:(n,e,i)=>{"use strict";n.exports=i.p+"static/media/sign6.87527a98cf7ecf934e9b.woff"},18170:(n,e,i)=>{"use strict";n.exports=i.p+"static/media/sign7.27bc144ed3f45d0a7472.woff"},28167:(n,e,i)=>{"use strict";n.exports=i.p+"static/media/sign8.9d6ec2a91ef9f2f16b73.woff"},9620:(n,e,i)=>{"use strict";n.exports=i.p+"static/media/sign9.ae5c1b23209434eff00b.woff"}}]);