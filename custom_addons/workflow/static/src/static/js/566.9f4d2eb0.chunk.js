"use strict";(self.webpackChunkfilesdna=self.webpackChunkfilesdna||[]).push([[566],{9879:(e,a,n)=>{n.d(a,{A:()=>O});var o,t=n(37734),l=n(83662),i=n(6819),d=n(35676),s=n(23561),c=n(50918),r=n(87094),m=n(41988),u=n(77645),p=n(9950),h=n(99386),x=n(73053),f=n(57528),v=n(32141),g=n(1868),b=n(85908);const j=(y=h.A,(0,v.Ay)(y)(o||(o=(0,f.A)(["\n  &.ant-select {\n    box-sizing: border-box;\n    display: inline-block;\n    // position: relative;\n    // color: ",";\n    // font-size: 13px;\n\n    .ant-select-selection {\n      background-color: #fff;\n      border-radius: 4px;\n      border: 1px solid ",";\n      ",";\n\n      &.ant-select-selection--single {\n        height: 35px;\n        position: relative;\n        cursor: pointer;\n      }\n\n      .ant-select-selection__rendered {\n        margin-left: 10px;\n        margin-right: 10px;\n        line-height: 33px;\n\n        .ant-select-selection-selected-value {\n          float: ",";\n          padding: ",";\n        }\n      }\n\n      .ant-select-arrow {\n        right: ",";\n        left: ",";\n      }\n\n      &:hover {\n        border-color: ",";\n      }\n    }\n\n    &.ant-select-focused {\n      .ant-select-selection {\n        &:focus,\n        &:active {\n          border-color: ",";\n          outline: 0;\n          box-shadow: 0 0 0 2px ",";\n        }\n      }\n    }\n\n    &.ant-select-open {\n      .ant-select-selection {\n        border-color: ",";\n        outline: 0;\n        box-shadow: 0 0 0 2px ",";\n      }\n    }\n\n    .ant-select-selection--multiple > ul > li,\n    .ant-select-selection--multiple .ant-select-selection__rendered > ul > li {\n      margin-top: 4px;\n      height: 26px;\n      line-height: 26px;\n    }\n\n    .ant-select-selection--multiple .ant-select-selection__choice {\n      background-color: ",";\n      color: ",";\n    }\n\n    .ant-select-tree li a {\n      font-size: 13px;\n      color: ",";\n    }\n  }\n"])),(0,g.palette)("text",1),(0,g.palette)("border",0),(0,b.kY)(),(e=>"rtl"===e["data-rtl"]?"right":"left"),(e=>"rtl"===e["data-rtl"]?"0 0 0 14px":"0 14px 0 0"),(e=>"rtl"===e["data-rtl"]?"inherit":"7px"),(e=>"rtl"===e["data-rtl"]?"7px":"inherit"),(0,g.palette)("primary",0),(0,g.palette)("primary",0),(0,g.palette)("primary",3),(0,g.palette)("primary",0),(0,g.palette)("primary",3),(0,g.palette)("grayscale",4),(0,g.palette)("text",1),(0,g.palette)("text",1)));var y;const A=(0,x.A)(j),C=h.A.Option,_=A;var w=n(41397),S=n(98341);const N=JSON.parse('[{"name":"Afghanistan","dial_code":"+93","code":"AF"},{"name":"Aland Islands","dial_code":"+358","code":"AX"},{"name":"Albania","dial_code":"+355","code":"AL"},{"name":"Algeria","dial_code":"+213","code":"DZ"},{"name":"AmericanSamoa","dial_code":"+1684","code":"AS"},{"name":"Andorra","dial_code":"+376","code":"AD"},{"name":"Angola","dial_code":"+244","code":"AO"},{"name":"Anguilla","dial_code":"+1264","code":"AI"},{"name":"Antarctica","dial_code":"+672","code":"AQ"},{"name":"Antigua and Barbuda","dial_code":"+1268","code":"AG"},{"name":"Argentina","dial_code":"+54","code":"AR"},{"name":"Armenia","dial_code":"+374","code":"AM"},{"name":"Aruba","dial_code":"+297","code":"AW"},{"name":"Australia","dial_code":"+61","code":"AU"},{"name":"Austria","dial_code":"+43","code":"AT"},{"name":"Azerbaijan","dial_code":"+994","code":"AZ"},{"name":"Bahamas","dial_code":"+1242","code":"BS"},{"name":"Bahrain","dial_code":"+973","code":"BH"},{"name":"Bangladesh","dial_code":"+880","code":"BD"},{"name":"Barbados","dial_code":"+1246","code":"BB"},{"name":"Belarus","dial_code":"+375","code":"BY"},{"name":"Belgium","dial_code":"+32","code":"BE"},{"name":"Belize","dial_code":"+501","code":"BZ"},{"name":"Benin","dial_code":"+229","code":"BJ"},{"name":"Bermuda","dial_code":"+1441","code":"BM"},{"name":"Bhutan","dial_code":"+975","code":"BT"},{"name":"Bolivia, Plurinational State of bolivia","dial_code":"+591","code":"BO"},{"name":"Bosnia and Herzegovina","dial_code":"+387","code":"BA"},{"name":"Botswana","dial_code":"+267","code":"BW"},{"name":"Brazil","dial_code":"+55","code":"BR"},{"name":"British Indian Ocean Territory","dial_code":"+246","code":"IO"},{"name":"Brunei Darussalam","dial_code":"+673","code":"BN"},{"name":"Bulgaria","dial_code":"+359","code":"BG"},{"name":"Burkina Faso","dial_code":"+226","code":"BF"},{"name":"Burundi","dial_code":"+257","code":"BI"},{"name":"Cambodia","dial_code":"+855","code":"KH"},{"name":"Cameroon","dial_code":"+237","code":"CM"},{"name":"Canada","dial_code":"+1","code":"CA"},{"name":"Cape Verde","dial_code":"+238","code":"CV"},{"name":"Cayman Islands","dial_code":"+ 345","code":"KY"},{"name":"Central African Republic","dial_code":"+236","code":"CF"},{"name":"Chad","dial_code":"+235","code":"TD"},{"name":"Chile","dial_code":"+56","code":"CL"},{"name":"China","dial_code":"+86","code":"CN"},{"name":"Christmas Island","dial_code":"+61","code":"CX"},{"name":"Cocos (Keeling) Islands","dial_code":"+61","code":"CC"},{"name":"Colombia","dial_code":"+57","code":"CO"},{"name":"Comoros","dial_code":"+269","code":"KM"},{"name":"Congo","dial_code":"+242","code":"CG"},{"name":"Congo, The Democratic Republic of the Congo","dial_code":"+243","code":"CD"},{"name":"Cook Islands","dial_code":"+682","code":"CK"},{"name":"Costa Rica","dial_code":"+506","code":"CR"},{"name":"Cote d\'Ivoire","dial_code":"+225","code":"CI"},{"name":"Croatia","dial_code":"+385","code":"HR"},{"name":"Cuba","dial_code":"+53","code":"CU"},{"name":"Cyprus","dial_code":"+357","code":"CY"},{"name":"Czech Republic","dial_code":"+420","code":"CZ"},{"name":"Denmark","dial_code":"+45","code":"DK"},{"name":"Djibouti","dial_code":"+253","code":"DJ"},{"name":"Dominica","dial_code":"+1767","code":"DM"},{"name":"Dominican Republic","dial_code":"+1849","code":"DO"},{"name":"Ecuador","dial_code":"+593","code":"EC"},{"name":"Egypt","dial_code":"+20","code":"EG"},{"name":"El Salvador","dial_code":"+503","code":"SV"},{"name":"Equatorial Guinea","dial_code":"+240","code":"GQ"},{"name":"Eritrea","dial_code":"+291","code":"ER"},{"name":"Estonia","dial_code":"+372","code":"EE"},{"name":"Ethiopia","dial_code":"+251","code":"ET"},{"name":"Falkland Islands (Malvinas)","dial_code":"+500","code":"FK"},{"name":"Faroe Islands","dial_code":"+298","code":"FO"},{"name":"Fiji","dial_code":"+679","code":"FJ"},{"name":"Finland","dial_code":"+358","code":"FI"},{"name":"France","dial_code":"+33","code":"FR"},{"name":"French Guiana","dial_code":"+594","code":"GF"},{"name":"French Polynesia","dial_code":"+689","code":"PF"},{"name":"Gabon","dial_code":"+241","code":"GA"},{"name":"Gambia","dial_code":"+220","code":"GM"},{"name":"Georgia","dial_code":"+995","code":"GE"},{"name":"Germany","dial_code":"+49","code":"DE"},{"name":"Ghana","dial_code":"+233","code":"GH"},{"name":"Gibraltar","dial_code":"+350","code":"GI"},{"name":"Greece","dial_code":"+30","code":"GR"},{"name":"Greenland","dial_code":"+299","code":"GL"},{"name":"Grenada","dial_code":"+1473","code":"GD"},{"name":"Guadeloupe","dial_code":"+590","code":"GP"},{"name":"Guam","dial_code":"+1671","code":"GU"},{"name":"Guatemala","dial_code":"+502","code":"GT"},{"name":"Guernsey","dial_code":"+44","code":"GG"},{"name":"Guinea","dial_code":"+224","code":"GN"},{"name":"Guinea-Bissau","dial_code":"+245","code":"GW"},{"name":"Guyana","dial_code":"+592","code":"GY"},{"name":"Haiti","dial_code":"+509","code":"HT"},{"name":"Holy See (Vatican City State)","dial_code":"+379","code":"VA"},{"name":"Honduras","dial_code":"+504","code":"HN"},{"name":"Hong Kong","dial_code":"+852","code":"HK"},{"name":"Hungary","dial_code":"+36","code":"HU"},{"name":"Iceland","dial_code":"+354","code":"IS"},{"name":"India","dial_code":"+91","code":"IN"},{"name":"Indonesia","dial_code":"+62","code":"ID"},{"name":"Iran, Islamic Republic of Persian Gulf","dial_code":"+98","code":"IR"},{"name":"Iraq","dial_code":"+964","code":"IQ"},{"name":"Ireland","dial_code":"+353","code":"IE"},{"name":"Isle of Man","dial_code":"+44","code":"IM"},{"name":"Israel","dial_code":"+972","code":"IL"},{"name":"Italy","dial_code":"+39","code":"IT"},{"name":"Jamaica","dial_code":"+1876","code":"JM"},{"name":"Japan","dial_code":"+81","code":"JP"},{"name":"Jersey","dial_code":"+44","code":"JE"},{"name":"Jordan","dial_code":"+962","code":"JO"},{"name":"Kazakhstan","dial_code":"+7","code":"KZ"},{"name":"Kenya","dial_code":"+254","code":"KE"},{"name":"Kiribati","dial_code":"+686","code":"KI"},{"name":"Korea, Democratic People\'s Republic of Korea","dial_code":"+850","code":"KP"},{"name":"Korea, Republic of South Korea","dial_code":"+82","code":"KR"},{"name":"Kuwait","dial_code":"+965","code":"KW"},{"name":"Kyrgyzstan","dial_code":"+996","code":"KG"},{"name":"Laos","dial_code":"+856","code":"LA"},{"name":"Latvia","dial_code":"+371","code":"LV"},{"name":"Lebanon","dial_code":"+961","code":"LB"},{"name":"Lesotho","dial_code":"+266","code":"LS"},{"name":"Liberia","dial_code":"+231","code":"LR"},{"name":"Libyan Arab Jamahiriya","dial_code":"+218","code":"LY"},{"name":"Liechtenstein","dial_code":"+423","code":"LI"},{"name":"Lithuania","dial_code":"+370","code":"LT"},{"name":"Luxembourg","dial_code":"+352","code":"LU"},{"name":"Macao","dial_code":"+853","code":"MO"},{"name":"Macedonia","dial_code":"+389","code":"MK"},{"name":"Madagascar","dial_code":"+261","code":"MG"},{"name":"Malawi","dial_code":"+265","code":"MW"},{"name":"Malaysia","dial_code":"+60","code":"MY"},{"name":"Maldives","dial_code":"+960","code":"MV"},{"name":"Mali","dial_code":"+223","code":"ML"},{"name":"Malta","dial_code":"+356","code":"MT"},{"name":"Marshall Islands","dial_code":"+692","code":"MH"},{"name":"Martinique","dial_code":"+596","code":"MQ"},{"name":"Mauritania","dial_code":"+222","code":"MR"},{"name":"Mauritius","dial_code":"+230","code":"MU"},{"name":"Mayotte","dial_code":"+262","code":"YT"},{"name":"Mexico","dial_code":"+52","code":"MX"},{"name":"Micronesia, Federated States of Micronesia","dial_code":"+691","code":"FM"},{"name":"Moldova","dial_code":"+373","code":"MD"},{"name":"Monaco","dial_code":"+377","code":"MC"},{"name":"Mongolia","dial_code":"+976","code":"MN"},{"name":"Montenegro","dial_code":"+382","code":"ME"},{"name":"Montserrat","dial_code":"+1664","code":"MS"},{"name":"Morocco","dial_code":"+212","code":"MA"},{"name":"Mozambique","dial_code":"+258","code":"MZ"},{"name":"Myanmar","dial_code":"+95","code":"MM"},{"name":"Namibia","dial_code":"+264","code":"NA"},{"name":"Nauru","dial_code":"+674","code":"NR"},{"name":"Nepal","dial_code":"+977","code":"NP"},{"name":"Netherlands","dial_code":"+31","code":"NL"},{"name":"Netherlands Antilles","dial_code":"+599","code":"AN"},{"name":"New Caledonia","dial_code":"+687","code":"NC"},{"name":"New Zealand","dial_code":"+64","code":"NZ"},{"name":"Nicaragua","dial_code":"+505","code":"NI"},{"name":"Niger","dial_code":"+227","code":"NE"},{"name":"Nigeria","dial_code":"+234","code":"NG"},{"name":"Niue","dial_code":"+683","code":"NU"},{"name":"Norfolk Island","dial_code":"+672","code":"NF"},{"name":"Northern Mariana Islands","dial_code":"+1670","code":"MP"},{"name":"Norway","dial_code":"+47","code":"NO"},{"name":"Oman","dial_code":"+968","code":"OM"},{"name":"Pakistan","dial_code":"+92","code":"PK"},{"name":"Palau","dial_code":"+680","code":"PW"},{"name":"Palestinian Territory, Occupied","dial_code":"+970","code":"PS"},{"name":"Panama","dial_code":"+507","code":"PA"},{"name":"Papua New Guinea","dial_code":"+675","code":"PG"},{"name":"Paraguay","dial_code":"+595","code":"PY"},{"name":"Peru","dial_code":"+51","code":"PE"},{"name":"Philippines","dial_code":"+63","code":"PH"},{"name":"Pitcairn","dial_code":"+64","code":"PN"},{"name":"Poland","dial_code":"+48","code":"PL"},{"name":"Portugal","dial_code":"+351","code":"PT"},{"name":"Puerto Rico","dial_code":"+1939","code":"PR"},{"name":"Qatar","dial_code":"+974","code":"QA"},{"name":"Romania","dial_code":"+40","code":"RO"},{"name":"Russia","dial_code":"+7","code":"RU"},{"name":"Rwanda","dial_code":"+250","code":"RW"},{"name":"Reunion","dial_code":"+262","code":"RE"},{"name":"Saint Barthelemy","dial_code":"+590","code":"BL"},{"name":"Saint Helena, Ascension and Tristan Da Cunha","dial_code":"+290","code":"SH"},{"name":"Saint Kitts and Nevis","dial_code":"+1869","code":"KN"},{"name":"Saint Lucia","dial_code":"+1758","code":"LC"},{"name":"Saint Martin","dial_code":"+590","code":"MF"},{"name":"Saint Pierre and Miquelon","dial_code":"+508","code":"PM"},{"name":"Saint Vincent and the Grenadines","dial_code":"+1784","code":"VC"},{"name":"Samoa","dial_code":"+685","code":"WS"},{"name":"San Marino","dial_code":"+378","code":"SM"},{"name":"Sao Tome and Principe","dial_code":"+239","code":"ST"},{"name":"Saudi Arabia","dial_code":"+966","code":"SA"},{"name":"Senegal","dial_code":"+221","code":"SN"},{"name":"Serbia","dial_code":"+381","code":"RS"},{"name":"Seychelles","dial_code":"+248","code":"SC"},{"name":"Sierra Leone","dial_code":"+232","code":"SL"},{"name":"Singapore","dial_code":"+65","code":"SG"},{"name":"Slovakia","dial_code":"+421","code":"SK"},{"name":"Slovenia","dial_code":"+386","code":"SI"},{"name":"Solomon Islands","dial_code":"+677","code":"SB"},{"name":"Somalia","dial_code":"+252","code":"SO"},{"name":"South Africa","dial_code":"+27","code":"ZA"},{"name":"South Sudan","dial_code":"+211","code":"SS"},{"name":"South Georgia and the South Sandwich Islands","dial_code":"+500","code":"GS"},{"name":"Spain","dial_code":"+34","code":"ES"},{"name":"Sri Lanka","dial_code":"+94","code":"LK"},{"name":"Sudan","dial_code":"+249","code":"SD"},{"name":"Suriname","dial_code":"+597","code":"SR"},{"name":"Svalbard and Jan Mayen","dial_code":"+47","code":"SJ"},{"name":"Swaziland","dial_code":"+268","code":"SZ"},{"name":"Sweden","dial_code":"+46","code":"SE"},{"name":"Switzerland","dial_code":"+41","code":"CH"},{"name":"Syrian Arab Republic","dial_code":"+963","code":"SY"},{"name":"Taiwan","dial_code":"+886","code":"TW"},{"name":"Tajikistan","dial_code":"+992","code":"TJ"},{"name":"Tanzania, United Republic of Tanzania","dial_code":"+255","code":"TZ"},{"name":"Thailand","dial_code":"+66","code":"TH"},{"name":"Timor-Leste","dial_code":"+670","code":"TL"},{"name":"Togo","dial_code":"+228","code":"TG"},{"name":"Tokelau","dial_code":"+690","code":"TK"},{"name":"Tonga","dial_code":"+676","code":"TO"},{"name":"Trinidad and Tobago","dial_code":"+1868","code":"TT"},{"name":"Tunisia","dial_code":"+216","code":"TN"},{"name":"Turkey","dial_code":"+90","code":"TR"},{"name":"Turkmenistan","dial_code":"+993","code":"TM"},{"name":"Turks and Caicos Islands","dial_code":"+1649","code":"TC"},{"name":"Tuvalu","dial_code":"+688","code":"TV"},{"name":"Uganda","dial_code":"+256","code":"UG"},{"name":"Ukraine","dial_code":"+380","code":"UA"},{"name":"United Arab Emirates","dial_code":"+971","code":"AE"},{"name":"United Kingdom","dial_code":"+44","code":"GB"},{"name":"United States","dial_code":"+1","code":"US"},{"name":"Uruguay","dial_code":"+598","code":"UY"},{"name":"Uzbekistan","dial_code":"+998","code":"UZ"},{"name":"Vanuatu","dial_code":"+678","code":"VU"},{"name":"Venezuela, Bolivarian Republic of Venezuela","dial_code":"+58","code":"VE"},{"name":"Vietnam","dial_code":"+84","code":"VN"},{"name":"Virgin Islands, British","dial_code":"+1284","code":"VG"},{"name":"Virgin Islands, U.S.","dial_code":"+1340","code":"VI"},{"name":"Wallis and Futuna","dial_code":"+681","code":"WF"},{"name":"Yemen","dial_code":"+967","code":"YE"},{"name":"Zambia","dial_code":"+260","code":"ZM"},{"name":"Zimbabwe","dial_code":"+263","code":"ZW"}]');var k;const T=(0,x.A)(v.Ay.div(k||(k=(0,f.A)(["\n  min-width: 200px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  & .name {\n    flex: 1;\n    margin-left: 7px;\n    text-align: left;\n  }\n  & .code {\n    font-weight: bold;\n    padding-left: 8px;\n  }\n  & .dialCode {\n    padding-left: 8px;\n    vertical-align: middle;\n  }\n"]))));var E=n(44414);function I(e){const{dropDownCustom:a,valType:n,allCountries:o,values:t,userVerification:l=!1,keyType:i="",...d}=e,s=(0,S.useSelector)((e=>e.App.commonData)),c=(0,w.isObject)(s)&&(0,w.isArray)(s.countries)?s.countries:[],r=(0,w.isObject)(s)&&s.loading,m=o?N:c,u=i||n;return(0,E.jsx)(_,{dropdownMatchSelectWidth:!1,dropdownClassName:"countryDropdown",loading:r,optionLabelProp:l?"label":"children",style:{width:l?100:"100%"},...d,children:m.map((e=>(0,E.jsx)(C,{countrycode:e.code,countryname:e.name,value:e[n],obj:e,label:(0,E.jsxs)(T,{children:[(0,E.jsx)("span",{className:"flag flag-".concat(e.code.toLowerCase())}),(0,E.jsx)("span",{className:"dialCode",children:e.dial_code})]}),children:o?(0,E.jsxs)(T,{children:[(0,E.jsx)("span",{className:"flag flag-".concat(e.code.toLowerCase())}),(0,E.jsx)("span",{className:"name",children:e.name}),(0,E.jsx)("span",{className:"code",children:a?e.code:e.dial_code})]}):e.name},e[u])))})}var F=n(8187);const B=function(e){const{visible:a,onClose:n,handleSubmit:o,modalData:h={}}=e,x=h||{},{userData:f}=(0,S.useSelector)((e=>e.Auth)),[v]=s.A.useForm(),[g,b]=(0,p.useState)(!1);(0,d.A)({form:v,visible:a,initVal:{is_selected:!1}});const j=(0,E.jsx)(s.A.Item,{name:"country",className:"countryFormItem",style:{marginBottom:0},children:(0,E.jsx)(I,{keyType:"code",valType:"dial_code",className:"countryPicker",filterOption:F.Tk,showSearch:!0,dropDownCustom:!1,allCountries:!0,userVerification:!0,optionFilterProp:!0})});return(0,E.jsx)(c.A,{title:(0,E.jsx)(t.A,{id:x.title||"documents.addRecipient"}),open:a,okText:(0,E.jsx)(t.A,{id:"common.submit"}),onCancel:g?null:n,onOk:g?null:function(){v.validateFields().then((e=>{!async function(e){b(!0);try{const a=await(0,i.Ay)("contact/create",e,"POST");a.success?((0,l.A)("success",a.message),o(e)):(0,l.A)("error",a.message),b(!1)}catch(a){b(!1),(0,l.A)("error")}}(e)}))},okButtonProps:{id:"add-user"},confirmLoading:g,children:(0,E.jsx)(s.A,{form:v,layout:"vertical",children:(0,E.jsxs)(r.A,{gutter:6,children:[(0,E.jsx)(m.A,{span:24,children:(0,E.jsx)(s.A.Item,{label:(0,E.jsx)(t.A,{id:"common.fullName"}),name:"first_name",rules:[{required:!0,message:(0,E.jsx)(t.A,{id:"req.name"})},{max:50,message:(0,E.jsx)(t.A,{id:"err.max.50char"})},{whitespace:!0,message:(0,E.jsx)(t.A,{id:"err.blankSpace"})}],children:(0,E.jsx)(u.A,{})})}),(0,E.jsx)(m.A,{span:24,children:(0,E.jsx)(s.A.Item,{label:(0,E.jsx)(t.A,{id:"antTable.title.email"}),name:"email",rules:[{required:!0,message:(0,E.jsx)(t.A,{id:"req.email"})},{type:"email",message:(0,E.jsx)(t.A,{id:"err.email"})},{max:255,message:(0,E.jsx)(t.A,{id:"err.max.255char"})}],children:(0,E.jsx)(u.A,{})})}),(0,E.jsx)(m.A,{span:24,children:(0,E.jsx)(s.A.Item,{label:(0,E.jsx)(t.A,{id:"common.phoneNo"}),name:"phone_number",rules:[{max:15,message:(0,E.jsx)(t.A,{id:"err.max.15char"})},{whitespace:!0,message:(0,E.jsx)(t.A,{id:"err.blankSpace"})}],children:(0,E.jsx)(u.A,{type:"number",addonBefore:j})})}),f.is_company&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(m.A,{span:24,children:(0,E.jsx)(s.A.Item,{label:(0,E.jsx)(t.A,{id:"Company Name"}),name:"company_name",rules:[{max:50,message:(0,E.jsx)(t.A,{id:"err.max.50char"})}],children:(0,E.jsx)(u.A,{})})}),(0,E.jsx)(m.A,{span:24,children:(0,E.jsx)(s.A.Item,{label:(0,E.jsx)(t.A,{id:"Department"}),name:"department",rules:[{max:50,message:(0,E.jsx)(t.A,{id:"err.max.50char"})}],children:(0,E.jsx)(u.A,{})})})]})]})})})},{Option:D,OptGroup:M}=h.A;const O=function(e){const{visible:a,onChange:n=(()=>{}),value:o,vlKey:l="",sProps:d={},contacts:s,setContacts:c=(()=>{}),cLoading:r,placeholder:m="",usersOnly:u}=e,x=(0,p.useRef)(null),[f,v]=(0,p.useState)({addContactVis:!1,contacts:[],cLoading:!1}),[g,b]=(0,p.useState)([]);return(0,p.useEffect)((()=>{s&&v((e=>({...e,contacts:s,cLoading:r})))}),[s,r]),(0,p.useEffect)((()=>{a&&(async function(e){v((e=>({...e,cLoading:!e.contacts})));try{const a=await(0,i.Ay)("contact/get-contact",e);a.success?v((e=>({...e,contacts:a.data||[],cLoading:!1}))):v((e=>({...e,cLoading:!1})))}catch(a){v((e=>({...e,cLoading:!1})))}}(),async function(){try{const e=await(0,i.Ay)("contact-groups/index");e.success?b(e.data.map((e=>({...e,email:"[Group-".concat(e.id,"] ").concat(e.name),memberIds:e.members.map((e=>e.contact_id))})))):Notification("error",e.message)}catch(e){Notification("error")}}())}),[a]),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(h.A,{showSearch:!0,style:{width:"100%"},ref:x,placeholder:(0,E.jsx)(t.A,{id:m||"common.searchNew"}),onSelect:(e,a)=>{e&&"new"===e.toString()?v((e=>({...e,addContactVis:!0}))):n(e,(null===a||void 0===a?void 0:a.obj)||{})},value:o,filterOption:function(e,a){const n=(null===a||void 0===a?void 0:a.obj)||{},o=(null===a||void 0===a?void 0:a.key)||"";if(!(0,w.isEmpty)(n)){const a=n.email?n.email.toLowerCase():"",o=n.name?n.name.toLowerCase():"",t=n.first_name?n.first_name.toLowerCase():"",l=n.last_name?n.last_name.toLowerCase():"";return a.indexOf(e.toLowerCase())>=0||o.indexOf(e.toLowerCase())>=0||t.indexOf(e.toLowerCase())>=0||l.indexOf(e.toLowerCase())>=0}return"new"===o},loading:f.cLoading,...d,children:[(0,E.jsx)("div",{children:(0,E.jsx)("button",{onClick:()=>v((e=>({...e,addContactVis:!0}))),style:{fontWeight:550,border:"none",cursor:"pointer"},type:"button",children:(0,E.jsx)(t.A,{id:"common.addNew"})})}),(0,E.jsx)(M,{label:"Users",children:f.contacts.map((function(e){const a=(0,F.dS)(e.first_name,e.last_name);return(0,E.jsxs)(D,{value:e[l||"email"],obj:e,label:(0,E.jsx)("p",{style:{fontWeight:550},children:e.name?e.name:a}),children:[(0,E.jsx)("p",{style:{fontWeight:550},children:e.name?e.name:a}),(0,E.jsx)("p",{children:(e.email,e.email)})]},e.id)}))}),!u&&(0,E.jsx)(M,{label:"Groups",children:g.map((e=>(0,E.jsxs)(D,{value:e.email,obj:e,label:(0,E.jsx)("p",{style:{fontWeight:550},children:e.name}),children:[(0,E.jsx)("p",{style:{fontWeight:550},children:e.name}),(0,E.jsxs)("p",{children:["(",e.memberIds.length," members)"]})]},e.id)))})]}),(0,E.jsx)(B,{visible:f.addContactVis,onClose:()=>{v((e=>({...e,addContactVis:!1})))},handleSubmit:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const o={...e,name:(0,F.dS)(e.first_name,e.last_name)},t=[...f.contacts];t.push(o),a&&n(o[l||"email"],o),s?(c(t),v((e=>({...e,addContactVis:!1})))):v((e=>({...e,contacts:t,addContactVis:!1})))},modalData:{title:"user.addUser",selText:"document.makeUser"}})]})}},48755:(e,a,n)=>{n.d(a,{A:()=>f});var o,t,l,i=n(57528),d=n(32141),s=n(1868);const c=d.Ay.h3(o||(o=(0,i.A)(["\n  font-size: 17px;\n  font-weight: 500;\n  color: ",";\n  margin: 0;\n  margin-bottom: 5px;\n"])),(0,s.palette)("secondary",0)),r=d.Ay.p(t||(t=(0,i.A)(["\n  font-size: 14px;\n  font-weight: 400;\n  color: ",";\n  line-height: 24px;\n"])),(0,s.palette)("text",3)),m=d.Ay.div(l||(l=(0,i.A)(["\n  display: flex;\n\n  & .boxTitleMain {\n    flex: 1;\n  }\n"])));var u,p=n(44414);function h(e){let{title:a,subtitle:n,rightBtns:o}=e;return a?(0,p.jsxs)(m,{className:"boxHeader",children:[(0,p.jsxs)("div",{className:"boxTitleMain",children:[a?(0,p.jsxs)(c,{className:"isoBoxTitle",children:[" ",a," "]}):"",n?(0,p.jsxs)(r,{className:"isoBoxSubTitle",children:[" ",n," "]}):""]}),o]}):null}const x=d.Ay.div(u||(u=(0,i.A)(["\n  width: 100%;\n  height: 100%;\n  background-color: #ffffff;\n  margin: 0 0 30px;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n\n  @media only screen and (max-width: 767px) {\n    padding: 20px;\n    ",";\n  }\n\n  &.half {\n    width: calc(50% - 34px);\n    @media (max-width: 767px) {\n      width: 100%;\n    }\n  }\n"])),"");function f(e){let{className:a,title:n,subtitle:o,children:t,style:l,rightBtns:i}=e;return(0,p.jsxs)(x,{className:"".concat(a||""," isoBoxWrapper"),style:l,children:[(0,p.jsx)(h,{title:n,subtitle:o,rightBtns:i}),t]})}},21270:(e,a,n)=>{n.d(a,{A:()=>l});var o=n(69466),t=n(44414);function l(e){let{id:a,style:n,children:l,className:i,autoHide:d=!0,autoHeight:s,autoHeightMin:c=0,autoHeightMax:r=200,sRef:m,...u}=e;return(0,t.jsx)(o.ur,{ref:m,id:a,className:i,style:n,autoHide:d,autoHideTimeout:1e3,autoHideDuration:200,thumbMinSize:30,universal:!0,autoHeight:s,autoHeightMin:c,autoHeightMax:r,...u,children:l})}},57871:(e,a,n)=>{n.d(a,{D:()=>o});const o={host:n(98581).A.apiDomain,uploadImg:"/upload/image",removeImg:"/remove/image",getForms:"/smartform/index",createForm:"/smartform/create",deleteForm:"/smartform/delete",updateForm:"/smartform/update",getFormData:"/smartform/get-form-data",updateFormData:"/smartform/update-form-data",getSubmissions:"/submission/index",createSubmission:"/submission/create",deleteSubmission:"/submission/delete",getSubmission:"/submission/find",updateSubmission:"/submission/update",getInvites:"/invite/index",createInvite:"/invite/create",exportPdf:"/submission/export/pdf",exportExcel:"/submission/export/excel",exportCsv:"/submission/export/csv"}},99901:(e,a,n)=>{n.d(a,{A:()=>S});var o,t=n(9950),l=n(98341),i=n(52160),d=n(43455),s=n(6819),c=n(57528),r=n(99386),m=n(23561),u=n(85333),p=n(87094),h=n(41988),x=n(50918),f=n(37734),v=n(35676),g=n(83662),b=n(9879),j=n(41397),y=n(32141),A=n(44414);const{Option:C}=r.A;const _=function(e){var a,n;const{visible:o,onClose:i,handleSubmit:d}=e,c=(0,l.useSelector)((e=>e.Auth.userData)),x=(null===c||void 0===c||null===(a=c.plan)||void 0===a||null===(n=a.currentPlan)||void 0===n?void 0:n.name.includes("Business"))||"team"===(null===c||void 0===c?void 0:c.role),[y]=m.A.useForm(),[_,S]=(0,t.useState)(!1),[N,k]=(0,t.useState)({}),[T,E]=(0,t.useState)([]),[I,F]=(0,t.useState)("contact-list"),[B,D]=t.useState(null);(0,v.A)({form:y,visible:o,initVal:{is_selected:!1}}),(0,t.useEffect)((()=>{x&&M(),k({})}),[o]);const M=async()=>{const e=await(0,s.Ay)("department/index");e.success?E(e.data.map((e=>({...e,members:e.department_member.concat([{name:e.head_name,email:e.email}])})))):(0,g.A)("error",e.message)};return(0,A.jsxs)(w,{title:"Add Workflow User",open:o,okText:(0,A.jsx)(f.A,{id:"common.submit"}),onCancel:_?null:i,onOk:_?null:function(){S(!0),"contact"===I?y.validateFields().then((e=>{d([e.email]),S(!1),i()})):(d("group"===I?N.members.map((e=>e.email)):[B.email]),i(),S(!1))},okButtonProps:{id:"add-user",disabled:"group"===I&&(0,j.isEmpty)(N)||"contact-list"===I&&(0,j.isEmpty)(B)},confirmLoading:_,width:400,children:[x&&(0,A.jsx)(u.Ay.Group,{options:[{label:"Add department",value:"group"},{label:"Select from contact list",value:"contact-list"}],value:I,onChange:e=>{let{target:{value:a}}=e;return F(a)}}),"group"===I&&(0,A.jsx)(p.A,{gutter:6,children:(0,A.jsx)(h.A,{span:24,children:(0,A.jsx)(r.A,{style:{width:"100%",marginTop:"10px"},placeholder:"Select department",onSelect:(e,a)=>k((null===a||void 0===a?void 0:a.obj)||{}),value:null===N||void 0===N?void 0:N.id,onClear:()=>k({}),children:T.map((e=>(0,A.jsxs)(C,{value:e.id,obj:e,label:(0,A.jsx)("p",{style:{fontWeight:550},children:e.name}),children:[(0,A.jsx)("p",{style:{fontWeight:550},children:e.name}),(0,A.jsxs)("p",{children:["(",e.members.length," members)"]})]},e.id)))})})}),"contact-list"===I&&(0,A.jsx)(b.A,{placeholder:"common.searchUser",onChange:(e,a)=>{D(a)},visible:o,sProps:{optionLabelProp:"label",allowClear:!0,dropdownMatchSelectWidth:!1,style:{minWidth:350,marginTop:10},onClear:()=>D({})},usersOnly:!0})]})},w=(0,y.Ay)(x.A)(o||(o=(0,c.A)([""])));const S=function(e){const{email:a,setEmail:n}=e,o=(0,l.useSelector)((e=>e.App.documentId)).split("/").pop(),c=(0,l.useSelector)((e=>e.Auth.userData)),[r,m]=(0,t.useState)(!1),[u,p]=(0,t.useState)([]),h=async()=>{const e=await(0,s.Ay)("workflow/get-workflow-users",{hash_key:o},"post");p([{...c,user_id:c.email}]),e.success&&e.data&&p((a=>a.concat(e.data)))};return(0,t.useEffect)((()=>{u.length<1&&h()}),[]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(i.Ay,{onClick:()=>m(!0),size:"small",style:{float:"right",marginBottom:"10px"},children:"+ Add New"}),(0,A.jsx)(d.A,{style:{width:"100%"},value:a,onSelect:e=>n(e),options:null===u||void 0===u?void 0:u.map((e=>({label:void 0===e.first_name?e.user_id:"".concat(e.first_name," ").concat(e.last_name),value:e.user_id})))}),(0,A.jsx)(_,{visible:r,onClose:()=>m(!1),handleSubmit:async e=>{const a=await(0,s.Ay)("workflow/add-workflow-user",{hash_key:o,ids:e.join(",")},"post");return a.success&&h(),a}})]})}},28923:(e,a,n)=>{n.r(a),n.d(a,{default:()=>Ve});var o=n(9950),t=n(28278),l=n(87094),i=n(41988),d=n(39994),s=n(77645),c=n(23072),r=n(99386),m=n(65059),u=n(32077),p=n(52160),h=n(68902),x=n(66276),f=n(53557),v=n(29595),g=n(37630),b=n(3171),j=n(85668),y=n(6819),A=(n(522),n(41397)),C=n(83662),_=n(12547),w=n(98341),S=n(62298),N=n(53387),k=n(60686),T=n(36256),E=n(9879),I=n(67414),F=n(17420),B=n(44414);const D=function(e){const{id:a,index:n,moveList:t,children:l,style:i={},draggingStyle:d={},onClick:s={}}=e,c=(0,o.useRef)(null),[{isOver:r,dropClassName:m},u]=(0,I.H)({accept:"card",hover(e,a){var o;if(!c.current)return;const l=e.index,i=n;if(l===i)return;const d=null===(o=c.current)||void 0===o?void 0:o.getBoundingClientRect(),s=(d.bottom-d.top)/2,r=a.getClientOffset().y-d.top;l<i&&r<s||l>i&&r>s||(t(l,i),e.index=i)},collect:e=>{const{index:a}=e.getItem()||{};return a===n?{}:{isOver:e.isOver(),dropClassName:a<n?" drop-over-downward":" drop-over-upward"}}}),[{isDragging:p},h]=(0,F.i)({item:{type:"card",id:a,index:n},collect:e=>({isDragging:e.isDragging()})}),x=p?0:1;return h(u(c)),(0,B.jsx)("div",{ref:c,className:"".concat(r?m:""),style:{opacity:x,cursor:"move",...i,...p&&{...d}},onClick:s,id:a,children:l})};var M,O=n(50918),L=n(84064),z=n(85333),P=n(16895),G=n(35398),R=n(29796),V=n(10495),q=n(37734),H=n(93347),U=n(11201),K=n(72500),Y=n(20677),W=n(1203),X=n(18469),J=n(21270),Z=n(57528),Q=n(32141),$=n(73053),ee=n(1868);const ae=(0,$.A)(Q.Ay.div(M||(M=(0,Z.A)(["\n  & .moveHome {\n    padding: 6px;\n    margin-bottom: 8px;\n    cursor: pointer;\n    transition: all 0.3s;\n\n    &:hover {\n      background-color: #f5f5f5;\n    }\n\n    &.selected {\n      background: ",";\n      color: #fff;\n    }\n\n    & p {\n      font-size: 15px;\n      & .anticon {\n        margin: ",";\n        font-size: 16px;\n      }\n    }\n  }\n\n  & .ant-tree {\n    & .ant-tree-list {\n      & .ant-tree-list-holder-inner {\n        overflow-x: auto;\n\n        & .ant-tree-treenode {\n          & .ant-tree-indent {\n            white-space: initial;\n          }\n        }\n      }\n\n      & .ant-tree-switcher,\n      & .ant-tree-iconEle {\n        height: 34px;\n        line-height: 34px;\n\n        & .anticon {\n          font-size: 13px;\n        }\n      }\n      & .ant-tree-iconEle {\n        & .anticon {\n          font-size: 18px;\n        }\n      }\n      & .ant-tree-node-content-wrapper {\n        min-height: 34px;\n        line-height: 34px;\n\n        & .ant-tree-title {\n          font-size: 15px;\n          font-weight: 500;\n          margin-left: 5px;\n        }\n      }\n    }\n  }\n"])),(0,ee.palette)("primary",0),(e=>"rtl"===e["data-rtl"]?"0 25px 0 10px":"0 10px 0 0"))),{DirectoryTree:ne}=Y.A,oe=e=>{const{visible:a=!1,onSelect:n=(()=>{}),height:t,selected:l=[],hint:i="",multiple:d=!1}=e,[s,c]=(0,o.useState)({loading:!1,data:[]}),r=(0,w.useSelector)((e=>e.Auth.userData)),m="undefined"!==typeof window?window.innerHeight:800,u=async e=>{if(!Array.isArray(e))return[];const a=e.map((async e=>{const a=e.is_sub?await(async e=>{const a={params:{login:r.email}};return(await X.A.post("".concat(r.connection,"/api/attachments/file-sub-directories/").concat(e),a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.result.directories||[]})(e.directory_id):[],n=await u(a);return{title:e.directory_name,key:e.directory_id.toString(),children:n}}));return Promise.all(a)};(0,o.useEffect)((()=>{if(a){const e=async()=>{const e=await(async()=>{const e={params:{login:r.email}};return(await X.A.post("".concat(r.connection,"/api/attachments/file-directories"),e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.result.directories||[]})(),a=await u(e);c({loading:!1,data:a})};c({loading:!0,data:[]}),e()}else n([])}),[a]);return(0,B.jsxs)(ae,{children:[i&&(0,B.jsx)("p",{className:"mb20",children:(0,B.jsx)(q.A,{id:i})}),s.loading||(0,A.isEmpty)(s.data)?(0,B.jsx)(W.A,{description:(0,B.jsx)(q.A,{id:"documents.noDir"})}):(0,B.jsx)(J.A,{style:{height:t||m-Math.round(m/1.5)},children:(0,B.jsx)(ne,{height:t,treeData:s.data,onSelect:e=>{const a=(0,A.isEqual)(e,l)?[]:e;n(a)},selectedKeys:l,multiple:d})})]})};var te=n(48755),le=n(99901);const{Option:ie}=r.A;const de=function(e){var a,n;let{data:t,isConnectable:l}=e;const{onChange:i,id:d,deleteNode:m,forms:u,quizs:h,templates:x,selectedForms:f}=t,g=(0,w.useSelector)((e=>e.App.templateData)),[b,j]=(0,o.useState)(!1),[I,F]=(0,o.useState)("form"),[M,Y]=(0,o.useState)((0,A.cloneDeep)(t.form)),[W,X]=(0,o.useState)(t.email?(0,A.cloneDeep)(t.email):""),[J,Z]=(0,o.useState)((0,A.cloneDeep)(t.form_field)),[Q,$]=(0,o.useState)((0,A.cloneDeep)(t.notify)),[ee,ae]=(0,o.useState)((0,A.cloneDeep)(t.remind)),ne=!0,{setTemplateData:de}=_.A,[se,ce]=((0,w.useDispatch)(),(0,o.useState)({roles:t.roles?t.roles:[],workflows:t.workflow?t.workflow:[],action:null===t||void 0===t?void 0:t.action,is_completed:null===t||void 0===t||!t.is_completed||(null===t||void 0===t?void 0:t.is_completed),document_hash_url:null===t||void 0===t?void 0:t.document_hash_url,fileName:null===t||void 0===t?void 0:t.file_name,enableOrder:null===t||void 0===t?void 0:t.enableOrder,folder_id:null===t||void 0===t?void 0:t.folder_id,workflow_forms:t.workflow_forms?t.workflow_forms:[],workflow_templates:t.workflow_templates?t.workflow_templates:[]}));(0,o.useEffect)((()=>{const e=u.filter(((e,a)=>{var n;return null===g||void 0===g||null===(n=g.forms)||void 0===n?void 0:n.includes(e.id)})),a=x.filter(((e,a)=>{var n;return null===g||void 0===g||null===(n=g.forms)||void 0===n?void 0:n.includes("template-".concat(e.id))}));console.log("workflowForms: ",e),console.log("workflowTemplates: ",a),ce({...se,workflow_forms:e,workflow_templates:a})}),[g]),(0,o.useEffect)((()=>{var e;null!==M&&void 0!==M&&null!==(e=M.toString())&&void 0!==e&&e.includes("template-")&&(F("template"),(async()=>{const e=await(0,y.Ay)("template/roles?template_id=".concat(M.replaceAll("template-","")));!1!==e.success&&(0!==se.roles.length&&t.form===M||ce((a=>({...a,roles:e.data}))))})(),(async()=>{var e;const a=x.filter((e=>e.id.toString()===M.replaceAll("template-","")));if(null!==(e=a[0])&&void 0!==e&&e.hash_url){const e=await(0,y.Ay)("files/get-append-data/".concat(a[0].hash_url));!1!==e.success&&t.form!==M&&e.filter((e=>"workflow"===e.type))&&ce((a=>({...a,workflows:e.filter((e=>"workflow"===e.type))})))}})())}),[M]);const re=(0,o.useCallback)(((e,a)=>{const n=se.roles[e],o=(0,A.cloneDeep)(se.roles);o[e].user[o[e].id].order_by=a+1,o.splice(e,1),o.splice(a,0,n);const t=(0,A.map)(o,((e,a)=>{const n={...e};return n.user[o[a].id].order_by=a+1,n}));ce((e=>({...e,roles:t})))}),[se.roles]);return(0,B.jsxs)("div",{className:"custom-node",children:["0"!==d&&(0,B.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:l}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("div",{className:"node-icon form-icon",children:(0,B.jsx)(S.A,{})}),(0,B.jsxs)("div",{className:"node-content",children:[(0,B.jsx)("label",{htmlFor:"text",children:(0,B.jsx)(s.A,{value:t.label,onChange:e=>i(d,"label",e.target.value),bordered:!1})}),t.form?(0,B.jsxs)("b",{children:[(0,B.jsx)("small",{children:t.form.toString().includes("template-")?"Template: ":"Form: "}),t.form.toString().includes("template-")?null===(a=x.filter((e=>e.id.toString()===t.form.replaceAll("template-","")))[0])||void 0===a?void 0:a.name:u.filter((e=>e.id===t.form))[0].name]}):(0,B.jsx)(p.Ay,{type:"default",icon:(0,B.jsx)(N.A,{}),size:"small",onClick:()=>j(!0),block:!0,style:{height:"inherit"},children:"Complete Setting"})]})]}),(0,B.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:l}),(0,B.jsxs)("div",{className:"node-menu",children:[(0,B.jsx)(k.A,{style:{color:"blue"},onClick:()=>j(!0)}),"0"!==d&&(0,B.jsx)(T.A,{style:{color:"red"},onClick:e=>m(e,d)})]}),(0,B.jsx)(O.A,{title:"Source Type",open:b,okText:"OK",onOk:()=>{if(i(d,"form",M),i(d,"email",W),i(d,"form_field",J),i(d,"notify",Q),i(d,"remind",ee),"template"===I){if(0===se.roles.length||se.roles.some((e=>!e.user))||!se.action||!se.document_hash_url||!se.fileName||!se.folder_id||se.workflows.filter((e=>e.formId)).length!==se.workflows.length)return void(0,C.A)("error","You need to add all relevant informations for template.");i(d,"roles",se.roles),i(d,"workflow",se.workflows),i(d,"is_completed",se.is_completed),i(d,"action",se.action),i(d,"template_id",parseInt(M.replaceAll("template-",""),10)),i(d,"document_hash_url",se.document_hash_url),i(d,"file_name",se.fileName),i(d,"enableOrder",se.enableOrder),i(d,"folder_id",se.folder_id)}j(!1)},onCancel:()=>{j(!1),Y((0,A.cloneDeep)(t.form)),X(t.email?(0,A.cloneDeep)(t.email):"")},cancelText:"Cancel",children:(0,B.jsxs)(te.A,{style:{maxHeight:"500px",overflowY:"auto"},children:[(0,B.jsxs)(L.A,{vertical:!0,gap:"middle",children:[(0,B.jsx)("h3",{children:"Choose source type:"}),"0"!==d&&(0,B.jsxs)(z.Ay.Group,{defaultValue:"form",onChange:e=>{F(e.target.value)},value:I,size:"large",children:[(0,B.jsx)(z.Ay.Button,{value:"form",children:"Form"}),(0,B.jsx)(z.Ay.Button,{value:"template",children:"Template"})]}),"form"===I?(0,B.jsx)(r.A,{showSearch:!0,placeholder:"Select a form",optionFilterProp:"children",value:null!==M&&void 0!==M&&null!==(n=M.toString())&&void 0!==n&&n.includes("template-")?"":M,onChange:e=>Y(e),onSearch:e=>console.log(e),filterOption:(e,a)=>{var n;return(null!==(n=null===a||void 0===a?void 0:a.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:[{label:"Forms",options:null===u||void 0===u?void 0:u.map((e=>{var a;return{label:e.name,value:e.id,disabled:null===(a=f())||void 0===a?void 0:a.includes(e.id)}}))}],style:{width:"100%"}}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("h3",{children:"Template"}),(0,B.jsx)(r.A,{showSearch:!0,placeholder:"Select a template",optionFilterProp:"children",value:M,onChange:(e,a)=>{Y(e),ce((e=>({...e,document_hash_url:a.template})))},onSearch:e=>console.log(e),filterOption:(e,a)=>{var n;return(null!==(n=null===a||void 0===a?void 0:a.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:[{label:"Templates",options:null===x||void 0===x?void 0:x.map((e=>({label:e.name,value:"template-".concat(e.id),template:e.hash_url})))}],style:{width:"100%"}})]})]}),"0"!==d&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(c.A,{}),"form"===I&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("h3",{children:["Assignee Email Address ",(0,B.jsx)("br",{}),(0,B.jsx)("small",{children:"You can enter an email or select from contacts."})]}),(0,B.jsx)(le.A,{email:W,setEmail:X})]}),"template"===I&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("h3",{children:"File name"}),(0,B.jsx)(s.A,{value:se.fileName,onChange:e=>ce({...se,fileName:e.target.value})}),(0,B.jsx)(c.A,{}),0!==se.roles.length&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("h3",{className:"mb10",style:{width:"100%"},children:[(0,B.jsx)(q.A,{id:"role.assignPeople"}),(0,B.jsx)(P.A,{size:"small",style:{float:"right"},onChange:function(e){const a=[...se.roles].map(((a,n)=>{const o={...a};return o.user[a.id].order_by=e?n+1:0,o}));ce((n=>({...n,roles:a,enableOrder:e})))},checked:se.enableOrder})]}),(0,B.jsx)(U.Q,{backend:K.t2,children:(0,B.jsx)(G.A,{className:"roleAssignList",dataSource:se.roles||[],renderItem:(e,a)=>{var n,o;return se.enableOrder?(0,B.jsx)(D,{id:e.name,index:a,style:{cursor:"move"},moveList:re,children:(0,B.jsxs)(G.A.Item,{style:{border:"0px"},actions:[(0,B.jsx)(E.A,{placeholder:"common.searchUser",setContacts:e=>{ce((a=>({...a,contacts:e})))},value:e.user&&e.user[e.id]?e.user[e.id].email:"",onChange:(n,o)=>{const t=[...se.roles];t[a].user={[e.id]:o},ce((e=>({...e,roles:t})))},visible:ne,sProps:{bordered:!1,optionLabelProp:"label",allowClear:!0,dropdownMatchSelectWidth:!1,style:{minWidth:100}},usersOnly:!0})],children:[(0,B.jsxs)("b",{children:["#",a+1,"\xa0\xa0"]}),(0,B.jsx)(G.A.Item.Meta,{avatar:(0,B.jsx)(R.A,{style:{border:"1px solid rgba(".concat(e.color,", 0.5)"),backgroundColor:"rgba(".concat(e.color,", 0.1)"),color:"rgb(".concat(e.color,")")},children:null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.charAt(0).toUpperCase()}),title:(0,B.jsx)("span",{className:"fw550",children:e.name})})]})},e.name):(0,B.jsx)(G.A.Item,{style:{border:"0px"},actions:[(0,B.jsx)(E.A,{placeholder:"common.searchUser",setContacts:e=>{ce((a=>({...a,contacts:e})))},value:e.user&&e.user[e.id]?e.user[e.id].email:"",onChange:(n,o)=>{const t=[...se.roles];t[a].user={[e.id]:o},ce((e=>({...e,roles:t})))},visible:ne,sProps:{optionLabelProp:"label",allowClear:!0,dropdownMatchSelectWidth:!1,style:{minWidth:100}},usersOnly:!0})],children:(0,B.jsx)(G.A.Item.Meta,{avatar:(0,B.jsx)(R.A,{style:{border:"1px solid rgba(".concat(e.color,", 0.5)"),backgroundColor:"rgba(".concat(e.color,", 0.1)"),color:"rgb(".concat(e.color,")")},children:null===e||void 0===e||null===(o=e.name)||void 0===o?void 0:o.charAt(0).toUpperCase()}),title:(0,B.jsx)("span",{className:"fw550",children:e.name})})})}})})]}),(0,B.jsx)(c.A,{}),0!==se.workflows.length&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(G.A,{className:"roleAssignList",dataSource:se.workflows||[],renderItem:(e,a)=>{var n,o,t;return(0,B.jsx)(G.A.Item,{style:{border:"0px"},actions:[(0,B.jsx)(r.A,{mode:"multiple",style:{float:"right",width:150},placeholder:"Select form",onChange:e=>{const n=[...se.workflows];n[a].formId=e,ce({...se,work:n})},value:e.formId?e.formId:"",options:[{label:"Form",options:null===(n=se.workflow_forms)||void 0===n?void 0:n.map((e=>({label:e.name,value:e.id})))},{label:"Template",options:null===(o=se.workflow_templates)||void 0===o?void 0:o.filter((e=>"template-".concat(e.id)!==M)).map((e=>({label:e.name,value:"template-".concat(e.id)})))}]})],children:(0,B.jsx)(G.A.Item.Meta,{avatar:(0,B.jsx)(R.A,{style:{border:"1px solid rgba(".concat(e.role.color,", 0.5)"),backgroundColor:"rgba(".concat(e.role.color,", 0.1)"),color:"rgb(".concat(e.role.color,")")},children:null===e||void 0===e||null===(t=e.type)||void 0===t?void 0:t.charAt(0).toUpperCase()}),title:(0,B.jsxs)("span",{className:"fw550",children:["Workflow - ",a+1]})})})}}),(0,B.jsx)(c.A,{})]}),(0,B.jsxs)("h3",{className:"mb10",style:{width:"100%"},children:[(0,B.jsx)(q.A,{id:"common.action"}),(0,B.jsx)(r.A,{style:{float:"right",minWidth:150},placeholder:(0,B.jsx)(q.A,{id:"common.search.status"}),onChange:e=>ce({...se,action:e}),value:se.action,children:H.B6.map((e=>e.disabled?null:(0,B.jsx)(ie,{value:e.name,children:e.name},e.name)))})]}),(0,B.jsx)(c.A,{}),(0,B.jsx)(oe,{dData:{},hint:"documents.folderHint",onSelect:e=>ce({...se,folder_id:e}),visible:!0,height:200,selected:se.folder_id}),(0,B.jsx)(c.A,{}),(0,B.jsx)(V.A,{checked:se.is_completed,onChange:e=>ce({...se,is_completed:e.target.checked}),children:"Mark as completed"})]})]})]})})]})};var se=n(51400);const ce=function(e){let{data:a,isConnectable:n}=e;const{onChange:t,id:l,deleteNode:i}=a,d=(0,w.useSelector)((e=>e.Auth.userData)),[r,m]=(0,o.useState)(!1),[u,x]=(0,o.useState)(a.subject||""),[f,g]=(0,o.useState)((0,A.cloneDeep)(a.content)||""),[b,j]=(0,o.useState)(a.senderName?(0,A.cloneDeep)(a.senderName):"".concat(d.first_name," ").concat(d.last_name)),[y,_]=(0,o.useState)((0,A.cloneDeep)(a.recipientEmail)),[S,E]=(0,o.useState)((0,A.cloneDeep)(a.clientEmail)),[I,F]=(0,o.useState)((0,A.cloneDeep)(a.attach)),[D,M]=(0,o.useState)((0,A.cloneDeep)(a.attachFile)),[L,z]=(0,o.useState)(a.senderEmail?(0,A.cloneDeep)(a.senderEmail):d.email),P=[{key:"email-node-1",label:"General",children:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("h3",{children:"Email Subject"}),(0,B.jsx)(s.A,{value:u,onChange:e=>x(e.target.value)}),(0,B.jsx)(c.A,{}),(0,B.jsx)("h3",{children:"Email Content"}),(0,B.jsx)(s.A.TextArea,{value:f,onChange:e=>g(e.target.value)})]})},{key:"email-node-2",label:"Recipients",children:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("h3",{children:"Sender Name"}),(0,B.jsx)(s.A,{value:b,onChange:e=>j(e.target.value)}),(0,B.jsx)(c.A,{}),(0,B.jsx)("h3",{style:{marginBottom:"30px"},children:"Recipient Email"}),(0,B.jsx)(V.A,{checked:S,onChange:e=>E(e.target.checked),children:"Client form email"}),!S&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(c.A,{}),(0,B.jsx)(le.A,{email:y,setEmail:_})]})]})}];return(0,B.jsxs)("div",{className:"custom-node",children:[(0,B.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("div",{className:"node-icon email-icon",children:(0,B.jsx)(se.A,{})}),(0,B.jsxs)("div",{className:"node-content",children:[(0,B.jsx)("label",{htmlFor:"text",children:(0,B.jsx)(s.A,{value:a.label,onChange:e=>t(l,"label",e.target.value),bordered:!1})}),a.recipientEmail||a.clientEmail?(0,B.jsx)("b",{children:a.clientEmail?"Client Email":a.recipientEmail}):(0,B.jsx)(p.Ay,{type:"default",icon:(0,B.jsx)(N.A,{}),size:"small",onClick:()=>m(!0),block:!0,children:"Add Recipients"})]})]}),(0,B.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,B.jsxs)("div",{className:"node-menu",children:[(0,B.jsx)(k.A,{style:{color:"blue"},onClick:()=>m(!0)}),(0,B.jsx)(T.A,{style:{color:"red"},onClick:e=>i(e,l)})]}),(0,B.jsxs)(O.A,{title:"Email Properties",open:r,okText:"OK",onOk:()=>{""===u||""===f||""===y&&!S||""===L?(0,C.A)("error","You need to add all relevant informations for an email."):(t(l,"subject",u),t(l,"content",f),t(l,"senderName",b),t(l,"recipientEmail",y),t(l,"clientEmail",S),t(l,"attach",I),t(l,"attachFile",D),t(l,"senderEmail",L),m(!1))},onCancel:()=>m(!1),cancelText:"Cancel",children:[(0,B.jsx)(h.A,{items:P}),(0,B.jsx)(c.A,{})]})]})};var re=n(24513);const me=function(e){let{data:a,isConnectable:n}=e;const{onChange:o,id:t,deleteNode:l}=a;return(0,B.jsxs)("div",{className:"custom-node",children:[(0,B.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("div",{className:"node-icon approve-sign-icon",children:(0,B.jsx)(re.A,{})}),(0,B.jsxs)("div",{className:"node-content",children:[(0,B.jsx)("label",{htmlFor:"text",children:(0,B.jsx)(s.A,{value:a.label,onChange:e=>o(t,"label",e.target.value),bordered:!1})}),a.approvers?(0,B.jsx)("b",{children:a.approvers.length>1?"".concat(a.approvers.length," Approvers"):a.approvers[0]}):(0,B.jsx)(p.Ay,{type:"default",icon:(0,B.jsx)(N.A,{}),size:"small",block:!0,children:"Add Signer Email"})]})]}),(0,B.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,B.jsx)("div",{className:"node-menu",children:(0,B.jsx)(T.A,{style:{color:"red"},onClick:e=>l(e,t)})})]})};var ue=n(44806);const pe=function(e){let{data:a,isConnectable:n}=e;const{onChange:o,id:t,deleteNode:l}=a;return(0,B.jsxs)("div",{className:"custom-node",children:[(0,B.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("div",{className:"node-icon approval-icon",children:(0,B.jsx)(ue.A,{})}),(0,B.jsxs)("div",{className:"node-content",children:[(0,B.jsx)("label",{htmlFor:"text",children:(0,B.jsx)(s.A,{value:a.label,onChange:e=>o(t,"label",e.target.value),bordered:!1})}),a.approvers?(0,B.jsx)("b",{children:a.approvers.length>1?"".concat(a.approvers.length," Approvers"):a.approvers[0]}):(0,B.jsx)(p.Ay,{type:"default",icon:(0,B.jsx)(N.A,{}),size:"small",block:!0,children:"Complete Setting"})]})]}),(0,B.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,B.jsx)("div",{className:"node-menu",children:(0,B.jsx)(T.A,{style:{color:"red"},onClick:e=>l(e,t)})})]})};var he=n(60974);const xe=function(e){let{data:a,isConnectable:n}=e;const{onChange:o,id:t,deleteNode:l}=a;return(0,B.jsxs)("div",{className:"custom-node",children:[(0,B.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("div",{className:"node-icon team-approval-icon",children:(0,B.jsx)(he.A,{})}),(0,B.jsxs)("div",{className:"node-content",children:[(0,B.jsx)("label",{htmlFor:"text",children:(0,B.jsx)(s.A,{value:a.label,onChange:e=>o(t,"label",e.target.value),bordered:!1})}),a.team?(0,B.jsx)("b",{children:a.team}):(0,B.jsx)(p.Ay,{type:"default",icon:(0,B.jsx)(N.A,{}),size:"small",block:!0,children:"Add Team"})]})]}),(0,B.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,B.jsx)("div",{className:"node-menu",children:(0,B.jsx)(T.A,{style:{color:"red"},onClick:e=>l(e,t)})})]})};var fe=n(8203);const ve=function(e){let{data:a,isConnectable:n}=e;const{onChange:o,id:t,deleteNode:l}=a;return(0,B.jsxs)("div",{className:"custom-node",children:[(0,B.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("div",{className:"node-icon approval-report-icon",children:(0,B.jsx)(fe.A,{})}),(0,B.jsxs)("div",{className:"node-content",children:[(0,B.jsx)("label",{htmlFor:"text",children:(0,B.jsx)(s.A,{value:a.label,onChange:e=>o(t,"label",e.target.value),bordered:!1})}),a.recipientEmail?(0,B.jsx)("b",{children:a.recipientEmail}):(0,B.jsx)(p.Ay,{type:"default",icon:(0,B.jsx)(N.A,{}),size:"small",block:!0,children:"Complete Setting"})]})]}),(0,B.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,B.jsx)("div",{className:"node-menu",children:(0,B.jsx)(T.A,{style:{color:"red"},onClick:e=>l(e,t)})})]})};var ge=n(42025);const be=function(e){let{data:a,isConnectable:n}=e;const{onChange:t,id:l,deleteNode:i}=a,[d,m]=(0,o.useState)(!1),[u,x]=(0,o.useState)(a.email?(0,A.cloneDeep)(a.email):""),[f,g]=(0,o.useState)((0,A.cloneDeep)(a.pdf)),[b,j]=(0,o.useState)((0,A.cloneDeep)(a.form_field)),[y,C]=(0,o.useState)((0,A.cloneDeep)(a.notify)),[_,w]=(0,o.useState)((0,A.cloneDeep)(a.password)),S=[{key:"form-node-1",label:"General",children:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("h3",{children:"Recipient Email Address"}),(0,B.jsx)(s.A,{value:u,onChange:e=>x(e.target.value)}),(0,B.jsx)(c.A,{}),(0,B.jsx)("h3",{children:"Select PDF"}),(0,B.jsx)(r.A,{style:{width:"100%"},value:f,options:[{label:"pdf1",value:"pdf1"},{label:"pdf2",value:"pdf2"},{label:"pdf3",value:"pdf3"}],onChange:e=>g(e)})]})},{key:"form-node-2",label:"Advanced",children:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("h3",{children:"User Notification Email"}),(0,B.jsx)("p",{children:"Send custom email to the assignee."})]}),(0,B.jsx)(P.A,{checked:y,onChange:e=>C(e)})]}),(0,B.jsx)(c.A,{}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("div",{children:(0,B.jsx)("h3",{children:"Enable password protection for submission PDF documents."})}),(0,B.jsx)(P.A,{checked:_,onChange:e=>w(e)})]}),_&&(0,B.jsx)(s.A,{value:_,onChange:e=>w(e.target.value)})]})}];return(0,B.jsxs)("div",{className:"custom-node",children:[(0,B.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("div",{className:"node-icon pdf-icon",children:(0,B.jsx)(ge.A,{})}),(0,B.jsxs)("div",{className:"node-content",children:[(0,B.jsx)("label",{htmlFor:"text",children:(0,B.jsx)(s.A,{value:a.label,onChange:e=>t(l,"label",e.target.value),bordered:!1})}),a.pdf?(0,B.jsx)("b",{children:a.pdf}):(0,B.jsx)(p.Ay,{type:"default",icon:(0,B.jsx)(N.A,{}),size:"small",onClick:()=>m(!0),block:!0,children:"Complete Setting"})]})]}),(0,B.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,B.jsxs)("div",{className:"node-menu",children:[(0,B.jsx)(k.A,{style:{color:"blue"},onClick:()=>m(!0)}),(0,B.jsx)(T.A,{style:{color:"red"},onClick:e=>i(e,l)})]}),(0,B.jsxs)(O.A,{title:"Form Properties",open:d,okText:"OK",onOk:()=>{t(l,"email",u),t(l,"pdf",f),t(l,"form_field",b),t(l,"notify",y),t(l,"password",_),m(!1)},onCancel:()=>m(!1),cancelText:"Cancel",children:[(0,B.jsx)(h.A,{items:S}),(0,B.jsx)(c.A,{})]})]})};var je=n(19841);const ye=function(e){let{data:a,isConnectable:n}=e;const{onChange:t,id:l,deleteNode:i}=a,[d,m]=(0,o.useState)(!1),[u,h]=(0,o.useState)(a.document);return(0,B.jsxs)("div",{className:"custom-node",children:[(0,B.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("div",{className:"node-icon sign-document-icon",children:(0,B.jsx)(je.A,{})}),(0,B.jsxs)("div",{className:"node-content",children:[(0,B.jsx)("label",{htmlFor:"text",children:(0,B.jsx)(s.A,{value:a.label,onChange:e=>t(l,"label",e.target.value),bordered:!1})}),a.document?(0,B.jsx)("b",{children:a.document}):(0,B.jsx)(p.Ay,{type:"default",icon:(0,B.jsx)(N.A,{}),size:"small",onClick:()=>m(!0),block:!0,children:"Complete Setting"})]})]}),(0,B.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,B.jsxs)("div",{className:"node-menu",children:[(0,B.jsx)(k.A,{style:{color:"blue"},onClick:()=>m(!0)}),(0,B.jsx)(T.A,{style:{color:"red"},onClick:e=>i(e,l)})]}),(0,B.jsxs)(O.A,{title:"Sign Document Properties",open:d,okText:"OK",onOk:()=>{t(l,"document",u),m(!1)},onCancel:()=>m(!1),cancelText:"Cancel",children:[(0,B.jsx)("h3",{children:"Select Document"}),(0,B.jsx)(r.A,{value:u,options:[{label:"Document1",value:"doc1"},{label:"Document2",value:"doc2"},{label:"Document3",value:"doc3"}],onChange:e=>h(e),style:{width:"100%"}}),(0,B.jsx)(c.A,{})]})]})};var Ae=n(22748),Ce=n(60716),_e=n(57560),we=n(57871);const Se=function(e){var a;let{data:n,isConnectable:t}=e;const{onChange:l,id:i,deleteNode:d,forms:m,quizs:u,selectedForms:h}=n,[x,f]=(0,o.useState)(!1),[g,b]=(0,o.useState)(!1),[j,_]=(0,o.useState)(n.conditions?(0,A.cloneDeep)(n.conditions):[]),[w,S]=(0,o.useState)(n.combine?(0,A.cloneDeep)(n.combine):"all"),[E,I]=(0,o.useState)({}),[F,D]=(0,o.useState)([]);let M;if(E.if){const[e,a]=E.if.split("-"),n=F.find((a=>"".concat(a.form_id)===e));n&&(M=n.fields.find((e=>"".concat(e.id)===a)))}async function L(){const e=h();for(let a=0;a<e.length;a++){const n=e[a]?e[a].toString().includes("quiz-"):null,o=n?u.filter((n=>n.id.toString()===e[a].replaceAll("quiz-","")))[0]:m.filter((n=>n.id===e[a]))[0];if(o&&"undefined"!==o){let e=n?await(0,y.Ay)("quiz/get-quiz-data",{hash:o.hash}):await X.A.get("".concat(we.D.host).concat(we.D.getFormData,"?hash=").concat(o.hash));e=n?e:e.data,D((a=>a.concat({form:o.name,form_id:o.id,fields:e.data.form.filter((e=>["shortText","longText","time","datePicker","fullname","customElement","email","number","phone","dropdown","singleChoice","multipleChoice","starRating","scaleRating","rangeNumber","imageSelect"].includes(e.type)))})))}}}(0,o.useEffect)((()=>{F.length<1&&L()}),[]);const z=e=>F.filter((a=>a.form_id.toString()===e.split("-")[0]))[0].fields.filter((a=>a.id.toString()===e.split("-")[1]))[0];return(0,B.jsxs)("div",{className:"custom-node",children:[(0,B.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:t}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("div",{className:"node-icon if-icon",children:(0,B.jsx)(Ce.A,{})}),(0,B.jsxs)("div",{className:"node-content",children:[(0,B.jsx)("label",{htmlFor:"text",children:(0,B.jsx)(s.A,{value:n.label,onChange:e=>l(i,"label",e.target.value),bordered:!1})}),(null===(a=n.conditions)||void 0===a?void 0:a.length)>0?(0,B.jsxs)("b",{children:[n.conditions.length," Condition(s)"]}):(0,B.jsx)(p.Ay,{type:"default",icon:(0,B.jsx)(N.A,{}),size:"small",onClick:()=>b(!0),block:!0,children:"Add conditions"})]})]}),(0,B.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:t}),(0,B.jsxs)("div",{className:"node-menu",children:[(0,B.jsx)(k.A,{style:{color:"blue"},onClick:()=>b(!0)}),(0,B.jsx)(T.A,{style:{color:"red"},onClick:e=>d(e,i)})]}),(0,B.jsxs)(O.A,{title:"If/Else Condition Properties",open:g,okText:"OK",onOk:()=>{l(i,"conditions",j),l(i,"combine",w),b(!1)},onCancel:()=>b(!1),cancelText:"Cancel",children:[(0,B.jsx)("h3",{children:(0,B.jsx)("b",{children:"Set Conditions"})}),(0,B.jsx)("p",{children:"If/Else conditions direct your flow based on whether the conditions you define are met."}),(0,B.jsx)(p.Ay,{size:"small",style:{float:"right",marginTop:"-10px"},onClick:async()=>{F.length<1&&L(),I({}),f(!0)},children:"+ Add new condition"}),(0,B.jsx)(c.A,{}),(0,B.jsx)(G.A,{itemLayout:"horizontal",dataSource:j,renderItem:e=>{const[a,n]=e.if.split("-"),o=F.find((e=>"".concat(e.form_id)===a)),t=null===o||void 0===o?void 0:o.fields.find((e=>"".concat(e.id)===n));return(0,B.jsx)(G.A.Item,{children:(0,B.jsx)(G.A.Item.Meta,{title:(0,B.jsxs)("div",{className:"condition-block",children:[(0,B.jsx)("div",{style:{float:"right"},children:(0,B.jsx)(Ae.A,{placement:"bottomRight",title:"Delete Condition",children:(0,B.jsx)(_e.A,{style:{color:"red"},onClick:()=>_(j.filter((a=>a.no!==e.no)))})})}),(0,B.jsx)(c.A,{}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"If"}),(0,B.jsx)(r.A,{value:e.if,options:null===F||void 0===F?void 0:F.map((e=>{var a;return{label:e.form,options:null===(a=e.fields)||void 0===a?void 0:a.map((a=>({label:a.label,value:"".concat(e.form_id,"-").concat(a.id)})))}})),onChange:a=>_(j.map((n=>n.no===e.no?{...n,if:a}:n)))})]}),e.if&&t&&"customElement"===t.type&&(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"Field Options"}),(0,B.jsx)(r.A,{value:e.customFieldOption,onChange:a=>_(j.map((n=>n.no===e.no?{...n,customFieldOption:a}:n))),options:Object.keys(t).filter((e=>e.startsWith("placeholder")&&t[e])).map((e=>({label:t[e],value:e})))})]}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"State"}),(0,B.jsx)(r.A,{value:e.state,options:[{label:"Is Equal To",value:"equal"},{label:"Is Not Equal To",value:"not-equal"},{label:"Is Empty",value:"empty"},{label:"Is Filled",value:"filled"},{label:"Less Than",value:"less"},{label:"Greater Than",value:"greater"},{label:"Contains",value:"contain"}],onChange:a=>_(j.map((n=>n.no===e.no?{...n,state:a}:n))),disabled:!e.if})]}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"Target"}),(0,B.jsx)(r.A,{value:e.target,options:[{label:"Value",value:"value"},{label:"Another Field",value:"another-field"}],onChange:a=>_(j.map((n=>n.no===e.no?{...n,target:a}:n))),disabled:!e.if||!e.state||["filled","empty"].includes(e.state)})]}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"value"===e.target?"Value":"Field"}),"value"===e.target?["dropdown","singleChoice","multipleChoice"].includes(z(e.if).type)?(0,B.jsx)(r.A,{options:z(e.if).options.split("\n").map((e=>({value:e,label:e}))),value:e.value,onChange:a=>_(j.map((n=>n.no===e.no?{...n,value:a}:n))),disabled:!e.if||!e.state||["filled","empty"].includes(e.state)||!e.target,mode:"multipleChoice"===z(e.if).type?"multiple":"-"}):(0,B.jsx)(s.A,{value:e.value,onChange:a=>_(j.map((n=>n.no===e.no?{...n,value:a.target.value}:n))),disabled:!e.if||!e.state||["filled","empty"].includes(e.state)||!e.target}):(0,B.jsx)(r.A,{value:e.field,options:null===F||void 0===F?void 0:F.map((e=>{var a;return{label:e.form,options:null===(a=e.fields)||void 0===a?void 0:a.map((a=>({label:a.label,value:"".concat(e.form_id,"-").concat(a.id)})))}})),onChange:a=>_(j.map((n=>n.no===e.no?{...n,field:a}:n))),disabled:!e.if||!e.state||["filled","empty"].includes(e.state)||!e.target})]})]})})})}}),j.length>1&&(0,B.jsxs)("div",{className:"rule-match",children:["IF","  ",(0,B.jsx)(r.A,{style:{width:"100px"},value:w,defaultValue:"all",onChange:e=>S(e),options:[{label:"ALL",value:"all"},{label:"ANY",value:"any"}]})," ","OF THE \u201cIF\u201d RULES ARE MATCHED"]}),(0,B.jsx)(c.A,{})]}),(0,B.jsx)(O.A,{title:"New Condition",open:x,okText:"Add Condtion",cancelText:"Cancel",onCancel:()=>f(!1),onOk:()=>{E.if&&E.state&&["empty","filled"].includes(E.state)||E.if&&E.state&&E.target&&(E.value||E.field)?(E.no=0===j.length?1:Math.max(...j.map((e=>e.no)))+1,_(j.concat(E)),I({}),f(!1)):(0,C.A)("error","You need to fill all field for condition.")},children:(0,B.jsxs)("div",{className:"condition-block",children:[(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"If"}),(0,B.jsx)(r.A,{value:E.if,options:null===F||void 0===F?void 0:F.map((e=>{var a;return{label:e.form,options:null===(a=e.fields)||void 0===a?void 0:a.map((a=>({label:a.label,value:"".concat(e.form_id,"-").concat(a.id)})))}})),onChange:e=>I({...E,if:e})})]}),E.if&&M&&"customElement"===M.type&&(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"Field Options"}),(0,B.jsx)(r.A,{value:E.customFieldOption,onChange:e=>I({...E,customFieldOption:e}),options:Object.keys(M).filter((e=>e.startsWith("placeholder")&&M[e])).map((e=>({label:M[e],value:e})))})]}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"State"}),(0,B.jsx)(r.A,{value:E.state,options:[{label:"Is Equal To",value:"equal"},{label:"Is Not Equal To",value:"not-equal"},{label:"Is Empty",value:"empty"},{label:"Is Filled",value:"filled"},{label:"Less Than",value:"less"},{label:"Greater Than",value:"greater"},{label:"Contains",value:"contain"}],onChange:e=>I({...E,state:e}),disabled:!E.if})]}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"Target"}),(0,B.jsx)(r.A,{value:E.target,options:[{label:"Value",value:"value"},{label:"Another Field",value:"another-field"}],onChange:e=>I({...E,target:e}),disabled:!E.if||!E.state||["filled","empty"].includes(E.state)})]}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"value"===E.target?"Value":"Field"}),"value"===E.target?["dropdown","singleChoice","multipleChoice"].includes(z(E.if).type)?(0,B.jsx)(r.A,{options:z(E.if).options.split("\n").map((e=>({value:e,label:e}))),value:E.value,onChange:e=>I({...E,value:e}),disabled:!E.if||!E.state||["filled","empty"].includes(E.state)||!E.target,mode:"multipleChoice"===z(E.if).type?"multiple":"-"}):(0,B.jsx)(s.A,{value:E.value,onChange:e=>I({...E,value:e.target.value}),disabled:!E.if||!E.state||["filled","empty"].includes(E.state)||!E.target}):(0,B.jsx)(r.A,{value:E.field,options:null===F||void 0===F?void 0:F.map((e=>{var a;return{label:e.form,options:null===(a=e.fields)||void 0===a?void 0:a.map((a=>({label:a.label,value:"".concat(e.form_id,"-").concat(a.id)})))}})),onChange:e=>I({...E,field:e}),disabled:!E.if||!E.state||["filled","empty"].includes(E.state)||!E.target})]})]})})]})};var Ne=n(38900);const ke=function(e){var a;let{data:n,isConnectable:t}=e;const{onChange:l,id:i,deleteNode:d,forms:m,quizs:u,templates:h,selectedForms:f}=n,[g,b]=(0,o.useState)(!1),[j,_]=(0,o.useState)(!1),[w,S]=(0,o.useState)(n.branches?(0,A.cloneDeep)(n.branches):[]),[E,I]=(0,o.useState)(null),[F,D]=(0,o.useState)(null),[M,P]=(0,o.useState)([]),[R,V]=(0,o.useState)("all"),[q,H]=(0,o.useState)({}),[U,K]=(0,o.useState)([]),[Y,W]=(0,o.useState)(n.type?(0,A.cloneDeep)(n.type):"form");async function J(){const e=f();for(let a=0;a<e.length;a++){const n=e[a]?e[a].toString().includes("quiz-"):null,o=n?u.filter((n=>n.id.toString()===e[a].replaceAll("quiz-","")))[0]:m.filter((n=>n.id===e[a]))[0];if(o&&"undefined"!==o){let e=n?await(0,y.Ay)("quiz/get-quiz-data",{hash:o.hash}):await X.A.get("".concat(we.D.host).concat(we.D.getFormData,"?hash=").concat(o.hash));e=n?e:e.data,K((a=>a.concat({form:o.name,form_id:o.id,fields:e.data.form.filter((e=>["shortText","longText","time","datePicker","fullname","email","number","phone","dropdown","singleChoice","multipleChoice","starRating","scaleRating","rangeNumber","imageSelect"].includes(e.type)))})))}}}(0,o.useEffect)((()=>{U.length<1&&J()}),[]);const Z=e=>U.filter((a=>a.form_id.toString()===e.split("-")[0]))[0].fields.filter((a=>a.id.toString()===e.split("-")[1]))[0],Q=(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("h3",{children:"Branch List"}),(0,B.jsx)(c.A,{}),(0,B.jsx)(G.A,{itemLayout:"horizontal",dataSource:w,renderItem:e=>{var a;return(0,B.jsx)(G.A.Item,{actions:[(0,B.jsx)(x.A,{style:{color:"blue"},onClick:()=>{I(e.no),D(e.name),P(e.conditions),V(e.combine)}}),(0,B.jsx)(_e.A,{style:{color:"red"},onClick:()=>S(w.filter((a=>a.no!==e.no)))})],style:{background:e.color},className:"condition-block",children:(0,B.jsx)(G.A.Item.Meta,{title:(0,B.jsxs)("b",{children:[e.name," ",(0,B.jsx)("small",{children:(0,B.jsxs)("i",{children:[null===(a=e.conditions)||void 0===a?void 0:a.length," condition(s)"]})})]})})})}}),(0,B.jsx)(c.A,{}),(0,B.jsx)(p.Ay,{icon:(0,B.jsx)(N.A,{}),type:"text",onClick:()=>{const e=0===w.length?1:Math.max(...w.map((e=>e.no)))+1;S(w.concat({no:e,conditions:[],combine:null})),P([]),I(e)},children:"Add new branch"})]}),$=(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("h3",{children:"Branch Name"}),(0,B.jsx)(s.A,{value:F,onChange:e=>D(e.target.value)}),(0,B.jsxs)(L.A,{style:{marginTop:"20px",flexDirection:"column"},children:[(0,B.jsx)("h3",{children:"Source Type"}),(0,B.jsxs)(z.Ay.Group,{defaultValue:"form",onChange:e=>{W(e.target.value),K([])},value:Y,size:"large",children:[(0,B.jsx)(z.Ay.Button,{disabled:0!==M.length&&"template"===Y,value:"form",children:"Form"}),(0,B.jsx)(z.Ay.Button,{disabled:0!==M.length&&"form"===Y,value:"template",children:"Template"})]})]}),(0,B.jsx)(p.Ay,{size:"small",style:{float:"right",margin:"10px 0"},onClick:async()=>{if("form"===Y)U.length<1&&J(),H({}),_(!0);else{const e=f(),a=h.filter(((a,n)=>e.includes("template-".concat(a.id.toString()))));console.log(a),H({}),_(!0),K(a)}},children:"+ Add new condition"}),(0,B.jsx)(c.A,{}),(0,B.jsx)(G.A,{itemLayout:"horizontal",dataSource:M,renderItem:e=>(0,B.jsx)(G.A.Item,{children:(0,B.jsx)(G.A.Item.Meta,{title:(0,B.jsxs)("div",{className:"condition-block",children:[(0,B.jsx)("div",{style:{float:"right"},children:(0,B.jsx)(Ae.A,{placement:"bottomRight",title:"Delete Condition",children:(0,B.jsx)(_e.A,{style:{color:"red"},onClick:()=>P(M.filter((a=>a.no!==e.no)))})})}),(0,B.jsx)(c.A,{}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"If"}),(0,B.jsx)(r.A,{value:e.if,options:null===U||void 0===U?void 0:U.map((e=>{var a;return{label:"form"===Y?e.form:e.name,..."form"!==Y&&{value:"template-".concat(e.id)},..."form"===Y&&{options:null===(a=e.fields)||void 0===a?void 0:a.map((a=>({label:a.label,value:"".concat(e.form_id,"-").concat(a.id)})))}}})),onChange:a=>P(M.map((n=>n.no===e.no?{...n,if:a}:n)))})]}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"State"}),(0,B.jsx)(r.A,{value:e.state,options:"form"===Y?[{label:"Is Equal To",value:"equal"},{label:"Is Not Equal To",value:"not-equal"},{label:"Is Empty",value:"empty"},{label:"Is Filled",value:"filled"},{label:"Less Than",value:"less"},{label:"Greater Than",value:"greater"},{label:"Contains",value:"contain"}]:[{label:"In Process",value:"In Process"},{label:"Completed",value:"Completed"}],onChange:a=>P(M.map((n=>n.no===e.no?{...n,state:a}:n))),disabled:!e.if})]}),"form"===Y&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"Target"}),(0,B.jsx)(r.A,{value:e.target,options:[{label:"Value",value:"value"},{label:"Another Field",value:"another-field"}],onChange:a=>P(M.map((n=>n.no===e.no?{...n,target:a}:n))),disabled:!e.if||!e.state||["filled","empty"].includes(e.state)})]}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"value"===e.target?"Value":"Field"}),"value"===e.target?["dropdown","singleChoice","multipleChoice"].includes(Z(e.if).type)?(0,B.jsx)(r.A,{options:Z(e.if).options.split("\n").map((e=>({value:e,label:e}))),value:e.value,onChange:a=>P(M.map((n=>n.no===e.no?{...n,value:a}:n))),disabled:!e.if||!e.state||["filled","empty"].includes(e.state)||!e.target,mode:"multipleChoice"===Z(e.if).type?"multiple":"-"}):(0,B.jsx)(s.A,{value:e.value,onChange:a=>P(M.map((n=>n.no===e.no?{...n,value:a.target.value}:n))),disabled:!e.if||!e.state||!e.target}):(0,B.jsx)(r.A,{value:e.field,options:null===U||void 0===U?void 0:U.map((e=>{var a;return{label:e.form,options:null===(a=e.fields)||void 0===a?void 0:a.map((a=>({label:a.label,value:"".concat(e.form_id,"-").concat(a.id)})))}})),onChange:a=>P(M.map((n=>n.no===e.no?{...n,field:a}:n))),disabled:!e.if||!e.state||!e.target})]})]})]})})})}),M.length>1&&(0,B.jsxs)("div",{className:"rule-match",children:["IF","  ",(0,B.jsx)(r.A,{style:{width:"100px"},value:R,defaultValue:"all",onChange:e=>V(e),options:[{label:"ALL",value:"all"},{label:"ANY",value:"any"}]})," ","OF THE \u201cIF\u201d RULES ARE MATCHED"]}),(0,B.jsx)(c.A,{})]});return(0,B.jsxs)("div",{className:"custom-node",children:[(0,B.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:t}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("div",{className:"node-icon condition-icon",children:(0,B.jsx)(Ne.A,{})}),(0,B.jsxs)("div",{className:"node-content",children:[(0,B.jsx)("label",{htmlFor:"text",children:(0,B.jsx)(s.A,{value:n.label,onChange:e=>l(i,"label",e.target.value),bordered:!1})}),(null===(a=n.branches)||void 0===a?void 0:a.length)>0?(0,B.jsxs)("b",{children:[n.branches.length," Branche(s)"]}):(0,B.jsx)(p.Ay,{type:"default",icon:(0,B.jsx)(N.A,{}),size:"small",onClick:()=>b(!0),block:!0,children:"Complete Setting"})]})]}),(0,B.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:t}),(0,B.jsxs)("div",{className:"node-menu",children:[(0,B.jsx)(k.A,{style:{color:"blue"},onClick:()=>b(!0)}),(0,B.jsx)(T.A,{style:{color:"red"},onClick:e=>d(e,i)})]}),(0,B.jsx)(O.A,{title:"Conditional Branch Properties",open:g,okText:"OK",onOk:()=>{if(E){if(console.log(M),!F||""===F||M.length<1)return void(0,C.A)("error","You need to add branch name and at least 1 condition.");S(w.map((e=>e.no===E?{...e,conditions:M,combine:R,name:F}:e)))}else l(i,"branches",w),l(i,"type",Y),b(!1);P([]),H({}),I(null),D(null),V("all")},onCancel:()=>{b(!1),I(null),P([]),H({})},cancelText:"Cancel",children:E?$:Q}),(0,B.jsx)(O.A,{title:"New Condition",open:j,okText:"Add Condtion",cancelText:"Cancel",onCancel:()=>_(!1),onOk:()=>{q.if&&q.state&&["empty","filled","In Process","Completed"].includes(q.state)||q.if&&q.state&&q.target&&(q.value||q.field)?(q.no=0===M.length?1:Math.max(...M.map((e=>e.no)))+1,P(M.concat(q)),H({}),_(!1)):(0,C.A)("error","You need to fill all field for condition.")},children:(0,B.jsxs)("div",{className:"condition-block",children:[(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"If"}),(0,B.jsx)(r.A,{value:q.if,options:null===U||void 0===U?void 0:U.map((e=>{var a;return{label:"form"===Y?e.form:e.name,..."form"!==Y&&{value:"template-".concat(e.id)},..."form"===Y&&{options:null===(a=e.fields)||void 0===a?void 0:a.map((a=>({label:a.label,value:"".concat(e.form_id,"-").concat(a.id)})))}}})),onChange:e=>H({...q,if:e})})]}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"State"}),(0,B.jsx)(r.A,{value:q.state,options:"form"===Y?[{label:"Is Equal To",value:"equal"},{label:"Is Not Equal To",value:"not-equal"},{label:"Is Empty",value:"empty"},{label:"Is Filled",value:"filled"},{label:"Less Than",value:"less"},{label:"Greater Than",value:"greater"},{label:"Contains",value:"contain"}]:[{label:"In Process",value:"In Process"},{label:"Completed",value:"Completed"}],onChange:e=>H({...q,state:e}),disabled:!q.if})]}),"form"===Y&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"Target"}),(0,B.jsx)(r.A,{value:q.target,options:[{label:"Value",value:"value"},{label:"Another Field",value:"another-field"}],onChange:e=>H({...q,target:e}),disabled:!q.if||!q.state||["filled","empty"].includes(q.state)})]}),(0,B.jsxs)("div",{className:"flex",children:[(0,B.jsx)("h3",{children:"value"===q.target?"Value":"Field"}),"value"===q.target?["dropdown","singleChoice","multipleChoice"].includes(Z(q.if).type)?(0,B.jsx)(r.A,{options:Z(q.if).options.split("\n").map((e=>({value:e,label:e}))),value:q.value,onChange:e=>H({...q,value:e}),disabled:!q.if||!q.state||["filled","empty"].includes(q.state)||!q.target,mode:"multipleChoice"===Z(q.if).type?"multiple":"-"}):(0,B.jsx)(s.A,{value:q.value,onChange:e=>H({...q,value:e.target.value}),disabled:!q.if||!q.state||!q.target}):(0,B.jsx)(r.A,{value:q.field,options:null===U||void 0===U?void 0:U.map((e=>{var a;return{label:e.form,options:null===(a=e.fields)||void 0===a?void 0:a.map((a=>({label:a.label,value:"".concat(e.form_id,"-").concat(a.id)})))}})),onChange:e=>H({...q,field:e}),disabled:!q.if||!q.state||!q.target})]})]})]})})]})};var Te=n(15306);const Ee=function(e){let{data:a,isConnectable:n}=e;const{id:o,deleteNode:t}=a;return(0,B.jsxs)("div",{className:"custom-node branch-node",children:[(0,B.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,B.jsxs)("div",{style:{textAlign:"center"},children:[(0,B.jsx)(Te.A,{}),(0,B.jsx)("br",{}),(0,B.jsx)("p",{children:"Split"})]}),(0,B.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,B.jsx)("div",{className:"node-menu",children:(0,B.jsx)(T.A,{style:{color:"red"},onClick:e=>t(e,o)})})]})};var Ie=n(31840);const Fe=function(e){let{data:a,isConnectable:n}=e;const{id:o,deleteNode:t}=a;return(0,B.jsxs)("div",{className:"custom-node branch-node",children:[(0,B.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,B.jsxs)("div",{style:{textAlign:"center"},children:[(0,B.jsx)(Ie.A,{}),(0,B.jsx)("br",{}),(0,B.jsx)("p",{children:"ALL"})]}),(0,B.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:n}),(0,B.jsx)("div",{className:"node-menu",children:(0,B.jsx)(T.A,{style:{color:"red"},onClick:e=>t(e,o)})})]})};const Be=function(e){let{data:a,isConnectable:n}=e;const{id:o,deleteNode:t}=a;return(0,B.jsxs)("div",{className:"custom-node endflow",children:[(0,B.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,B.jsx)("h4",{children:1===a.endOption?"End":"Terminate"}),(0,B.jsx)("div",{className:"node-menu",children:(0,B.jsx)(T.A,{style:{color:"red"},onClick:e=>t(e,o)})})]})};var De=n(30767);const Me=function(e){var a;let{data:n,isConnectable:o}=e;const{getNodes:t,setNodes:l,deleteNode:i,id:d,parent:s,label:c}=n,r=t().filter((e=>e.id===s))[0],u="ifElseCondition"===(null===r||void 0===r?void 0:r.type),p="conditionalBranch"===(null===r||void 0===r?void 0:r.type),h="Select ".concat(u||p?"Branch":"Outcome"),x=c===h?{title:h,color:"gray"}:u?{title:c,color:"YES"===c?"green":"red"}:p?{title:c,color:"Other Option"===c?"green":"cornflowerblue"}:r.data.outcomes.filter((e=>e.title===n.label))[0],f=(e,a,n)=>e.data.label===a?h:e.data.id!==n?e.data.label:a,g=(null===(a=r.data.branches)||void 0===a?void 0:a.length)>0?r.data.branches.map((e=>({title:e.name,color:"cornflowerblue"}))).concat({title:"Other Option",color:"green"}):[],b=(0,B.jsx)("div",{children:(0,B.jsx)(G.A,{itemLayout:"horizontal",dataSource:u?[{title:"YES",color:"green"},{title:"NO",color:"red"}]:p?g:r.data.outcomes,renderItem:e=>(0,B.jsx)(G.A.Item,{className:"outcome-list",style:{background:e.color,cursor:"pointer"},actions:e.title===c?[(0,B.jsx)(De.A,{})]:[],onClick:()=>{var a;(a=e.title)!==c&&l((e=>e.map((e=>e.data.parent!==s?e:{...e,data:{...e.data,label:f(e,a,d)}}))))},children:(0,B.jsx)(G.A.Item.Meta,{title:e.title})})})});return(0,B.jsxs)("div",{className:"custom-node outcome",style:{backgroundColor:x.color},children:[(0,B.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:o}),(0,B.jsx)(m.A,{content:b,placement:"bottom",title:h,trigger:"hover",children:(0,B.jsx)("h4",{children:c})}),(0,B.jsx)(v.h7,{type:"source",position:v.yX.Bottom,id:"b",isConnectable:o}),(0,B.jsx)("div",{className:"node-menu",children:(0,B.jsx)(T.A,{style:{color:"red"},onClick:e=>i(e,d)})})]})};const Oe=function(e){let{data:a,isConnectable:n}=e;const{deleteNode:o,id:t}=a;return(0,B.jsxs)("div",{className:"custom-node empty",children:[(0,B.jsx)(v.h7,{type:"target",position:v.yX.Top,isConnectable:n}),(0,B.jsx)("p",{children:"Add Element Here"}),(0,B.jsx)("div",{className:"node-menu",children:(0,B.jsx)(T.A,{style:{color:"red"},onClick:e=>o(e,t)})})]})},Le=(0,o.lazy)((()=>n.e(533).then(n.bind(n,68533)))),ze=(0,o.lazy)((()=>Promise.all([n.e(58),n.e(580)]).then(n.bind(n,8580)))),Pe=(0,o.lazy)((()=>n.e(161).then(n.bind(n,27161)))),Ge={form:de,email:ce,approveSign:me,approval:pe,teamApproval:xe,approvalReport:ve,pdf:be,signDocument:ye,ifElseCondition:Se,conditionalBranch:ke,splitBranch:Ee,mergeBranch:Fe,endFlow:Be,outcome:Me,empty:Oe};function Re(){var e,a;(0,w.useSelector)((e=>e.App.documentId));const n="9G7x5T2mJVI2Js9w0NNB",[S,N]=(0,o.useState)(!0),[k,T]=(0,o.useState)(null),[E,I]=(0,o.useState)({}),[F,D]=(0,o.useState)("1"),[M,O]=(0,o.useState)([]),[L,z]=(0,o.useState)([]),[P,G]=(0,o.useState)([]),[R,V]=(0,o.useState)({loading:!1,origin:null}),q=(0,o.useRef)(null),H=(0,o.useRef)(null),{project:U,getIntersectingNodes:K,getEdges:Y,getNodes:W,getNode:X,setViewport:J}=(0,v.VH)(),Z=(0,w.useSelector)((e=>e.App.templateData)),{setTemplateData:Q,changeDocumentId:$}=_.A,ee=(0,w.useDispatch)(),ae=()=>{var e,a;const n=M.map((e=>{var a,n;return"outcome"===e.type&&["Select Outcome","Select Branch"].includes(e.data.label)?{label:"You need to select outcome in blank outcome node.",key:e.id}:"form"!==e.type||null!==(a=e.data.form)&&void 0!==a&&a.toString().includes("template-")||e.data.form&&("0"===e.id||e.data.form&&e.data.email&&""!==e.data.email)?["approval","approveSign"].includes(e.type)&&(void 0===e.data.approvers||(null===(n=e.data.approvers)||void 0===n?void 0:n.length)<1)?{label:"You need to add at least one approver.",key:e.id}:"teamApproval"!==e.type||void 0!==e.data.team&&e.data.team?"empty"===e.type?{label:"You need to remove an empty element.",key:e.id}:"email"!==e.type||e.data.recipientEmail&&""!==e.data.recipientEmail||e.data.clientEmail?"ifElseCondition"===e.type&&(!e.data.conditions||e.data.conditions.length<1)?{label:"You need to enter at least one condition.",key:e.id}:"conditionalBranch"===e.type&&(!e.data.branches||e.data.branches.length<2&&"form"===e.data.type)?{label:"You need to enter at least 2 branch conditions.",key:e.id}:"conditionalBranch"===e.type&&(!e.data.branches||e.data.branches.length<1&&"template"===e.data.type)?{label:"You need to enter at least 1 branch conditions.",key:e.id}:"approvalReport"!==e.type||e.data.recipientEmail&&""!==e.data.recipientEmail&&e.data.reportName&&""!==e.data.reportName?!["form","endFlow"].includes(e.type)&&L.filter((a=>a.source===e.id)).length<1&&L.filter((a=>a.target===e.id)).length<1||"form"===e.type&&L.filter((a=>a.source===e.id)).length<1||"endFlow"===e.type&&L.filter((a=>a.target===e.id)).length<1?{label:"Every nodes should be connected.",key:e.id}:null:{label:"You need to enter report name and recipient email.",key:e.id}:{label:"You need to enter recipient email.",key:e.id}:{label:"You need to select team.",key:e.id}:{label:"You need to enter form and assign email.",key:e.id}}));return 0===M.filter((e=>"endFlow"===e.type)).length&&n.push({label:"There should be at least 1 EndFlow node.",key:null===(e=(0,A.last)(M))||void 0===e?void 0:e.id}),0===M.filter((e=>"form"===e.type)).length&&n.push({label:"There should be at least 1 Source node.",key:null===(a=(0,A.first)(M))||void 0===a?void 0:a.id}),n.filter((e=>e))},ne=(e,a,n)=>{O((o=>o.map((o=>o.id!==e?o:{...o,data:{...o.data,[a]:n}}))))},oe=()=>{const e=W().filter((e=>"form"===e.type));return e.length>0?e.map((e=>e.data.form)):[]},te=(e,a)=>{e.stopPropagation(),O((e=>e.filter((e=>e.id!==a)))),W().filter((e=>"outcome"===e.type&&e.data.parent===a)).forEach((e=>O((a=>a.filter((a=>a.id!==e.id)))))),W().filter((e=>"empty"===e.type&&L.filter((a=>a.target===e.id)).length<1)).forEach((e=>O((a=>a.filter((a=>a.id!==e.id))))));const n=Y().filter((e=>e.target===a)).length>0?X(Y().filter((e=>e.target===a))[0].source):null;n&&"outcome"===n.type&&O((e=>e.filter((e=>e.id!==n.id)))),T(null)};(0,o.useEffect)((()=>{const e=[{id:"0",type:"form",position:{x:100,y:0},data:{label:"Source",form:null,email:"",form_field:null,notify:!1,remind:!1,onChange:ne,id:"0"}}];O(e),R.origin||async function(){const a=await(0,y.Ay)("workflow/get-details",{hash_key:n||""},"post");if(N(!1),a.success&&a.data){const{name:o,status:t,restart:l,id:i}=a.data;I({name:o,status:t,restart:l}),V((e=>({...e,origin:{name:a.data.name,status:a.data.status,restart:a.data.restart,workflow_json:a.data.workflow_json}}))),a.data.workflow_json?(O(a.data.workflow_json.nodes.map((e=>({...e,data:{...e.data,onChange:ne,setNodes:O,getNodes:W,deleteNode:te,forms:a.data.forms,quizs:a.data.quizs,templates:a.data.templates,selectedForms:oe}})))),z(a.data.workflow_json.edges)):O(e.map((e=>({...e,data:{...e.data,forms:a.data.forms,quizs:a.data.quizs,templates:a.data.templates,selectedForms:oe,setNodes:O,getNodes:W,deleteNode:te}})))),V((e=>({...e,forms:a.data.forms,quizs:a.data.quizs,templates:a.data.templates,status:a.data.status}))),async function(){const e=await(0,y.Ay)("workflow/get-logs",{hash_key:n||""},"post");e&&e.data?G(e.data):console.log(e)}()}else document.getElementById("root-workflow").setAttribute("data-path","/dashboard/my-workflows"),ee($("/dashboard/my-workflows"))}()}),[]);const le=(0,o.useCallback)((e=>O((a=>(0,v._0)(e,a)))),[O]);(0,o.useEffect)((()=>{const e=setTimeout((()=>{ee(Q({...Z,forms:oe()}))}),1e3);return()=>clearTimeout(e)}),[M]);const ie=(0,o.useCallback)((e=>z((a=>(0,v.zW)(e,a)))),[z]),de=(0,o.useCallback)((e=>{const a=W().filter((a=>a.id===e.source))[0],n=W().filter((a=>a.id===e.target))[0];if(["apporval","approveSign","teamApproval","ifElseCondition","conditionalBranch"].includes(a.type)&&"outcome"!==n.type){const e=["ifElseCondition","conditionalBranch"].includes(a.type),o={id:"".concat(n.id,"-outcome"),position:U({x:n.position.x,y:n.position.y}),type:"outcome",data:{id:"".concat(n.id,"-outcome"),label:e?"Select Branch":"Select Outcome",parent:a.id,getNodes:W,setNodes:O,deleteNode:te}};O((e=>e.filter((e=>e.id!==n.id)).concat(o)));const t={...n,position:{x:n.position.x,y:n.position.y+100}};return O((e=>e.concat(t))),z((e=>e.concat({id:"".concat(a.id,"-").concat(n.id,"-outcome"),source:a.id,target:"".concat(n.id,"-outcome")}))),void z((e=>e.concat({id:"".concat(n.id,"-outcome-").concat(n.id),source:"".concat(n.id,"-outcome"),target:n.id})))}(["apporval","approveSign","teamApproval","ifElseCondition","conditionalBranch"].includes(a.type)||"outcome"!==n.type)&&z((a=>(0,v.rN)(e,a)))}),[z]),se=(0,o.useCallback)(((e,a)=>{let{nodeId:n}=a;H.current=n}),[]),ce=(0,o.useCallback)((e=>{if(e.target.classList.contains("react-flow__pane")){const a=new Date,{top:n,left:o}=q.current.getBoundingClientRect(),t="".concat(a.getTime()),l=X(H.current);if(["approval","approveSign","teamApproval","ifElseCondition","conditionalBranch"].includes(l.type)){const a=["ifElseCondition","conditionalBranch"].includes(l.type),i={id:t,position:U({x:e.clientX-o-15,y:e.clientY-n+150}),type:"empty",data:{label:"Add new Element",id:t,deleteNode:te}},d={id:"".concat(t,"-outcome"),position:U({x:e.clientX-o,y:e.clientY-n}),type:"outcome",data:{id:"".concat(t,"-outcome"),label:a?"Select Branch":"Select Outcome",parent:l.id,getNodes:W,setNodes:O,deleteNode:te}};O((e=>e.concat(d))),O((e=>e.concat(i))),z((e=>e.concat({id:"".concat(t,"-outcome-edge"),source:H.current,target:"".concat(t,"-outcome")}))),z((e=>e.concat({id:t,source:"".concat(t,"-outcome"),target:t})))}else{const a={id:t,position:U({x:e.clientX-o,y:e.clientY-n}),type:"empty",data:{label:"Add new Element",id:t,deleteNode:te}};O((e=>e.concat(a))),z((e=>e.concat({id:t,source:H.current,target:t})))}}}),[U]),re=(0,o.useCallback)(((e,a)=>{if(Y().filter((e=>e.target===a.id)).length>0)return;const n=K(a).filter((e=>"empty"===e.type)).map((e=>e.id));O((e=>e.map((e=>({...e,className:n.includes(e.id)?"highlight":""})))))}),[]),me=(0,o.useCallback)(((e,a)=>{if(Y().filter((e=>e.target===a.id)).length>0)return;const n=K(a).filter((e=>"empty"===e.type));n.length>0&&(O((e=>e.filter((e=>e.id!==n[0].id)).map((e=>e.id!==a.id?e:{...a,position:n[0].position})))),z((e=>e.map((e=>({...e,source:e.source===n[0].id?a.id:e.source,target:e.target===n[0].id?a.id:e.target}))))))}),[]),ue=(0,o.useCallback)((e=>{e.forEach((e=>{["approval","teamApproval","approveSign","conditionalBranch","ifElseCondition"].includes(e.type)&&M.filter((a=>"outcome"===a.type&&a.data.parent===e.id)).forEach((e=>O((a=>a.filter((a=>a.id!==e.id))))))})),T(null)}),[M,L]),pe=(0,B.jsxs)(B.Fragment,{children:[!["Published","Completed"].includes(R.status)&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Le,{nodes:M,setNodes:O,onChange:ne,getNodes:W,deleteNode:te,forms:R.forms,quizs:R.quizs,templates:R.templates,selectedForms:oe}),(0,B.jsx)(ze,{active:k,setActive:T,onChange:ne})]}),["Completed","Published"].includes(R.status)&&(0,B.jsx)(Pe,{logs:P,setViewport:J,getNodes:W}),(0,B.jsx)("div",{style:{width:"100%",height:"calc( 100vh - 65px)"},ref:q,children:(0,B.jsxs)(v.Gc,{nodes:M,edges:L,defaultEdgeOptions:{type:"smoothstep",markerEnd:{type:v.TG.ArrowClosed}},deleteKeyCode:"Delete",fitViewOptions:{padding:1,maxZoom:1},onNodesChange:le,onNodeDrag:re,onNodeDragStop:me,onNodesDelete:ue,onEdgesChange:ie,onConnect:de,onNodeClick:(e,a)=>T(a),nodeTypes:Ge,onConnectStart:se,onConnectEnd:ce,elementsSelectable:"Unpublished"===R.status,nodesConnectable:"Unpublished"===R.status,nodesDraggable:"Unpublished"===R.status,fitView:!0,children:[(0,B.jsx)(g.H,{showInteractive:"Unpublished"===R.status}),(0,B.jsx)(b.o,{zoomable:!0,pannable:!0}),(0,B.jsx)(j.V,{variant:"dots",gap:12,size:1})]})})]}),he=(0,B.jsx)("div",{style:{marginTop:"85px"},children:(0,B.jsxs)(l.A,{children:[(0,B.jsx)(i.A,{md:6}),(0,B.jsxs)(i.A,{md:12,children:[(0,B.jsxs)("div",{className:"flex",style:{margin:"30px"},children:[(0,B.jsx)(x.A,{style:{color:"green",fontSize:"25px",marginRight:"10px !important"}}),(0,B.jsxs)("h3",{children:["Approval Settings",(0,B.jsx)("br",{}),(0,B.jsx)("small",{children:"Change your approval title and status."})]})]}),(0,B.jsxs)(d.A,{style:{padding:"50px 20px"},children:[(0,B.jsxs)("h3",{children:["Approval Flow Title",(0,B.jsx)("br",{}),(0,B.jsx)("small",{children:"Enter a short, descriptive name for this flow."})]}),(0,B.jsx)(s.A,{value:E.name,onChange:e=>I({...E,name:e.target.value}),disabled:"Published"===R.status}),(0,B.jsx)(c.A,{}),(0,B.jsxs)("h3",{children:["Status",(0,B.jsx)("br",{}),(0,B.jsx)("small",{children:"You can enable or disable your flow from status."})]}),(0,B.jsx)(r.A,{options:[{label:"Unpublished",value:"Unpublished"},{label:"Published",value:"Published"}],value:E.status,onChange:e=>{var a;"Published"===e&&(null===(a=ae())||void 0===a?void 0:a.length)>0?(0,C.A)("error","You can't publish this workflow with any errors."):I({...E,status:e})},style:{width:"100%"}})]})]}),(0,B.jsx)(i.A,{md:6})]})}),xe=(0,B.jsx)("h3",{children:"Publish Page"}),fe=(0,B.jsxs)(B.Fragment,{children:[(null===(e=ae())||void 0===e?void 0:e.length)>0&&(0,B.jsx)(m.A,{content:null===(a=ae())||void 0===a?void 0:a.map((e=>(0,B.jsxs)("li",{style:{cursor:"pointer",marginTop:"7px"},onClick:()=>{var a,n,o,t;D("1"),T(M.filter((a=>(null===a||void 0===a?void 0:a.id)===(null===e||void 0===e?void 0:e.key)))[0]);const l=M.filter((a=>(null===a||void 0===a?void 0:a.id)===(null===e||void 0===e?void 0:e.key)))[0];J({x:-(null===l||void 0===l||null===(a=l.position)||void 0===a?void 0:a.x)-(null===l||void 0===l?void 0:l.width)/2+(null===(n=window)||void 0===n?void 0:n.innerWidth)/2,y:-(null===l||void 0===l||null===(o=l.position)||void 0===o?void 0:o.y)-(null===l||void 0===l?void 0:l.height)+(null===(t=window)||void 0===t?void 0:t.innerHeight)/2,zoom:1},{duration:500})},children:[(0,B.jsx)(f.A,{style:{color:"red",marginRight:"10px"}}),null===e||void 0===e?void 0:e.label]}))),trigger:"click",placement:"bottom",title:(0,B.jsx)("h3",{style:{color:"red",textAlign:"center"},children:"Errors"}),children:(0,B.jsx)(u.A,{count:"\u26a0 ".concat(ae().length," Errors"),style:{marginRight:"10px",cursor:"pointer"},onClick:()=>console.log(ae())})}),(0,B.jsx)(p.Ay,{type:"primary",style:{marginRight:"10px"},onClick:async()=>{var e;if("Published"===E.status&&(null===(e=ae())||void 0===e?void 0:e.length)>0)return void(0,C.A)("error","You need to fix all errors or set status 'Unpublished' before saving.");V((e=>({...e,loading:!0})));(await(0,y.Ay)("workflow/update",{hash_key:n,name:E.name,status:E.status,restart:E.restart,workflow_json:JSON.stringify({nodes:M,edges:L})},"post")).success?(document.getElementById("root-workflow").setAttribute("data-path","/dashboard/my-workflows"),ee($("/dashboard/my-workflows"))):(0,C.A)("error"),V((e=>({...e,loading:!1})))},disabled:(0,A.isEqual)(JSON.stringify({name:E.name,status:E.status,restart:E.restart,workflow_json:{nodes:M,edges:L}}),JSON.stringify(R.origin)),loading:R.loading,children:"Save"})]}),ve=(0,B.jsx)(p.Ay,{style:{marginLeft:"10px"},onClick:()=>{document.getElementById("root-workflow").setAttribute("data-path","/dashboard/my-workflows"),ee($("/dashboard/my-workflows"))},children:"Back"});return(0,B.jsxs)(o.Suspense,{fallback:(0,B.jsx)(t.A,{}),children:[(0,B.jsx)("style",{children:["Published","Completed"].includes(R.status)&&".custom-node .node-menu{ display: none !important; } .custom-node *{ pointer-events: none !important; }"}),S&&(0,B.jsx)(t.A,{}),!S&&(0,B.jsxs)("div",{className:"workflow-container",children:[(0,B.jsx)(h.A,{tabBarExtraContent:{left:ve,right:fe},activeKey:F,items:[{key:"1",label:"BUILD"},{key:"2",label:"SETTINGS"}],centered:!0,size:"large",onChange:e=>{D(e)}}),"1"===F&&pe,"2"===F&&he,"3"===F&&xe]})]})}const Ve=()=>(0,B.jsx)(v.Ln,{children:(0,B.jsx)(Re,{})})},73053:(e,a,n)=>{n.d(a,{A:()=>t});var o=n(44414);const t=function(e){return function(a){let n="ltr";return"undefined"!==typeof window&&(n=document.getElementsByTagName("html")[0].getAttribute("dir")),(0,o.jsx)(e,{...a,"data-rtl":n})}}},85908:(e,a,n)=>{function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.3;return"\n      -webkit-transition: all ".concat(e,"s cubic-bezier(0.215, 0.61, 0.355, 1);\n      -moz-transition: all ").concat(e,"s cubic-bezier(0.215, 0.61, 0.355, 1);\n      -ms-transition: all ").concat(e,"s cubic-bezier(0.215, 0.61, 0.355, 1);\n      -o-transition: all ").concat(e,"s cubic-bezier(0.215, 0.61, 0.355, 1);\n      transition: all ").concat(e,"s cubic-bezier(0.215, 0.61, 0.355, 1);\n  ")}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"\n      -webkit-border-radius: ".concat(e,";\n      -moz-border-radius: ").concat(e,";\n      -ms-transition: ").concat(e,";\n      -o-border-radius: ").concat(e,";\n      border-radius: ").concat(e,";\n  ")}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"none";return"\n      -webkit-box-shadow: ".concat(e,";\n      -moz-box-shadow: ").concat(e,";\n      box-shadow: ").concat(e,";\n  ")}n.d(a,{MS:()=>l,Vq:()=>t,kY:()=>o})},35676:(e,a,n)=>{n.d(a,{A:()=>l});var o=n(9950),t=n(41397);const l=function(e){let{form:a,visible:n,initVal:l}=e;const i=(0,o.useRef)();(0,o.useEffect)((()=>{i.current=n,n&&(0,t.isObject)(l)&&!(0,t.isEmpty)(l)&&setTimeout((()=>{a.setFieldsValue(l)}),100)}),[n]);const d=i.current;(0,o.useEffect)((()=>{!n&&d&&a.resetFields()}),[n])}}}]);